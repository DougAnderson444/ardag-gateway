var wp=Object.create,fu=Object.defineProperty,bp=Object.getOwnPropertyDescriptor,mp=Object.getOwnPropertyNames,vp=Object.getPrototypeOf,Ep=Object.prototype.hasOwnProperty,xp=(e,t)=>()=>(e&&(t=e(e=0)),t),Ft=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),_p=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of mp(t))!Ep.call(e,o)&&o!==r&&fu(e,o,{get:()=>t[o],enumerable:!(n=bp(t,o))||n.enumerable});return e},du=(e,t,r)=>(r=e!=null?wp(vp(e)):{},_p(t||!e||!e.__esModule?fu(r,"default",{value:e,enumerable:!0}):r,e)),gu=Ft(e=>{me(),e.byteLength=h,e.toByteArray=m,e.fromByteArray=f;var t=[],r=[],n=typeof Uint8Array<"u"?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(u=0,c=o.length;u<c;++u)t[u]=o[u],r[o.charCodeAt(u)]=u;var u,c;r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63;function a(y){var b=y.length;if(b%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var g=y.indexOf("=");g===-1&&(g=b);var A=g===b?0:4-g%4;return[g,A]}function h(y){var b=a(y),g=b[0],A=b[1];return(g+A)*3/4-A}function d(y,b,g){return(b+g)*3/4-g}function m(y){var b,g=a(y),A=g[0],T=g[1],O=new n(d(y,A,T)),C=0,j=T>0?A-4:A,B;for(B=0;B<j;B+=4)b=r[y.charCodeAt(B)]<<18|r[y.charCodeAt(B+1)]<<12|r[y.charCodeAt(B+2)]<<6|r[y.charCodeAt(B+3)],O[C++]=b>>16&255,O[C++]=b>>8&255,O[C++]=b&255;return T===2&&(b=r[y.charCodeAt(B)]<<2|r[y.charCodeAt(B+1)]>>4,O[C++]=b&255),T===1&&(b=r[y.charCodeAt(B)]<<10|r[y.charCodeAt(B+1)]<<4|r[y.charCodeAt(B+2)]>>2,O[C++]=b>>8&255,O[C++]=b&255),O}function w(y){return t[y>>18&63]+t[y>>12&63]+t[y>>6&63]+t[y&63]}function p(y,b,g){for(var A,T=[],O=b;O<g;O+=3)A=(y[O]<<16&16711680)+(y[O+1]<<8&65280)+(y[O+2]&255),T.push(w(A));return T.join("")}function f(y){for(var b,g=y.length,A=g%3,T=[],O=16383,C=0,j=g-A;C<j;C+=O)T.push(p(y,C,C+O>j?j:C+O));return A===1?(b=y[g-1],T.push(t[b>>2]+t[b<<4&63]+"==")):A===2&&(b=(y[g-2]<<8)+y[g-1],T.push(t[b>>10]+t[b>>4&63]+t[b<<2&63]+"=")),T.join("")}}),wu=Ft(e=>{me(),e.read=function(t,r,n,o,u){var c,a,h=u*8-o-1,d=(1<<h)-1,m=d>>1,w=-7,p=n?u-1:0,f=n?-1:1,y=t[r+p];for(p+=f,c=y&(1<<-w)-1,y>>=-w,w+=h;w>0;c=c*256+t[r+p],p+=f,w-=8);for(a=c&(1<<-w)-1,c>>=-w,w+=o;w>0;a=a*256+t[r+p],p+=f,w-=8);if(c===0)c=1-m;else{if(c===d)return a?NaN:(y?-1:1)*(1/0);a=a+Math.pow(2,o),c=c-m}return(y?-1:1)*a*Math.pow(2,c-o)},e.write=function(t,r,n,o,u,c){var a,h,d,m=c*8-u-1,w=(1<<m)-1,p=w>>1,f=u===23?Math.pow(2,-24)-Math.pow(2,-77):0,y=o?0:c-1,b=o?1:-1,g=r<0||r===0&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(h=isNaN(r)?1:0,a=w):(a=Math.floor(Math.log(r)/Math.LN2),r*(d=Math.pow(2,-a))<1&&(a--,d*=2),a+p>=1?r+=f/d:r+=f*Math.pow(2,1-p),r*d>=2&&(a++,d/=2),a+p>=w?(h=0,a=w):a+p>=1?(h=(r*d-1)*Math.pow(2,u),a=a+p):(h=r*Math.pow(2,p-1)*Math.pow(2,u),a=0));u>=8;t[n+y]=h&255,y+=b,h/=256,u-=8);for(a=a<<u|h,m+=u;m>0;t[n+y]=a&255,y+=b,a/=256,m-=8);t[n+y-b]|=g*128}}),Nu=Ft(e=>{me();var t=gu(),r=wu(),n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=a,e.SlowBuffer=T,e.INSPECT_MAX_BYTES=50;var o=2147483647;e.kMaxLength=o,a.TYPED_ARRAY_SUPPORT=u(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function u(){try{let i=new Uint8Array(1),s={foo:function(){return 42}};return Object.setPrototypeOf(s,Uint8Array.prototype),Object.setPrototypeOf(i,s),i.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function c(i){if(i>o)throw new RangeError('The value "'+i+'" is invalid for option "size"');let s=new Uint8Array(i);return Object.setPrototypeOf(s,a.prototype),s}function a(i,s,l){if(typeof i=="number"){if(typeof s=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return w(i)}return h(i,s,l)}a.poolSize=8192;function h(i,s,l){if(typeof i=="string")return p(i,s);if(ArrayBuffer.isView(i))return y(i);if(i==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof i);if(Ae(i,ArrayBuffer)||i&&Ae(i.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Ae(i,SharedArrayBuffer)||i&&Ae(i.buffer,SharedArrayBuffer)))return b(i,s,l);if(typeof i=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let E=i.valueOf&&i.valueOf();if(E!=null&&E!==i)return a.from(E,s,l);let _=g(i);if(_)return _;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof i[Symbol.toPrimitive]=="function")return a.from(i[Symbol.toPrimitive]("string"),s,l);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof i)}a.from=function(i,s,l){return h(i,s,l)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function d(i){if(typeof i!="number")throw new TypeError('"size" argument must be of type number');if(i<0)throw new RangeError('The value "'+i+'" is invalid for option "size"')}function m(i,s,l){return d(i),i<=0?c(i):s!==void 0?typeof l=="string"?c(i).fill(s,l):c(i).fill(s):c(i)}a.alloc=function(i,s,l){return m(i,s,l)};function w(i){return d(i),c(i<0?0:A(i)|0)}a.allocUnsafe=function(i){return w(i)},a.allocUnsafeSlow=function(i){return w(i)};function p(i,s){if((typeof s!="string"||s==="")&&(s="utf8"),!a.isEncoding(s))throw new TypeError("Unknown encoding: "+s);let l=O(i,s)|0,E=c(l),_=E.write(i,s);return _!==l&&(E=E.slice(0,_)),E}function f(i){let s=i.length<0?0:A(i.length)|0,l=c(s);for(let E=0;E<s;E+=1)l[E]=i[E]&255;return l}function y(i){if(Ae(i,Uint8Array)){let s=new Uint8Array(i);return b(s.buffer,s.byteOffset,s.byteLength)}return f(i)}function b(i,s,l){if(s<0||i.byteLength<s)throw new RangeError('"offset" is outside of buffer bounds');if(i.byteLength<s+(l||0))throw new RangeError('"length" is outside of buffer bounds');let E;return s===void 0&&l===void 0?E=new Uint8Array(i):l===void 0?E=new Uint8Array(i,s):E=new Uint8Array(i,s,l),Object.setPrototypeOf(E,a.prototype),E}function g(i){if(a.isBuffer(i)){let s=A(i.length)|0,l=c(s);return l.length===0||i.copy(l,0,0,s),l}if(i.length!==void 0)return typeof i.length!="number"||Qe(i.length)?c(0):f(i);if(i.type==="Buffer"&&Array.isArray(i.data))return f(i.data)}function A(i){if(i>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return i|0}function T(i){return+i!=i&&(i=0),a.alloc(+i)}a.isBuffer=function(i){return i!=null&&i._isBuffer===!0&&i!==a.prototype},a.compare=function(i,s){if(Ae(i,Uint8Array)&&(i=a.from(i,i.offset,i.byteLength)),Ae(s,Uint8Array)&&(s=a.from(s,s.offset,s.byteLength)),!a.isBuffer(i)||!a.isBuffer(s))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(i===s)return 0;let l=i.length,E=s.length;for(let _=0,k=Math.min(l,E);_<k;++_)if(i[_]!==s[_]){l=i[_],E=s[_];break}return l<E?-1:E<l?1:0},a.isEncoding=function(i){switch(String(i).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(i,s){if(!Array.isArray(i))throw new TypeError('"list" argument must be an Array of Buffers');if(i.length===0)return a.alloc(0);let l;if(s===void 0)for(s=0,l=0;l<i.length;++l)s+=i[l].length;let E=a.allocUnsafe(s),_=0;for(l=0;l<i.length;++l){let k=i[l];if(Ae(k,Uint8Array))_+k.length>E.length?(a.isBuffer(k)||(k=a.from(k)),k.copy(E,_)):Uint8Array.prototype.set.call(E,k,_);else if(a.isBuffer(k))k.copy(E,_);else throw new TypeError('"list" argument must be an Array of Buffers');_+=k.length}return E};function O(i,s){if(a.isBuffer(i))return i.length;if(ArrayBuffer.isView(i)||Ae(i,ArrayBuffer))return i.byteLength;if(typeof i!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof i);let l=i.length,E=arguments.length>2&&arguments[2]===!0;if(!E&&l===0)return 0;let _=!1;for(;;)switch(s){case"ascii":case"latin1":case"binary":return l;case"utf8":case"utf-8":return Ye(i).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return l*2;case"hex":return l>>>1;case"base64":return ot(i).length;default:if(_)return E?-1:Ye(i).length;s=(""+s).toLowerCase(),_=!0}}a.byteLength=O;function C(i,s,l){let E=!1;if((s===void 0||s<0)&&(s=0),s>this.length||((l===void 0||l>this.length)&&(l=this.length),l<=0)||(l>>>=0,s>>>=0,l<=s))return"";for(i||(i="utf8");;)switch(i){case"hex":return N(this,s,l);case"utf8":case"utf-8":return xe(this,s,l);case"ascii":return M(this,s,l);case"latin1":case"binary":return x(this,s,l);case"base64":return he(this,s,l);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return L(this,s,l);default:if(E)throw new TypeError("Unknown encoding: "+i);i=(i+"").toLowerCase(),E=!0}}a.prototype._isBuffer=!0;function j(i,s,l){let E=i[s];i[s]=i[l],i[l]=E}a.prototype.swap16=function(){let i=this.length;if(i%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let s=0;s<i;s+=2)j(this,s,s+1);return this},a.prototype.swap32=function(){let i=this.length;if(i%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let s=0;s<i;s+=4)j(this,s,s+3),j(this,s+1,s+2);return this},a.prototype.swap64=function(){let i=this.length;if(i%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let s=0;s<i;s+=8)j(this,s,s+7),j(this,s+1,s+6),j(this,s+2,s+5),j(this,s+3,s+4);return this},a.prototype.toString=function(){let i=this.length;return i===0?"":arguments.length===0?xe(this,0,i):C.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(i){if(!a.isBuffer(i))throw new TypeError("Argument must be a Buffer");return this===i?!0:a.compare(this,i)===0},a.prototype.inspect=function(){let i="",s=e.INSPECT_MAX_BYTES;return i=this.toString("hex",0,s).replace(/(.{2})/g,"$1 ").trim(),this.length>s&&(i+=" ... "),"<Buffer "+i+">"},n&&(a.prototype[n]=a.prototype.inspect),a.prototype.compare=function(i,s,l,E,_){if(Ae(i,Uint8Array)&&(i=a.from(i,i.offset,i.byteLength)),!a.isBuffer(i))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof i);if(s===void 0&&(s=0),l===void 0&&(l=i?i.length:0),E===void 0&&(E=0),_===void 0&&(_=this.length),s<0||l>i.length||E<0||_>this.length)throw new RangeError("out of range index");if(E>=_&&s>=l)return 0;if(E>=_)return-1;if(s>=l)return 1;if(s>>>=0,l>>>=0,E>>>=0,_>>>=0,this===i)return 0;let k=_-E,R=l-s,Y=Math.min(k,R),ae=this.slice(E,_),X=i.slice(s,l);for(let Q=0;Q<Y;++Q)if(ae[Q]!==X[Q]){k=ae[Q],R=X[Q];break}return k<R?-1:R<k?1:0};function B(i,s,l,E,_){if(i.length===0)return-1;if(typeof l=="string"?(E=l,l=0):l>2147483647?l=2147483647:l<-2147483648&&(l=-2147483648),l=+l,Qe(l)&&(l=_?0:i.length-1),l<0&&(l=i.length+l),l>=i.length){if(_)return-1;l=i.length-1}else if(l<0)if(_)l=0;else return-1;if(typeof s=="string"&&(s=a.from(s,E)),a.isBuffer(s))return s.length===0?-1:I(i,s,l,E,_);if(typeof s=="number")return s=s&255,typeof Uint8Array.prototype.indexOf=="function"?_?Uint8Array.prototype.indexOf.call(i,s,l):Uint8Array.prototype.lastIndexOf.call(i,s,l):I(i,[s],l,E,_);throw new TypeError("val must be string, number or Buffer")}function I(i,s,l,E,_){let k=1,R=i.length,Y=s.length;if(E!==void 0&&(E=String(E).toLowerCase(),E==="ucs2"||E==="ucs-2"||E==="utf16le"||E==="utf-16le")){if(i.length<2||s.length<2)return-1;k=2,R/=2,Y/=2,l/=2}function ae(Q,ee){return k===1?Q[ee]:Q.readUInt16BE(ee*k)}let X;if(_){let Q=-1;for(X=l;X<R;X++)if(ae(i,X)===ae(s,Q===-1?0:X-Q)){if(Q===-1&&(Q=X),X-Q+1===Y)return Q*k}else Q!==-1&&(X-=X-Q),Q=-1}else for(l+Y>R&&(l=R-Y),X=l;X>=0;X--){let Q=!0;for(let ee=0;ee<Y;ee++)if(ae(i,X+ee)!==ae(s,ee)){Q=!1;break}if(Q)return X}return-1}a.prototype.includes=function(i,s,l){return this.indexOf(i,s,l)!==-1},a.prototype.indexOf=function(i,s,l){return B(this,i,s,l,!0)},a.prototype.lastIndexOf=function(i,s,l){return B(this,i,s,l,!1)};function S(i,s,l,E){l=Number(l)||0;let _=i.length-l;E?(E=Number(E),E>_&&(E=_)):E=_;let k=s.length;E>k/2&&(E=k/2);let R;for(R=0;R<E;++R){let Y=parseInt(s.substr(R*2,2),16);if(Qe(Y))return R;i[l+R]=Y}return R}function F(i,s,l,E){return je(Ye(s,i.length-l),i,l,E)}function D(i,s,l,E){return je(ut(s),i,l,E)}function q(i,s,l,E){return je(ot(s),i,l,E)}function J(i,s,l,E){return je(lt(s,i.length-l),i,l,E)}a.prototype.write=function(i,s,l,E){if(s===void 0)E="utf8",l=this.length,s=0;else if(l===void 0&&typeof s=="string")E=s,l=this.length,s=0;else if(isFinite(s))s=s>>>0,isFinite(l)?(l=l>>>0,E===void 0&&(E="utf8")):(E=l,l=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let _=this.length-s;if((l===void 0||l>_)&&(l=_),i.length>0&&(l<0||s<0)||s>this.length)throw new RangeError("Attempt to write outside buffer bounds");E||(E="utf8");let k=!1;for(;;)switch(E){case"hex":return S(this,i,s,l);case"utf8":case"utf-8":return F(this,i,s,l);case"ascii":case"latin1":case"binary":return D(this,i,s,l);case"base64":return q(this,i,s,l);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return J(this,i,s,l);default:if(k)throw new TypeError("Unknown encoding: "+E);E=(""+E).toLowerCase(),k=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function he(i,s,l){return s===0&&l===i.length?t.fromByteArray(i):t.fromByteArray(i.slice(s,l))}function xe(i,s,l){l=Math.min(i.length,l);let E=[],_=s;for(;_<l;){let k=i[_],R=null,Y=k>239?4:k>223?3:k>191?2:1;if(_+Y<=l){let ae,X,Q,ee;switch(Y){case 1:k<128&&(R=k);break;case 2:ae=i[_+1],(ae&192)===128&&(ee=(k&31)<<6|ae&63,ee>127&&(R=ee));break;case 3:ae=i[_+1],X=i[_+2],(ae&192)===128&&(X&192)===128&&(ee=(k&15)<<12|(ae&63)<<6|X&63,ee>2047&&(ee<55296||ee>57343)&&(R=ee));break;case 4:ae=i[_+1],X=i[_+2],Q=i[_+3],(ae&192)===128&&(X&192)===128&&(Q&192)===128&&(ee=(k&15)<<18|(ae&63)<<12|(X&63)<<6|Q&63,ee>65535&&ee<1114112&&(R=ee))}}R===null?(R=65533,Y=1):R>65535&&(R-=65536,E.push(R>>>10&1023|55296),R=56320|R&1023),E.push(R),_+=Y}return Te(E)}var Ie=4096;function Te(i){let s=i.length;if(s<=Ie)return String.fromCharCode.apply(String,i);let l="",E=0;for(;E<s;)l+=String.fromCharCode.apply(String,i.slice(E,E+=Ie));return l}function M(i,s,l){let E="";l=Math.min(i.length,l);for(let _=s;_<l;++_)E+=String.fromCharCode(i[_]&127);return E}function x(i,s,l){let E="";l=Math.min(i.length,l);for(let _=s;_<l;++_)E+=String.fromCharCode(i[_]);return E}function N(i,s,l){let E=i.length;(!s||s<0)&&(s=0),(!l||l<0||l>E)&&(l=E);let _="";for(let k=s;k<l;++k)_+=ft[i[k]];return _}function L(i,s,l){let E=i.slice(s,l),_="";for(let k=0;k<E.length-1;k+=2)_+=String.fromCharCode(E[k]+E[k+1]*256);return _}a.prototype.slice=function(i,s){let l=this.length;i=~~i,s=s===void 0?l:~~s,i<0?(i+=l,i<0&&(i=0)):i>l&&(i=l),s<0?(s+=l,s<0&&(s=0)):s>l&&(s=l),s<i&&(s=i);let E=this.subarray(i,s);return Object.setPrototypeOf(E,a.prototype),E};function U(i,s,l){if(i%1!==0||i<0)throw new RangeError("offset is not uint");if(i+s>l)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(i,s,l){i=i>>>0,s=s>>>0,l||U(i,s,this.length);let E=this[i],_=1,k=0;for(;++k<s&&(_*=256);)E+=this[i+k]*_;return E},a.prototype.readUintBE=a.prototype.readUIntBE=function(i,s,l){i=i>>>0,s=s>>>0,l||U(i,s,this.length);let E=this[i+--s],_=1;for(;s>0&&(_*=256);)E+=this[i+--s]*_;return E},a.prototype.readUint8=a.prototype.readUInt8=function(i,s){return i=i>>>0,s||U(i,1,this.length),this[i]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(i,s){return i=i>>>0,s||U(i,2,this.length),this[i]|this[i+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(i,s){return i=i>>>0,s||U(i,2,this.length),this[i]<<8|this[i+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(i,s){return i=i>>>0,s||U(i,4,this.length),(this[i]|this[i+1]<<8|this[i+2]<<16)+this[i+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(i,s){return i=i>>>0,s||U(i,4,this.length),this[i]*16777216+(this[i+1]<<16|this[i+2]<<8|this[i+3])},a.prototype.readBigUInt64LE=ke(function(i){i=i>>>0,Fe(i,"offset");let s=this[i],l=this[i+7];(s===void 0||l===void 0)&&Le(i,this.length-8);let E=s+this[++i]*2**8+this[++i]*2**16+this[++i]*2**24,_=this[++i]+this[++i]*2**8+this[++i]*2**16+l*2**24;return BigInt(E)+(BigInt(_)<<BigInt(32))}),a.prototype.readBigUInt64BE=ke(function(i){i=i>>>0,Fe(i,"offset");let s=this[i],l=this[i+7];(s===void 0||l===void 0)&&Le(i,this.length-8);let E=s*2**24+this[++i]*2**16+this[++i]*2**8+this[++i],_=this[++i]*2**24+this[++i]*2**16+this[++i]*2**8+l;return(BigInt(E)<<BigInt(32))+BigInt(_)}),a.prototype.readIntLE=function(i,s,l){i=i>>>0,s=s>>>0,l||U(i,s,this.length);let E=this[i],_=1,k=0;for(;++k<s&&(_*=256);)E+=this[i+k]*_;return _*=128,E>=_&&(E-=Math.pow(2,8*s)),E},a.prototype.readIntBE=function(i,s,l){i=i>>>0,s=s>>>0,l||U(i,s,this.length);let E=s,_=1,k=this[i+--E];for(;E>0&&(_*=256);)k+=this[i+--E]*_;return _*=128,k>=_&&(k-=Math.pow(2,8*s)),k},a.prototype.readInt8=function(i,s){return i=i>>>0,s||U(i,1,this.length),this[i]&128?(255-this[i]+1)*-1:this[i]},a.prototype.readInt16LE=function(i,s){i=i>>>0,s||U(i,2,this.length);let l=this[i]|this[i+1]<<8;return l&32768?l|4294901760:l},a.prototype.readInt16BE=function(i,s){i=i>>>0,s||U(i,2,this.length);let l=this[i+1]|this[i]<<8;return l&32768?l|4294901760:l},a.prototype.readInt32LE=function(i,s){return i=i>>>0,s||U(i,4,this.length),this[i]|this[i+1]<<8|this[i+2]<<16|this[i+3]<<24},a.prototype.readInt32BE=function(i,s){return i=i>>>0,s||U(i,4,this.length),this[i]<<24|this[i+1]<<16|this[i+2]<<8|this[i+3]},a.prototype.readBigInt64LE=ke(function(i){i=i>>>0,Fe(i,"offset");let s=this[i],l=this[i+7];(s===void 0||l===void 0)&&Le(i,this.length-8);let E=this[i+4]+this[i+5]*2**8+this[i+6]*2**16+(l<<24);return(BigInt(E)<<BigInt(32))+BigInt(s+this[++i]*2**8+this[++i]*2**16+this[++i]*2**24)}),a.prototype.readBigInt64BE=ke(function(i){i=i>>>0,Fe(i,"offset");let s=this[i],l=this[i+7];(s===void 0||l===void 0)&&Le(i,this.length-8);let E=(s<<24)+this[++i]*2**16+this[++i]*2**8+this[++i];return(BigInt(E)<<BigInt(32))+BigInt(this[++i]*2**24+this[++i]*2**16+this[++i]*2**8+l)}),a.prototype.readFloatLE=function(i,s){return i=i>>>0,s||U(i,4,this.length),r.read(this,i,!0,23,4)},a.prototype.readFloatBE=function(i,s){return i=i>>>0,s||U(i,4,this.length),r.read(this,i,!1,23,4)},a.prototype.readDoubleLE=function(i,s){return i=i>>>0,s||U(i,8,this.length),r.read(this,i,!0,52,8)},a.prototype.readDoubleBE=function(i,s){return i=i>>>0,s||U(i,8,this.length),r.read(this,i,!1,52,8)};function K(i,s,l,E,_,k){if(!a.isBuffer(i))throw new TypeError('"buffer" argument must be a Buffer instance');if(s>_||s<k)throw new RangeError('"value" argument is out of bounds');if(l+E>i.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(i,s,l,E){if(i=+i,s=s>>>0,l=l>>>0,!E){let R=Math.pow(2,8*l)-1;K(this,i,s,l,R,0)}let _=1,k=0;for(this[s]=i&255;++k<l&&(_*=256);)this[s+k]=i/_&255;return s+l},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(i,s,l,E){if(i=+i,s=s>>>0,l=l>>>0,!E){let R=Math.pow(2,8*l)-1;K(this,i,s,l,R,0)}let _=l-1,k=1;for(this[s+_]=i&255;--_>=0&&(k*=256);)this[s+_]=i/k&255;return s+l},a.prototype.writeUint8=a.prototype.writeUInt8=function(i,s,l){return i=+i,s=s>>>0,l||K(this,i,s,1,255,0),this[s]=i&255,s+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(i,s,l){return i=+i,s=s>>>0,l||K(this,i,s,2,65535,0),this[s]=i&255,this[s+1]=i>>>8,s+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(i,s,l){return i=+i,s=s>>>0,l||K(this,i,s,2,65535,0),this[s]=i>>>8,this[s+1]=i&255,s+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(i,s,l){return i=+i,s=s>>>0,l||K(this,i,s,4,4294967295,0),this[s+3]=i>>>24,this[s+2]=i>>>16,this[s+1]=i>>>8,this[s]=i&255,s+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(i,s,l){return i=+i,s=s>>>0,l||K(this,i,s,4,4294967295,0),this[s]=i>>>24,this[s+1]=i>>>16,this[s+2]=i>>>8,this[s+3]=i&255,s+4};function ne(i,s,l,E,_){Ke(s,E,_,i,l,7);let k=Number(s&BigInt(4294967295));i[l++]=k,k=k>>8,i[l++]=k,k=k>>8,i[l++]=k,k=k>>8,i[l++]=k;let R=Number(s>>BigInt(32)&BigInt(4294967295));return i[l++]=R,R=R>>8,i[l++]=R,R=R>>8,i[l++]=R,R=R>>8,i[l++]=R,l}function fe(i,s,l,E,_){Ke(s,E,_,i,l,7);let k=Number(s&BigInt(4294967295));i[l+7]=k,k=k>>8,i[l+6]=k,k=k>>8,i[l+5]=k,k=k>>8,i[l+4]=k;let R=Number(s>>BigInt(32)&BigInt(4294967295));return i[l+3]=R,R=R>>8,i[l+2]=R,R=R>>8,i[l+1]=R,R=R>>8,i[l]=R,l+8}a.prototype.writeBigUInt64LE=ke(function(i,s=0){return ne(this,i,s,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=ke(function(i,s=0){return fe(this,i,s,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(i,s,l,E){if(i=+i,s=s>>>0,!E){let Y=Math.pow(2,8*l-1);K(this,i,s,l,Y-1,-Y)}let _=0,k=1,R=0;for(this[s]=i&255;++_<l&&(k*=256);)i<0&&R===0&&this[s+_-1]!==0&&(R=1),this[s+_]=(i/k>>0)-R&255;return s+l},a.prototype.writeIntBE=function(i,s,l,E){if(i=+i,s=s>>>0,!E){let Y=Math.pow(2,8*l-1);K(this,i,s,l,Y-1,-Y)}let _=l-1,k=1,R=0;for(this[s+_]=i&255;--_>=0&&(k*=256);)i<0&&R===0&&this[s+_+1]!==0&&(R=1),this[s+_]=(i/k>>0)-R&255;return s+l},a.prototype.writeInt8=function(i,s,l){return i=+i,s=s>>>0,l||K(this,i,s,1,127,-128),i<0&&(i=255+i+1),this[s]=i&255,s+1},a.prototype.writeInt16LE=function(i,s,l){return i=+i,s=s>>>0,l||K(this,i,s,2,32767,-32768),this[s]=i&255,this[s+1]=i>>>8,s+2},a.prototype.writeInt16BE=function(i,s,l){return i=+i,s=s>>>0,l||K(this,i,s,2,32767,-32768),this[s]=i>>>8,this[s+1]=i&255,s+2},a.prototype.writeInt32LE=function(i,s,l){return i=+i,s=s>>>0,l||K(this,i,s,4,2147483647,-2147483648),this[s]=i&255,this[s+1]=i>>>8,this[s+2]=i>>>16,this[s+3]=i>>>24,s+4},a.prototype.writeInt32BE=function(i,s,l){return i=+i,s=s>>>0,l||K(this,i,s,4,2147483647,-2147483648),i<0&&(i=4294967295+i+1),this[s]=i>>>24,this[s+1]=i>>>16,this[s+2]=i>>>8,this[s+3]=i&255,s+4},a.prototype.writeBigInt64LE=ke(function(i,s=0){return ne(this,i,s,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=ke(function(i,s=0){return fe(this,i,s,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function de(i,s,l,E,_,k){if(l+E>i.length)throw new RangeError("Index out of range");if(l<0)throw new RangeError("Index out of range")}function Z(i,s,l,E,_){return s=+s,l=l>>>0,_||de(i,s,l,4),r.write(i,s,l,E,23,4),l+4}a.prototype.writeFloatLE=function(i,s,l){return Z(this,i,s,!0,l)},a.prototype.writeFloatBE=function(i,s,l){return Z(this,i,s,!1,l)};function ge(i,s,l,E,_){return s=+s,l=l>>>0,_||de(i,s,l,8),r.write(i,s,l,E,52,8),l+8}a.prototype.writeDoubleLE=function(i,s,l){return ge(this,i,s,!0,l)},a.prototype.writeDoubleBE=function(i,s,l){return ge(this,i,s,!1,l)},a.prototype.copy=function(i,s,l,E){if(!a.isBuffer(i))throw new TypeError("argument should be a Buffer");if(l||(l=0),!E&&E!==0&&(E=this.length),s>=i.length&&(s=i.length),s||(s=0),E>0&&E<l&&(E=l),E===l||i.length===0||this.length===0)return 0;if(s<0)throw new RangeError("targetStart out of bounds");if(l<0||l>=this.length)throw new RangeError("Index out of range");if(E<0)throw new RangeError("sourceEnd out of bounds");E>this.length&&(E=this.length),i.length-s<E-l&&(E=i.length-s+l);let _=E-l;return this===i&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(s,l,E):Uint8Array.prototype.set.call(i,this.subarray(l,E),s),_},a.prototype.fill=function(i,s,l,E){if(typeof i=="string"){if(typeof s=="string"?(E=s,s=0,l=this.length):typeof l=="string"&&(E=l,l=this.length),E!==void 0&&typeof E!="string")throw new TypeError("encoding must be a string");if(typeof E=="string"&&!a.isEncoding(E))throw new TypeError("Unknown encoding: "+E);if(i.length===1){let k=i.charCodeAt(0);(E==="utf8"&&k<128||E==="latin1")&&(i=k)}}else typeof i=="number"?i=i&255:typeof i=="boolean"&&(i=Number(i));if(s<0||this.length<s||this.length<l)throw new RangeError("Out of range index");if(l<=s)return this;s=s>>>0,l=l===void 0?this.length:l>>>0,i||(i=0);let _;if(typeof i=="number")for(_=s;_<l;++_)this[_]=i;else{let k=a.isBuffer(i)?i:a.from(i,E),R=k.length;if(R===0)throw new TypeError('The value "'+i+'" is invalid for argument "value"');for(_=0;_<l-s;++_)this[_+s]=k[_%R]}return this};var le={};function Ce(i,s,l){le[i]=class extends l{constructor(){super(),Object.defineProperty(this,"message",{value:s.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${i}]`,this.stack,delete this.name}get code(){return i}set code(E){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:E,writable:!0})}toString(){return`${this.name} [${i}]: ${this.message}`}}}Ce("ERR_BUFFER_OUT_OF_BOUNDS",function(i){return i?`${i} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Ce("ERR_INVALID_ARG_TYPE",function(i,s){return`The "${i}" argument must be of type number. Received type ${typeof s}`},TypeError),Ce("ERR_OUT_OF_RANGE",function(i,s,l){let E=`The value of "${i}" is out of range.`,_=l;return Number.isInteger(l)&&Math.abs(l)>2**32?_=qe(String(l)):typeof l=="bigint"&&(_=String(l),(l>BigInt(2)**BigInt(32)||l<-(BigInt(2)**BigInt(32)))&&(_=qe(_)),_+="n"),E+=` It must be ${s}. Received ${_}`,E},RangeError);function qe(i){let s="",l=i.length,E=i[0]==="-"?1:0;for(;l>=E+4;l-=3)s=`_${i.slice(l-3,l)}${s}`;return`${i.slice(0,l)}${s}`}function et(i,s,l){Fe(s,"offset"),(i[s]===void 0||i[s+l]===void 0)&&Le(s,i.length-(l+1))}function Ke(i,s,l,E,_,k){if(i>l||i<s){let R=typeof s=="bigint"?"n":"",Y;throw k>3?s===0||s===BigInt(0)?Y=`>= 0${R} and < 2${R} ** ${(k+1)*8}${R}`:Y=`>= -(2${R} ** ${(k+1)*8-1}${R}) and < 2 ** ${(k+1)*8-1}${R}`:Y=`>= ${s}${R} and <= ${l}${R}`,new le.ERR_OUT_OF_RANGE("value",Y,i)}et(E,_,k)}function Fe(i,s){if(typeof i!="number")throw new le.ERR_INVALID_ARG_TYPE(s,"number",i)}function Le(i,s,l){throw Math.floor(i)!==i?(Fe(i,l),new le.ERR_OUT_OF_RANGE(l||"offset","an integer",i)):s<0?new le.ERR_BUFFER_OUT_OF_BOUNDS:new le.ERR_OUT_OF_RANGE(l||"offset",`>= ${l?1:0} and <= ${s}`,i)}var st=/[^+/0-9A-Za-z-_]/g;function at(i){if(i=i.split("=")[0],i=i.trim().replace(st,""),i.length<2)return"";for(;i.length%4!==0;)i=i+"=";return i}function Ye(i,s){s=s||1/0;let l,E=i.length,_=null,k=[];for(let R=0;R<E;++R){if(l=i.charCodeAt(R),l>55295&&l<57344){if(!_){if(l>56319){(s-=3)>-1&&k.push(239,191,189);continue}else if(R+1===E){(s-=3)>-1&&k.push(239,191,189);continue}_=l;continue}if(l<56320){(s-=3)>-1&&k.push(239,191,189),_=l;continue}l=(_-55296<<10|l-56320)+65536}else _&&(s-=3)>-1&&k.push(239,191,189);if(_=null,l<128){if((s-=1)<0)break;k.push(l)}else if(l<2048){if((s-=2)<0)break;k.push(l>>6|192,l&63|128)}else if(l<65536){if((s-=3)<0)break;k.push(l>>12|224,l>>6&63|128,l&63|128)}else if(l<1114112){if((s-=4)<0)break;k.push(l>>18|240,l>>12&63|128,l>>6&63|128,l&63|128)}else throw new Error("Invalid code point")}return k}function ut(i){let s=[];for(let l=0;l<i.length;++l)s.push(i.charCodeAt(l)&255);return s}function lt(i,s){let l,E,_,k=[];for(let R=0;R<i.length&&!((s-=2)<0);++R)l=i.charCodeAt(R),E=l>>8,_=l%256,k.push(_),k.push(E);return k}function ot(i){return t.toByteArray(at(i))}function je(i,s,l,E){let _;for(_=0;_<E&&!(_+l>=s.length||_>=i.length);++_)s[_+l]=i[_];return _}function Ae(i,s){return i instanceof s||i!=null&&i.constructor!=null&&i.constructor.name!=null&&i.constructor.name===s.name}function Qe(i){return i!==i}var ft=function(){let i="0123456789abcdef",s=new Array(256);for(let l=0;l<16;++l){let E=l*16;for(let _=0;_<16;++_)s[E+_]=i[l]+i[_]}return s}();function ke(i){return typeof BigInt>"u"?bt:i}function bt(){throw new Error("BigInt not supported")}}),Pu=Ft((e,t)=>{me();var r=t.exports={},n,o;function u(){throw new Error("setTimeout has not been defined")}function c(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?n=setTimeout:n=u}catch{n=u}try{typeof clearTimeout=="function"?o=clearTimeout:o=c}catch{o=c}})();function a(A){if(n===setTimeout)return setTimeout(A,0);if((n===u||!n)&&setTimeout)return n=setTimeout,setTimeout(A,0);try{return n(A,0)}catch{try{return n.call(null,A,0)}catch{return n.call(this,A,0)}}}function h(A){if(o===clearTimeout)return clearTimeout(A);if((o===c||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(A);try{return o(A)}catch{try{return o.call(null,A)}catch{return o.call(this,A)}}}var d=[],m=!1,w,p=-1;function f(){!m||!w||(m=!1,w.length?d=w.concat(d):p=-1,d.length&&y())}function y(){if(!m){var A=a(f);m=!0;for(var T=d.length;T;){for(w=d,d=[];++p<T;)w&&w[p].run();p=-1,T=d.length}w=null,m=!1,h(A)}}r.nextTick=function(A){var T=new Array(arguments.length-1);if(arguments.length>1)for(var O=1;O<arguments.length;O++)T[O-1]=arguments[O];d.push(new b(A,T)),d.length===1&&!m&&a(y)};function b(A,T){this.fun=A,this.array=T}b.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={};function g(){}r.on=g,r.addListener=g,r.once=g,r.off=g,r.removeListener=g,r.removeAllListeners=g,r.emit=g,r.prependListener=g,r.prependOnceListener=g,r.listeners=function(A){return[]},r.binding=function(A){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(A){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}}),me=xp(()=>{Nu().Buffer,Pu(),globalThis&&globalThis.process&&globalThis.process.env&&(globalThis.process.env.LIBP2P_FORCE_PNET=!1)}),Po=Ft(e=>{me(),Object.defineProperty(e,"__esModule",{value:!0}),e.log=e.Log=e.LOGS=void 0;var t;(function(n){n[n.NO=0]="NO",n[n.YES=1]="YES",n[n.ARWEAVE=2]="ARWEAVE"})(t=e.LOGS||(e.LOGS={}));var r=class{constructor(){this.logs=t.ARWEAVE}init(n=t.ARWEAVE,o){return this.logs=n,this.arweave=o,this}show(n,o="log"){(this.logs===t.YES||this.logs===t.ARWEAVE&&this.arweave.getConfig().api.logging)&&console[o](n)}};e.Log=r,e.log=new r}),rp=Ft(e=>{me(),Object.defineProperty(e,"__esModule",{value:!0});var t=Po(),r=class{constructor(n){this._id=n.id,this._timestamp=n.timestamp,this._height=n.height,this._previous=n.previous}get id(){return this._id||t.log.show("ID wasn't defined, make sure you have selected to return it."),this._id}get timestamp(){return this._timestamp||t.log.show("Timestamp wasn't defined, make sure you have selected to return it."),this._timestamp}get height(){return this._height||t.log.show("Height wasn't defined, make sure you have selected to return it."),this._height}get previous(){return this._previous||t.log.show("Previous wasn't defined, make sure you have selected to return it."),this._previous}};e.default=r}),np=Ft(e=>{me(),Object.defineProperty(e,"__esModule",{value:!0});var t=Po(),r=class{constructor(n,o){this._id=n.id,this._anchor=n.anchor,this._signature=n.signature,this._recipient=n.recipient,this._owner=n.owner,this._fee=n.fee,this._quantity=n.quantity,this._data=n.data,this._tags=n.tags,this._block=n.block,n.parent&&n.parent.id&&(this._parent=n.parent),this.arweave=o}get id(){return this._id||t.log.show("ID wasn't defined, make sure you have selected to return it."),this._id}get anchor(){return this._anchor||t.log.show("Anchor wasn't defined, make sure you have selected to return it."),this._anchor}get signature(){return this._signature||t.log.show("Signature wasn't defined, make sure you have selected to return it."),this._signature}get recipient(){return this._recipient||t.log.show("Recipient wasn't defined, make sure you have selected to return it."),this._recipient}get owner(){return this._owner||t.log.show("Owner wasn't defined, make sure you have selected to return it."),this._owner}get fee(){return this._fee||t.log.show("Fee wasn't defined, make sure you have selected to return it."),this._fee}get quantity(){return this._quantity||t.log.show("Quantity wasn't defined, make sure you have selected to return it."),this._quantity}get data(){return this._data||t.log.show("Data wasn't defined, make sure you have selected to return it."),this._data}get tags(){return this._tags||t.log.show("Tags wasn't defined, make sure you have selected to return it."),this._tags}get block(){return this._block||t.log.show("Block wasn't defined, make sure you have selected to return it."),this._block}get parent(){return(!this._parent||!this._parent.id)&&t.log.show("Parent wasn't defined, make sure you have selected to return it."),this._parent}};e.default=r}),op=Ft(e=>{me();var t=e&&e.__awaiter||function(a,h,d,m){function w(p){return p instanceof d?p:new d(function(f){f(p)})}return new(d||(d=Promise))(function(p,f){function y(A){try{g(m.next(A))}catch(T){f(T)}}function b(A){try{g(m.throw(A))}catch(T){f(T)}}function g(A){A.done?p(A.value):w(A.value).then(y,b)}g((m=m.apply(a,h||[])).next())})},r=e&&e.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(e,"__esModule",{value:!0});var n=r(rp()),o=r(np()),u=Po(),c=class{constructor(a,h=u.LOGS.ARWEAVE){this.reqType="transactions",this.options={},this.after="",this.afterRegex=/after: *"([^"]*)"/gi,this.emptyLinesRegex=/^\s*[\r\n]/gm,this.fields=["id","anchor","signature","recipient","owner","owner.address","owner.key","fee","fee.winston","fee.ar","quantity","quantity.winston","quantity.ar","data","data.size","data.type","tags","tags.name","tags.value","block","block.id","block.timestamp","block.height","block.previous","parent","parent.id"],this.includes=new Set,this.arweave=a,u.log.init(h,a),this.includes=new Set(this.fields)}getCursor(){return this.after}search(a="transactions"){return this.reqType=a,this.options={},this.after="",this}id(a){return this.checkSearchType(),this.options.id=a,this.options.ids=[a],this}ids(a){return this.checkSearchType(),this.options.ids=a,this.options.id=a[0],this}appName(a){return this.checkSearchType(),this.tag("App-Name",[a]),this}type(a){return this.checkSearchType(),this.tag("Content-Type",[a]),this}tags(a){this.checkSearchType();let h=[];for(let m of a){let w=typeof m.values=="string"?[m.values]:m.values;h.push({name:m.name,values:w})}let d=this.options.tags&&this.options.tags.length?this.options.tags:[];return this.options.tags=[...h,...d],this}tag(a,h){return this.checkSearchType(),this.options.tags||(this.options.tags=[]),typeof h=="string"&&(h=[h]),this.options.tags.push({name:a,values:h}),this}from(a){return this.checkSearchType(),typeof a=="string"&&(a=[a]),this.options.owners=a,this}to(a){return this.checkSearchType(),typeof a=="string"&&(a=[a]),this.options.recipients=a,this}min(a){return this.checkSearchType(),this.options.block||(this.options.block={}),this.options.block.min=a,this}max(a){return this.checkSearchType(),this.options.block||(this.options.block={}),this.options.block.max=a,this}limit(a){return this.checkSearchType(),a<1?(console.warn("Limit cannot be less than 1, setting it to 1."),a=1):a>100&&console.warn("Arweave GQL won't return more than 100 entries at once."),this.options.first=a,this}sort(a){return this.options.sort=a,this}cursor(a){return this.checkSearchType(),this.options.after=a,this}only(a){if(this.includes=new Set,typeof a=="string"&&this.fields.indexOf(a)!==-1)return this.includes.add(a),this.validateIncludes(),this;let h=[];for(let d of a)this.fields.indexOf(d)!==-1&&h.push(d);return h.length&&(this.includes=new Set(h)),this.validateIncludes(),this}exclude(a){if(this.includes=new Set(this.fields),typeof a=="string")return this.includes.delete(a),this.validateIncludes(),this;for(let h of a)this.includes.delete(h);return this.validateIncludes(),this}find(a={}){return t(this,void 0,void 0,function*(){this.checkSearchType();for(let d of Object.keys(a))this.options[d]=a[d];this.options.first||(this.options.first=10);let h=this.construct();return this.run(h)})}findOne(a={}){return t(this,void 0,void 0,function*(){this.checkSearchType();for(let m of Object.keys(a))this.options[m]=a[m];this.options.first=1;let h=this.construct(),d=yield this.run(h);return d.length?d[0]:null})}findAll(a={}){return t(this,void 0,void 0,function*(){this.checkSearchType();for(let d of Object.keys(a))this.options[d]=a[d];this.options.first=100;let h=this.construct();return this.runAll(h)})}next(){return t(this,void 0,void 0,function*(){if(!this.after||!this.after.length){u.log.show("next(): Nothing more to search.");return}let a=this.construct().replace(this.afterRegex,`after: "${this.after}"`),h=yield this.run(a);return this.options.first===1?h.length?h[0]:null:h})}run(a){return t(this,void 0,void 0,function*(){u.log.show("Running query:"),u.log.show(a);let h=yield this.get(a);if(!h)return[];if(h.transaction)return[new o.default(h.transaction,this.arweave)];if(h.block)return[new n.default(h.block)];if(h.transactions){let d=h.transactions.edges;return d&&d.length?this.after=d[d.length-1].cursor:this.after="",d.map(m=>new o.default(m.node,this.arweave))}else if(h.blocks){let d=h.blocks.edges;return d&&d.length?this.after=d[d.length-1].cursor:this.after="",d.map(m=>new n.default(m.node))}})}runAll(a){return t(this,void 0,void 0,function*(){let h=!0,d=[],m=this.options.after||"",w=!0;for(;h;){u.log.show("Running query:"),u.log.show(a);let p=yield this.get(a);if(!p)return[];if(p.transaction)return[new o.default(p.transaction,this.arweave)];if(p.block)return[new n.default(p.block)];if(p.transactions){let f=p.transactions;f.edges&&f.edges.length&&(d=d.concat(f.edges),m=f.edges[f.edges.length-1].cursor,a=a.replace(this.afterRegex,`after: "${m}"`)),h=f.pageInfo.hasNextPage}else if(p.blocks){w=!1;let f=p.blocks;f.edges&&f.edges.length&&(d=d.concat(f.edges),m=f.edges[f.edges.length-1].cursor,a=a.replace(this.afterRegex,`after: "${m}"`)),h=f.pageInfo.hasNextPage}}return w?d.map(p=>new o.default(p.node,this.arweave)):d.map(p=>new n.default(p.node))})}checkSearchType(){if(!this.reqType||this.reqType!=="transaction"&&this.reqType!=="block"&&this.reqType!=="transactions"&&this.reqType!=="blocks")throw new Error('Invalid search type. Must provide one and it must be either "transaction", "transactions", "block" or "blocks"')}get(a){return t(this,void 0,void 0,function*(){let h=yield this.arweave.api.post("graphql",{query:a},{headers:{"content-type":"application/json"}});return u.log.show("Returned result: "),u.log.show(h.data.data),h.data.data})}construct(){this.reqType==="transactions"||this.reqType==="blocks"?(delete this.options.id,this.reqType==="transactions"?delete this.options.height:(delete this.options.owners,delete this.options.recipients,delete this.options.tags,delete this.options.block),this.options.after||(this.options.after="")):this.options={id:this.options.id};let a=JSON.stringify(this.options,null,2).replace(/"([^"]+)":/gm,"$1: ").replace('"HEIGHT_DESC"',"HEIGHT_DESC").replace('"HEIGHT_ASC"',"HEIGHT_ASC");a=a.substring(1,a.length-1);let h="";if(this.reqType==="transaction"||this.reqType==="transactions"){let d="";this.includes.has("owner")&&(d=`owner {
          ${this.includes.has("owner.address")?"address":""}
          ${this.includes.has("owner.key")?"key":""}
        }`);let m="";this.includes.has("fee")&&(m=`fee {
          ${this.includes.has("fee.winston")?"winston":""}
          ${this.includes.has("fee.ar")?"ar":""}
        }`);let w="";this.includes.has("quantity")&&(w=`quantity {
          ${this.includes.has("quantity.winston")?"winston":""}
          ${this.includes.has("quantity.ar")?"ar":""}
        }`);let p="";this.includes.has("data")&&(p=`data {
          ${this.includes.has("data.size")?"size":""}
          ${this.includes.has("data.type")?"type":""}
        }`);let f="";this.includes.has("tags")&&(f=`tags {
          ${this.includes.has("tags.name")?"name":""}
          ${this.includes.has("tags.value")?"value":""}
        }`);let y="";this.includes.has("block")&&(y=`block {
          ${this.includes.has("block.id")?"id":""}
          ${this.includes.has("block.timestamp")?"timestamp":""}
          ${this.includes.has("block.height")?"height":""}
          ${this.includes.has("block.previous")?"previous":""}
        }`);let b="";(this.includes.has("parent")||this.includes.has("parent.id"))&&(b=`parent {
          id
        }`),h=`
      ${this.includes.has("id")?"id":""}
      ${this.includes.has("anchor")?"anchor":""}
      ${this.includes.has("signature")?"signature":""}
      ${this.includes.has("recipient")?"recipient":""}
      ${d}
      ${m}
      ${w}
      ${p}
      ${f}
      ${y}
      ${b}
      `,h=h.replace(this.emptyLinesRegex,"").trim(),h.length||(h=`
        id
        anchor
        signature
        recipient
        owner {
          address
          key
        }
        fee {
          winston
          ar
        }
        quantity {
          winston
          ar
        }
        data {
          size
          type
        }
        tags {
          name
          value
        }
        block {
          id
          timestamp
          height
          previous
        }
        parent {
          id
        }`)}else h=`
      ${this.includes.has("block.id")?"id":""}
      ${this.includes.has("block.timestamp")?"timestamp":""}
      ${this.includes.has("block.height")?"height":""}
      ${this.includes.has("block.previous")?"previous":""}
      `,h=h.replace(this.emptyLinesRegex,"").trim(),h.length||(h=`
        id
        timestamp
        height
        previous`);if((this.reqType==="transactions"||this.reqType==="blocks")&&(h=`
      pageInfo {
        hasNextPage
      }
      edges { 
        cursor
        node { 
          ${h}
        } 
      }`),!this.reqType||!a)throw new Error("Invalid options. You need to first set your options!");return`query {
      ${this.reqType}(
        ${a}
      ){
        ${h}
      }
    }`.replace(/(\r\n|\n|\r)/gm,"")}validateIncludes(){this.includes.has("owner")&&!this.includes.has("owner.address")&&!this.includes.has("owner.key")&&(this.includes.add("owner.address"),this.includes.add("owner.key")),this.includes.has("fee")&&!this.includes.has("fee.winston")&&!this.includes.has("fee.ar")&&(this.includes.add("fee.winston"),this.includes.add("fee.ar")),this.includes.has("quantity")&&!this.includes.has("quantity.winston")&&!this.includes.has("quantity.ar")&&(this.includes.add("quantity.winston"),this.includes.add("quantity.ar")),this.includes.has("data")&&!this.includes.has("data.size")&&!this.includes.has("data.type")&&(this.includes.add("data.size"),this.includes.add("data.type")),this.includes.has("tags")&&!this.includes.has("tags.name")&&!this.includes.has("tags.value")&&(this.includes.add("tags.name"),this.includes.add("tags.value")),this.includes.has("block")&&!this.includes.has("block.timestamp")&&!this.includes.has("block.height")&&!this.includes.has("block.previous")&&(this.includes.add("block.id"),this.includes.add("block.timestamp"),this.includes.add("block.height"),this.includes.add("block.previous")),!this.includes.has("owner")&&(this.includes.has("owner.address")||this.includes.has("owner.key"))&&this.includes.add("owner"),!this.includes.has("fee")&&(this.includes.has("fee.winston")||this.includes.has("fee.ar"))&&this.includes.add("fee"),!this.includes.has("quantity")&&(this.includes.has("quantity.winston")||this.includes.has("quantity.ar"))&&this.includes.add("quantity"),!this.includes.has("data")&&(this.includes.has("data.size")||this.includes.has("data.type"))&&this.includes.add("data"),!this.includes.has("tags")&&(this.includes.has("tags.name")||this.includes.has("tags.value"))&&this.includes.add("tags"),!this.includes.has("block")&&(this.includes.has("block.timestamp")||this.includes.has("block.height")||this.includes.has("block.previous"))&&this.includes.add("block")}};e.default=c}),up=Ft(e=>{me();var t=e&&e.__extends||function(){var w=function(p,f){return w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,b){y.__proto__=b}||function(y,b){for(var g in b)b.hasOwnProperty(g)&&(y[g]=b[g])},w(p,f)};return function(p,f){w(p,f);function y(){this.constructor=p}p.prototype=f===null?Object.create(f):(y.prototype=f.prototype,new y)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=256,n=function(){function w(p){p===void 0&&(p="="),this._paddingCharacter=p}return w.prototype.encodedLength=function(p){return this._paddingCharacter?(p+2)/3*4|0:(p*8+5)/6|0},w.prototype.encode=function(p){for(var f="",y=0;y<p.length-2;y+=3){var b=p[y]<<16|p[y+1]<<8|p[y+2];f+=this._encodeByte(b>>>3*6&63),f+=this._encodeByte(b>>>2*6&63),f+=this._encodeByte(b>>>1*6&63),f+=this._encodeByte(b>>>0*6&63)}var g=p.length-y;if(g>0){var b=p[y]<<16|(g===2?p[y+1]<<8:0);f+=this._encodeByte(b>>>3*6&63),f+=this._encodeByte(b>>>2*6&63),g===2?f+=this._encodeByte(b>>>1*6&63):f+=this._paddingCharacter||"",f+=this._paddingCharacter||""}return f},w.prototype.maxDecodedLength=function(p){return this._paddingCharacter?p/4*3|0:(p*6+7)/8|0},w.prototype.decodedLength=function(p){return this.maxDecodedLength(p.length-this._getPaddingLength(p))},w.prototype.decode=function(p){if(p.length===0)return new Uint8Array(0);for(var f=this._getPaddingLength(p),y=p.length-f,b=new Uint8Array(this.maxDecodedLength(y)),g=0,A=0,T=0,O=0,C=0,j=0,B=0;A<y-4;A+=4)O=this._decodeChar(p.charCodeAt(A+0)),C=this._decodeChar(p.charCodeAt(A+1)),j=this._decodeChar(p.charCodeAt(A+2)),B=this._decodeChar(p.charCodeAt(A+3)),b[g++]=O<<2|C>>>4,b[g++]=C<<4|j>>>2,b[g++]=j<<6|B,T|=O&r,T|=C&r,T|=j&r,T|=B&r;if(A<y-1&&(O=this._decodeChar(p.charCodeAt(A)),C=this._decodeChar(p.charCodeAt(A+1)),b[g++]=O<<2|C>>>4,T|=O&r,T|=C&r),A<y-2&&(j=this._decodeChar(p.charCodeAt(A+2)),b[g++]=C<<4|j>>>2,T|=j&r),A<y-3&&(B=this._decodeChar(p.charCodeAt(A+3)),b[g++]=j<<6|B,T|=B&r),T!==0)throw new Error("Base64Coder: incorrect characters for decoding");return b},w.prototype._encodeByte=function(p){var f=p;return f+=65,f+=25-p>>>8&0-65-26+97,f+=51-p>>>8&26-97-52+48,f+=61-p>>>8&52-48-62+43,f+=62-p>>>8&62-43-63+47,String.fromCharCode(f)},w.prototype._decodeChar=function(p){var f=r;return f+=(42-p&p-44)>>>8&-r+p-43+62,f+=(46-p&p-48)>>>8&-r+p-47+63,f+=(47-p&p-58)>>>8&-r+p-48+52,f+=(64-p&p-91)>>>8&-r+p-65+0,f+=(96-p&p-123)>>>8&-r+p-97+26,f},w.prototype._getPaddingLength=function(p){var f=0;if(this._paddingCharacter){for(var y=p.length-1;y>=0&&p[y]===this._paddingCharacter;y--)f++;if(p.length<4||f>2)throw new Error("Base64Coder: incorrect padding")}return f},w}();e.Coder=n;var o=new n;function u(w){return o.encode(w)}e.encode=u;function c(w){return o.decode(w)}e.decode=c;var a=function(w){t(p,w);function p(){return w!==null&&w.apply(this,arguments)||this}return p.prototype._encodeByte=function(f){var y=f;return y+=65,y+=25-f>>>8&0-65-26+97,y+=51-f>>>8&26-97-52+48,y+=61-f>>>8&52-48-62+45,y+=62-f>>>8&62-45-63+95,String.fromCharCode(y)},p.prototype._decodeChar=function(f){var y=r;return y+=(44-f&f-46)>>>8&-r+f-45+62,y+=(94-f&f-96)>>>8&-r+f-95+63,y+=(47-f&f-58)>>>8&-r+f-48+52,y+=(64-f&f-91)>>>8&-r+f-65+0,y+=(96-f&f-123)>>>8&-r+f-97+26,y},p}(n);e.URLSafeCoder=a;var h=new a;function d(w){return h.encode(w)}e.encodeURLSafe=d;function m(w){return h.decode(w)}e.decodeURLSafe=m,e.encodedLength=function(w){return o.encodedLength(w)},e.maxDecodedLength=function(w){return o.maxDecodedLength(w)},e.decodedLength=function(w){return o.decodedLength(w)}});me();me();var iy=Object.create,ho=Object.defineProperty,oy=Object.getOwnPropertyDescriptor,sy=Object.getOwnPropertyNames,ay=Object.getPrototypeOf,uy=Object.prototype.hasOwnProperty,se=(e,t)=>()=>(e&&(t=e(e=0)),t),P=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),pe=(e,t)=>{for(var r in t)ho(e,r,{get:t[r],enumerable:!0})},eh=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of sy(t))!uy.call(e,o)&&o!==r&&ho(e,o,{get:()=>t[o],enumerable:!(n=oy(t,o))||n.enumerable});return e},z=(e,t,r)=>(r=e!=null?iy(ay(e)):{},eh(t||!e||!e.__esModule?ho(r,"default",{value:e,enumerable:!0}):r,e)),Ze=e=>eh(ho({},"__esModule",{value:!0}),e),ly=P(e=>{v(),e.byteLength=h,e.toByteArray=m,e.fromByteArray=f;var t=[],r=[],n=typeof Uint8Array<"u"?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(u=0,c=o.length;u<c;++u)t[u]=o[u],r[o.charCodeAt(u)]=u;var u,c;r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63;function a(y){var b=y.length;if(b%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var g=y.indexOf("=");g===-1&&(g=b);var A=g===b?0:4-g%4;return[g,A]}function h(y){var b=a(y),g=b[0],A=b[1];return(g+A)*3/4-A}function d(y,b,g){return(b+g)*3/4-g}function m(y){var b,g=a(y),A=g[0],T=g[1],O=new n(d(y,A,T)),C=0,j=T>0?A-4:A,B;for(B=0;B<j;B+=4)b=r[y.charCodeAt(B)]<<18|r[y.charCodeAt(B+1)]<<12|r[y.charCodeAt(B+2)]<<6|r[y.charCodeAt(B+3)],O[C++]=b>>16&255,O[C++]=b>>8&255,O[C++]=b&255;return T===2&&(b=r[y.charCodeAt(B)]<<2|r[y.charCodeAt(B+1)]>>4,O[C++]=b&255),T===1&&(b=r[y.charCodeAt(B)]<<10|r[y.charCodeAt(B+1)]<<4|r[y.charCodeAt(B+2)]>>2,O[C++]=b>>8&255,O[C++]=b&255),O}function w(y){return t[y>>18&63]+t[y>>12&63]+t[y>>6&63]+t[y&63]}function p(y,b,g){for(var A,T=[],O=b;O<g;O+=3)A=(y[O]<<16&16711680)+(y[O+1]<<8&65280)+(y[O+2]&255),T.push(w(A));return T.join("")}function f(y){for(var b,g=y.length,A=g%3,T=[],O=16383,C=0,j=g-A;C<j;C+=O)T.push(p(y,C,C+O>j?j:C+O));return A===1?(b=y[g-1],T.push(t[b>>2]+t[b<<4&63]+"==")):A===2&&(b=(y[g-2]<<8)+y[g-1],T.push(t[b>>10]+t[b>>4&63]+t[b<<2&63]+"=")),T.join("")}}),cy=P(e=>{v(),e.read=function(t,r,n,o,u){var c,a,h=u*8-o-1,d=(1<<h)-1,m=d>>1,w=-7,p=n?u-1:0,f=n?-1:1,y=t[r+p];for(p+=f,c=y&(1<<-w)-1,y>>=-w,w+=h;w>0;c=c*256+t[r+p],p+=f,w-=8);for(a=c&(1<<-w)-1,c>>=-w,w+=o;w>0;a=a*256+t[r+p],p+=f,w-=8);if(c===0)c=1-m;else{if(c===d)return a?NaN:(y?-1:1)*(1/0);a=a+Math.pow(2,o),c=c-m}return(y?-1:1)*a*Math.pow(2,c-o)},e.write=function(t,r,n,o,u,c){var a,h,d,m=c*8-u-1,w=(1<<m)-1,p=w>>1,f=u===23?Math.pow(2,-24)-Math.pow(2,-77):0,y=o?0:c-1,b=o?1:-1,g=r<0||r===0&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(h=isNaN(r)?1:0,a=w):(a=Math.floor(Math.log(r)/Math.LN2),r*(d=Math.pow(2,-a))<1&&(a--,d*=2),a+p>=1?r+=f/d:r+=f*Math.pow(2,1-p),r*d>=2&&(a++,d/=2),a+p>=w?(h=0,a=w):a+p>=1?(h=(r*d-1)*Math.pow(2,u),a=a+p):(h=r*Math.pow(2,p-1)*Math.pow(2,u),a=0));u>=8;t[n+y]=h&255,y+=b,h/=256,u-=8);for(a=a<<u|h,m+=u;m>0;t[n+y]=a&255,y+=b,a/=256,m-=8);t[n+y-b]|=g*128}}),fo=P(e=>{v();var t=ly(),r=cy(),n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=a,e.SlowBuffer=T,e.INSPECT_MAX_BYTES=50;var o=2147483647;e.kMaxLength=o,a.TYPED_ARRAY_SUPPORT=u(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function u(){try{let i=new Uint8Array(1),s={foo:function(){return 42}};return Object.setPrototypeOf(s,Uint8Array.prototype),Object.setPrototypeOf(i,s),i.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function c(i){if(i>o)throw new RangeError('The value "'+i+'" is invalid for option "size"');let s=new Uint8Array(i);return Object.setPrototypeOf(s,a.prototype),s}function a(i,s,l){if(typeof i=="number"){if(typeof s=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return w(i)}return h(i,s,l)}a.poolSize=8192;function h(i,s,l){if(typeof i=="string")return p(i,s);if(ArrayBuffer.isView(i))return y(i);if(i==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof i);if(Ae(i,ArrayBuffer)||i&&Ae(i.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Ae(i,SharedArrayBuffer)||i&&Ae(i.buffer,SharedArrayBuffer)))return b(i,s,l);if(typeof i=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let E=i.valueOf&&i.valueOf();if(E!=null&&E!==i)return a.from(E,s,l);let _=g(i);if(_)return _;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof i[Symbol.toPrimitive]=="function")return a.from(i[Symbol.toPrimitive]("string"),s,l);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof i)}a.from=function(i,s,l){return h(i,s,l)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function d(i){if(typeof i!="number")throw new TypeError('"size" argument must be of type number');if(i<0)throw new RangeError('The value "'+i+'" is invalid for option "size"')}function m(i,s,l){return d(i),i<=0?c(i):s!==void 0?typeof l=="string"?c(i).fill(s,l):c(i).fill(s):c(i)}a.alloc=function(i,s,l){return m(i,s,l)};function w(i){return d(i),c(i<0?0:A(i)|0)}a.allocUnsafe=function(i){return w(i)},a.allocUnsafeSlow=function(i){return w(i)};function p(i,s){if((typeof s!="string"||s==="")&&(s="utf8"),!a.isEncoding(s))throw new TypeError("Unknown encoding: "+s);let l=O(i,s)|0,E=c(l),_=E.write(i,s);return _!==l&&(E=E.slice(0,_)),E}function f(i){let s=i.length<0?0:A(i.length)|0,l=c(s);for(let E=0;E<s;E+=1)l[E]=i[E]&255;return l}function y(i){if(Ae(i,Uint8Array)){let s=new Uint8Array(i);return b(s.buffer,s.byteOffset,s.byteLength)}return f(i)}function b(i,s,l){if(s<0||i.byteLength<s)throw new RangeError('"offset" is outside of buffer bounds');if(i.byteLength<s+(l||0))throw new RangeError('"length" is outside of buffer bounds');let E;return s===void 0&&l===void 0?E=new Uint8Array(i):l===void 0?E=new Uint8Array(i,s):E=new Uint8Array(i,s,l),Object.setPrototypeOf(E,a.prototype),E}function g(i){if(a.isBuffer(i)){let s=A(i.length)|0,l=c(s);return l.length===0||i.copy(l,0,0,s),l}if(i.length!==void 0)return typeof i.length!="number"||Qe(i.length)?c(0):f(i);if(i.type==="Buffer"&&Array.isArray(i.data))return f(i.data)}function A(i){if(i>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return i|0}function T(i){return+i!=i&&(i=0),a.alloc(+i)}a.isBuffer=function(i){return i!=null&&i._isBuffer===!0&&i!==a.prototype},a.compare=function(i,s){if(Ae(i,Uint8Array)&&(i=a.from(i,i.offset,i.byteLength)),Ae(s,Uint8Array)&&(s=a.from(s,s.offset,s.byteLength)),!a.isBuffer(i)||!a.isBuffer(s))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(i===s)return 0;let l=i.length,E=s.length;for(let _=0,k=Math.min(l,E);_<k;++_)if(i[_]!==s[_]){l=i[_],E=s[_];break}return l<E?-1:E<l?1:0},a.isEncoding=function(i){switch(String(i).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(i,s){if(!Array.isArray(i))throw new TypeError('"list" argument must be an Array of Buffers');if(i.length===0)return a.alloc(0);let l;if(s===void 0)for(s=0,l=0;l<i.length;++l)s+=i[l].length;let E=a.allocUnsafe(s),_=0;for(l=0;l<i.length;++l){let k=i[l];if(Ae(k,Uint8Array))_+k.length>E.length?(a.isBuffer(k)||(k=a.from(k)),k.copy(E,_)):Uint8Array.prototype.set.call(E,k,_);else if(a.isBuffer(k))k.copy(E,_);else throw new TypeError('"list" argument must be an Array of Buffers');_+=k.length}return E};function O(i,s){if(a.isBuffer(i))return i.length;if(ArrayBuffer.isView(i)||Ae(i,ArrayBuffer))return i.byteLength;if(typeof i!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof i);let l=i.length,E=arguments.length>2&&arguments[2]===!0;if(!E&&l===0)return 0;let _=!1;for(;;)switch(s){case"ascii":case"latin1":case"binary":return l;case"utf8":case"utf-8":return Ye(i).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return l*2;case"hex":return l>>>1;case"base64":return ot(i).length;default:if(_)return E?-1:Ye(i).length;s=(""+s).toLowerCase(),_=!0}}a.byteLength=O;function C(i,s,l){let E=!1;if((s===void 0||s<0)&&(s=0),s>this.length||((l===void 0||l>this.length)&&(l=this.length),l<=0)||(l>>>=0,s>>>=0,l<=s))return"";for(i||(i="utf8");;)switch(i){case"hex":return N(this,s,l);case"utf8":case"utf-8":return xe(this,s,l);case"ascii":return M(this,s,l);case"latin1":case"binary":return x(this,s,l);case"base64":return he(this,s,l);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return L(this,s,l);default:if(E)throw new TypeError("Unknown encoding: "+i);i=(i+"").toLowerCase(),E=!0}}a.prototype._isBuffer=!0;function j(i,s,l){let E=i[s];i[s]=i[l],i[l]=E}a.prototype.swap16=function(){let i=this.length;if(i%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let s=0;s<i;s+=2)j(this,s,s+1);return this},a.prototype.swap32=function(){let i=this.length;if(i%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let s=0;s<i;s+=4)j(this,s,s+3),j(this,s+1,s+2);return this},a.prototype.swap64=function(){let i=this.length;if(i%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let s=0;s<i;s+=8)j(this,s,s+7),j(this,s+1,s+6),j(this,s+2,s+5),j(this,s+3,s+4);return this},a.prototype.toString=function(){let i=this.length;return i===0?"":arguments.length===0?xe(this,0,i):C.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(i){if(!a.isBuffer(i))throw new TypeError("Argument must be a Buffer");return this===i?!0:a.compare(this,i)===0},a.prototype.inspect=function(){let i="",s=e.INSPECT_MAX_BYTES;return i=this.toString("hex",0,s).replace(/(.{2})/g,"$1 ").trim(),this.length>s&&(i+=" ... "),"<Buffer "+i+">"},n&&(a.prototype[n]=a.prototype.inspect),a.prototype.compare=function(i,s,l,E,_){if(Ae(i,Uint8Array)&&(i=a.from(i,i.offset,i.byteLength)),!a.isBuffer(i))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof i);if(s===void 0&&(s=0),l===void 0&&(l=i?i.length:0),E===void 0&&(E=0),_===void 0&&(_=this.length),s<0||l>i.length||E<0||_>this.length)throw new RangeError("out of range index");if(E>=_&&s>=l)return 0;if(E>=_)return-1;if(s>=l)return 1;if(s>>>=0,l>>>=0,E>>>=0,_>>>=0,this===i)return 0;let k=_-E,R=l-s,Y=Math.min(k,R),ae=this.slice(E,_),X=i.slice(s,l);for(let Q=0;Q<Y;++Q)if(ae[Q]!==X[Q]){k=ae[Q],R=X[Q];break}return k<R?-1:R<k?1:0};function B(i,s,l,E,_){if(i.length===0)return-1;if(typeof l=="string"?(E=l,l=0):l>2147483647?l=2147483647:l<-2147483648&&(l=-2147483648),l=+l,Qe(l)&&(l=_?0:i.length-1),l<0&&(l=i.length+l),l>=i.length){if(_)return-1;l=i.length-1}else if(l<0)if(_)l=0;else return-1;if(typeof s=="string"&&(s=a.from(s,E)),a.isBuffer(s))return s.length===0?-1:I(i,s,l,E,_);if(typeof s=="number")return s=s&255,typeof Uint8Array.prototype.indexOf=="function"?_?Uint8Array.prototype.indexOf.call(i,s,l):Uint8Array.prototype.lastIndexOf.call(i,s,l):I(i,[s],l,E,_);throw new TypeError("val must be string, number or Buffer")}function I(i,s,l,E,_){let k=1,R=i.length,Y=s.length;if(E!==void 0&&(E=String(E).toLowerCase(),E==="ucs2"||E==="ucs-2"||E==="utf16le"||E==="utf-16le")){if(i.length<2||s.length<2)return-1;k=2,R/=2,Y/=2,l/=2}function ae(Q,ee){return k===1?Q[ee]:Q.readUInt16BE(ee*k)}let X;if(_){let Q=-1;for(X=l;X<R;X++)if(ae(i,X)===ae(s,Q===-1?0:X-Q)){if(Q===-1&&(Q=X),X-Q+1===Y)return Q*k}else Q!==-1&&(X-=X-Q),Q=-1}else for(l+Y>R&&(l=R-Y),X=l;X>=0;X--){let Q=!0;for(let ee=0;ee<Y;ee++)if(ae(i,X+ee)!==ae(s,ee)){Q=!1;break}if(Q)return X}return-1}a.prototype.includes=function(i,s,l){return this.indexOf(i,s,l)!==-1},a.prototype.indexOf=function(i,s,l){return B(this,i,s,l,!0)},a.prototype.lastIndexOf=function(i,s,l){return B(this,i,s,l,!1)};function S(i,s,l,E){l=Number(l)||0;let _=i.length-l;E?(E=Number(E),E>_&&(E=_)):E=_;let k=s.length;E>k/2&&(E=k/2);let R;for(R=0;R<E;++R){let Y=parseInt(s.substr(R*2,2),16);if(Qe(Y))return R;i[l+R]=Y}return R}function F(i,s,l,E){return je(Ye(s,i.length-l),i,l,E)}function D(i,s,l,E){return je(ut(s),i,l,E)}function q(i,s,l,E){return je(ot(s),i,l,E)}function J(i,s,l,E){return je(lt(s,i.length-l),i,l,E)}a.prototype.write=function(i,s,l,E){if(s===void 0)E="utf8",l=this.length,s=0;else if(l===void 0&&typeof s=="string")E=s,l=this.length,s=0;else if(isFinite(s))s=s>>>0,isFinite(l)?(l=l>>>0,E===void 0&&(E="utf8")):(E=l,l=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let _=this.length-s;if((l===void 0||l>_)&&(l=_),i.length>0&&(l<0||s<0)||s>this.length)throw new RangeError("Attempt to write outside buffer bounds");E||(E="utf8");let k=!1;for(;;)switch(E){case"hex":return S(this,i,s,l);case"utf8":case"utf-8":return F(this,i,s,l);case"ascii":case"latin1":case"binary":return D(this,i,s,l);case"base64":return q(this,i,s,l);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return J(this,i,s,l);default:if(k)throw new TypeError("Unknown encoding: "+E);E=(""+E).toLowerCase(),k=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function he(i,s,l){return s===0&&l===i.length?t.fromByteArray(i):t.fromByteArray(i.slice(s,l))}function xe(i,s,l){l=Math.min(i.length,l);let E=[],_=s;for(;_<l;){let k=i[_],R=null,Y=k>239?4:k>223?3:k>191?2:1;if(_+Y<=l){let ae,X,Q,ee;switch(Y){case 1:k<128&&(R=k);break;case 2:ae=i[_+1],(ae&192)===128&&(ee=(k&31)<<6|ae&63,ee>127&&(R=ee));break;case 3:ae=i[_+1],X=i[_+2],(ae&192)===128&&(X&192)===128&&(ee=(k&15)<<12|(ae&63)<<6|X&63,ee>2047&&(ee<55296||ee>57343)&&(R=ee));break;case 4:ae=i[_+1],X=i[_+2],Q=i[_+3],(ae&192)===128&&(X&192)===128&&(Q&192)===128&&(ee=(k&15)<<18|(ae&63)<<12|(X&63)<<6|Q&63,ee>65535&&ee<1114112&&(R=ee))}}R===null?(R=65533,Y=1):R>65535&&(R-=65536,E.push(R>>>10&1023|55296),R=56320|R&1023),E.push(R),_+=Y}return Te(E)}var Ie=4096;function Te(i){let s=i.length;if(s<=Ie)return String.fromCharCode.apply(String,i);let l="",E=0;for(;E<s;)l+=String.fromCharCode.apply(String,i.slice(E,E+=Ie));return l}function M(i,s,l){let E="";l=Math.min(i.length,l);for(let _=s;_<l;++_)E+=String.fromCharCode(i[_]&127);return E}function x(i,s,l){let E="";l=Math.min(i.length,l);for(let _=s;_<l;++_)E+=String.fromCharCode(i[_]);return E}function N(i,s,l){let E=i.length;(!s||s<0)&&(s=0),(!l||l<0||l>E)&&(l=E);let _="";for(let k=s;k<l;++k)_+=ft[i[k]];return _}function L(i,s,l){let E=i.slice(s,l),_="";for(let k=0;k<E.length-1;k+=2)_+=String.fromCharCode(E[k]+E[k+1]*256);return _}a.prototype.slice=function(i,s){let l=this.length;i=~~i,s=s===void 0?l:~~s,i<0?(i+=l,i<0&&(i=0)):i>l&&(i=l),s<0?(s+=l,s<0&&(s=0)):s>l&&(s=l),s<i&&(s=i);let E=this.subarray(i,s);return Object.setPrototypeOf(E,a.prototype),E};function U(i,s,l){if(i%1!==0||i<0)throw new RangeError("offset is not uint");if(i+s>l)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(i,s,l){i=i>>>0,s=s>>>0,l||U(i,s,this.length);let E=this[i],_=1,k=0;for(;++k<s&&(_*=256);)E+=this[i+k]*_;return E},a.prototype.readUintBE=a.prototype.readUIntBE=function(i,s,l){i=i>>>0,s=s>>>0,l||U(i,s,this.length);let E=this[i+--s],_=1;for(;s>0&&(_*=256);)E+=this[i+--s]*_;return E},a.prototype.readUint8=a.prototype.readUInt8=function(i,s){return i=i>>>0,s||U(i,1,this.length),this[i]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(i,s){return i=i>>>0,s||U(i,2,this.length),this[i]|this[i+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(i,s){return i=i>>>0,s||U(i,2,this.length),this[i]<<8|this[i+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(i,s){return i=i>>>0,s||U(i,4,this.length),(this[i]|this[i+1]<<8|this[i+2]<<16)+this[i+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(i,s){return i=i>>>0,s||U(i,4,this.length),this[i]*16777216+(this[i+1]<<16|this[i+2]<<8|this[i+3])},a.prototype.readBigUInt64LE=ke(function(i){i=i>>>0,Fe(i,"offset");let s=this[i],l=this[i+7];(s===void 0||l===void 0)&&Le(i,this.length-8);let E=s+this[++i]*2**8+this[++i]*2**16+this[++i]*2**24,_=this[++i]+this[++i]*2**8+this[++i]*2**16+l*2**24;return BigInt(E)+(BigInt(_)<<BigInt(32))}),a.prototype.readBigUInt64BE=ke(function(i){i=i>>>0,Fe(i,"offset");let s=this[i],l=this[i+7];(s===void 0||l===void 0)&&Le(i,this.length-8);let E=s*2**24+this[++i]*2**16+this[++i]*2**8+this[++i],_=this[++i]*2**24+this[++i]*2**16+this[++i]*2**8+l;return(BigInt(E)<<BigInt(32))+BigInt(_)}),a.prototype.readIntLE=function(i,s,l){i=i>>>0,s=s>>>0,l||U(i,s,this.length);let E=this[i],_=1,k=0;for(;++k<s&&(_*=256);)E+=this[i+k]*_;return _*=128,E>=_&&(E-=Math.pow(2,8*s)),E},a.prototype.readIntBE=function(i,s,l){i=i>>>0,s=s>>>0,l||U(i,s,this.length);let E=s,_=1,k=this[i+--E];for(;E>0&&(_*=256);)k+=this[i+--E]*_;return _*=128,k>=_&&(k-=Math.pow(2,8*s)),k},a.prototype.readInt8=function(i,s){return i=i>>>0,s||U(i,1,this.length),this[i]&128?(255-this[i]+1)*-1:this[i]},a.prototype.readInt16LE=function(i,s){i=i>>>0,s||U(i,2,this.length);let l=this[i]|this[i+1]<<8;return l&32768?l|4294901760:l},a.prototype.readInt16BE=function(i,s){i=i>>>0,s||U(i,2,this.length);let l=this[i+1]|this[i]<<8;return l&32768?l|4294901760:l},a.prototype.readInt32LE=function(i,s){return i=i>>>0,s||U(i,4,this.length),this[i]|this[i+1]<<8|this[i+2]<<16|this[i+3]<<24},a.prototype.readInt32BE=function(i,s){return i=i>>>0,s||U(i,4,this.length),this[i]<<24|this[i+1]<<16|this[i+2]<<8|this[i+3]},a.prototype.readBigInt64LE=ke(function(i){i=i>>>0,Fe(i,"offset");let s=this[i],l=this[i+7];(s===void 0||l===void 0)&&Le(i,this.length-8);let E=this[i+4]+this[i+5]*2**8+this[i+6]*2**16+(l<<24);return(BigInt(E)<<BigInt(32))+BigInt(s+this[++i]*2**8+this[++i]*2**16+this[++i]*2**24)}),a.prototype.readBigInt64BE=ke(function(i){i=i>>>0,Fe(i,"offset");let s=this[i],l=this[i+7];(s===void 0||l===void 0)&&Le(i,this.length-8);let E=(s<<24)+this[++i]*2**16+this[++i]*2**8+this[++i];return(BigInt(E)<<BigInt(32))+BigInt(this[++i]*2**24+this[++i]*2**16+this[++i]*2**8+l)}),a.prototype.readFloatLE=function(i,s){return i=i>>>0,s||U(i,4,this.length),r.read(this,i,!0,23,4)},a.prototype.readFloatBE=function(i,s){return i=i>>>0,s||U(i,4,this.length),r.read(this,i,!1,23,4)},a.prototype.readDoubleLE=function(i,s){return i=i>>>0,s||U(i,8,this.length),r.read(this,i,!0,52,8)},a.prototype.readDoubleBE=function(i,s){return i=i>>>0,s||U(i,8,this.length),r.read(this,i,!1,52,8)};function K(i,s,l,E,_,k){if(!a.isBuffer(i))throw new TypeError('"buffer" argument must be a Buffer instance');if(s>_||s<k)throw new RangeError('"value" argument is out of bounds');if(l+E>i.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(i,s,l,E){if(i=+i,s=s>>>0,l=l>>>0,!E){let R=Math.pow(2,8*l)-1;K(this,i,s,l,R,0)}let _=1,k=0;for(this[s]=i&255;++k<l&&(_*=256);)this[s+k]=i/_&255;return s+l},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(i,s,l,E){if(i=+i,s=s>>>0,l=l>>>0,!E){let R=Math.pow(2,8*l)-1;K(this,i,s,l,R,0)}let _=l-1,k=1;for(this[s+_]=i&255;--_>=0&&(k*=256);)this[s+_]=i/k&255;return s+l},a.prototype.writeUint8=a.prototype.writeUInt8=function(i,s,l){return i=+i,s=s>>>0,l||K(this,i,s,1,255,0),this[s]=i&255,s+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(i,s,l){return i=+i,s=s>>>0,l||K(this,i,s,2,65535,0),this[s]=i&255,this[s+1]=i>>>8,s+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(i,s,l){return i=+i,s=s>>>0,l||K(this,i,s,2,65535,0),this[s]=i>>>8,this[s+1]=i&255,s+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(i,s,l){return i=+i,s=s>>>0,l||K(this,i,s,4,4294967295,0),this[s+3]=i>>>24,this[s+2]=i>>>16,this[s+1]=i>>>8,this[s]=i&255,s+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(i,s,l){return i=+i,s=s>>>0,l||K(this,i,s,4,4294967295,0),this[s]=i>>>24,this[s+1]=i>>>16,this[s+2]=i>>>8,this[s+3]=i&255,s+4};function ne(i,s,l,E,_){Ke(s,E,_,i,l,7);let k=Number(s&BigInt(4294967295));i[l++]=k,k=k>>8,i[l++]=k,k=k>>8,i[l++]=k,k=k>>8,i[l++]=k;let R=Number(s>>BigInt(32)&BigInt(4294967295));return i[l++]=R,R=R>>8,i[l++]=R,R=R>>8,i[l++]=R,R=R>>8,i[l++]=R,l}function fe(i,s,l,E,_){Ke(s,E,_,i,l,7);let k=Number(s&BigInt(4294967295));i[l+7]=k,k=k>>8,i[l+6]=k,k=k>>8,i[l+5]=k,k=k>>8,i[l+4]=k;let R=Number(s>>BigInt(32)&BigInt(4294967295));return i[l+3]=R,R=R>>8,i[l+2]=R,R=R>>8,i[l+1]=R,R=R>>8,i[l]=R,l+8}a.prototype.writeBigUInt64LE=ke(function(i,s=0){return ne(this,i,s,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=ke(function(i,s=0){return fe(this,i,s,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(i,s,l,E){if(i=+i,s=s>>>0,!E){let Y=Math.pow(2,8*l-1);K(this,i,s,l,Y-1,-Y)}let _=0,k=1,R=0;for(this[s]=i&255;++_<l&&(k*=256);)i<0&&R===0&&this[s+_-1]!==0&&(R=1),this[s+_]=(i/k>>0)-R&255;return s+l},a.prototype.writeIntBE=function(i,s,l,E){if(i=+i,s=s>>>0,!E){let Y=Math.pow(2,8*l-1);K(this,i,s,l,Y-1,-Y)}let _=l-1,k=1,R=0;for(this[s+_]=i&255;--_>=0&&(k*=256);)i<0&&R===0&&this[s+_+1]!==0&&(R=1),this[s+_]=(i/k>>0)-R&255;return s+l},a.prototype.writeInt8=function(i,s,l){return i=+i,s=s>>>0,l||K(this,i,s,1,127,-128),i<0&&(i=255+i+1),this[s]=i&255,s+1},a.prototype.writeInt16LE=function(i,s,l){return i=+i,s=s>>>0,l||K(this,i,s,2,32767,-32768),this[s]=i&255,this[s+1]=i>>>8,s+2},a.prototype.writeInt16BE=function(i,s,l){return i=+i,s=s>>>0,l||K(this,i,s,2,32767,-32768),this[s]=i>>>8,this[s+1]=i&255,s+2},a.prototype.writeInt32LE=function(i,s,l){return i=+i,s=s>>>0,l||K(this,i,s,4,2147483647,-2147483648),this[s]=i&255,this[s+1]=i>>>8,this[s+2]=i>>>16,this[s+3]=i>>>24,s+4},a.prototype.writeInt32BE=function(i,s,l){return i=+i,s=s>>>0,l||K(this,i,s,4,2147483647,-2147483648),i<0&&(i=4294967295+i+1),this[s]=i>>>24,this[s+1]=i>>>16,this[s+2]=i>>>8,this[s+3]=i&255,s+4},a.prototype.writeBigInt64LE=ke(function(i,s=0){return ne(this,i,s,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=ke(function(i,s=0){return fe(this,i,s,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function de(i,s,l,E,_,k){if(l+E>i.length)throw new RangeError("Index out of range");if(l<0)throw new RangeError("Index out of range")}function Z(i,s,l,E,_){return s=+s,l=l>>>0,_||de(i,s,l,4),r.write(i,s,l,E,23,4),l+4}a.prototype.writeFloatLE=function(i,s,l){return Z(this,i,s,!0,l)},a.prototype.writeFloatBE=function(i,s,l){return Z(this,i,s,!1,l)};function ge(i,s,l,E,_){return s=+s,l=l>>>0,_||de(i,s,l,8),r.write(i,s,l,E,52,8),l+8}a.prototype.writeDoubleLE=function(i,s,l){return ge(this,i,s,!0,l)},a.prototype.writeDoubleBE=function(i,s,l){return ge(this,i,s,!1,l)},a.prototype.copy=function(i,s,l,E){if(!a.isBuffer(i))throw new TypeError("argument should be a Buffer");if(l||(l=0),!E&&E!==0&&(E=this.length),s>=i.length&&(s=i.length),s||(s=0),E>0&&E<l&&(E=l),E===l||i.length===0||this.length===0)return 0;if(s<0)throw new RangeError("targetStart out of bounds");if(l<0||l>=this.length)throw new RangeError("Index out of range");if(E<0)throw new RangeError("sourceEnd out of bounds");E>this.length&&(E=this.length),i.length-s<E-l&&(E=i.length-s+l);let _=E-l;return this===i&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(s,l,E):Uint8Array.prototype.set.call(i,this.subarray(l,E),s),_},a.prototype.fill=function(i,s,l,E){if(typeof i=="string"){if(typeof s=="string"?(E=s,s=0,l=this.length):typeof l=="string"&&(E=l,l=this.length),E!==void 0&&typeof E!="string")throw new TypeError("encoding must be a string");if(typeof E=="string"&&!a.isEncoding(E))throw new TypeError("Unknown encoding: "+E);if(i.length===1){let k=i.charCodeAt(0);(E==="utf8"&&k<128||E==="latin1")&&(i=k)}}else typeof i=="number"?i=i&255:typeof i=="boolean"&&(i=Number(i));if(s<0||this.length<s||this.length<l)throw new RangeError("Out of range index");if(l<=s)return this;s=s>>>0,l=l===void 0?this.length:l>>>0,i||(i=0);let _;if(typeof i=="number")for(_=s;_<l;++_)this[_]=i;else{let k=a.isBuffer(i)?i:a.from(i,E),R=k.length;if(R===0)throw new TypeError('The value "'+i+'" is invalid for argument "value"');for(_=0;_<l-s;++_)this[_+s]=k[_%R]}return this};var le={};function Ce(i,s,l){le[i]=class extends l{constructor(){super(),Object.defineProperty(this,"message",{value:s.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${i}]`,this.stack,delete this.name}get code(){return i}set code(E){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:E,writable:!0})}toString(){return`${this.name} [${i}]: ${this.message}`}}}Ce("ERR_BUFFER_OUT_OF_BOUNDS",function(i){return i?`${i} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Ce("ERR_INVALID_ARG_TYPE",function(i,s){return`The "${i}" argument must be of type number. Received type ${typeof s}`},TypeError),Ce("ERR_OUT_OF_RANGE",function(i,s,l){let E=`The value of "${i}" is out of range.`,_=l;return Number.isInteger(l)&&Math.abs(l)>2**32?_=qe(String(l)):typeof l=="bigint"&&(_=String(l),(l>BigInt(2)**BigInt(32)||l<-(BigInt(2)**BigInt(32)))&&(_=qe(_)),_+="n"),E+=` It must be ${s}. Received ${_}`,E},RangeError);function qe(i){let s="",l=i.length,E=i[0]==="-"?1:0;for(;l>=E+4;l-=3)s=`_${i.slice(l-3,l)}${s}`;return`${i.slice(0,l)}${s}`}function et(i,s,l){Fe(s,"offset"),(i[s]===void 0||i[s+l]===void 0)&&Le(s,i.length-(l+1))}function Ke(i,s,l,E,_,k){if(i>l||i<s){let R=typeof s=="bigint"?"n":"",Y;throw k>3?s===0||s===BigInt(0)?Y=`>= 0${R} and < 2${R} ** ${(k+1)*8}${R}`:Y=`>= -(2${R} ** ${(k+1)*8-1}${R}) and < 2 ** ${(k+1)*8-1}${R}`:Y=`>= ${s}${R} and <= ${l}${R}`,new le.ERR_OUT_OF_RANGE("value",Y,i)}et(E,_,k)}function Fe(i,s){if(typeof i!="number")throw new le.ERR_INVALID_ARG_TYPE(s,"number",i)}function Le(i,s,l){throw Math.floor(i)!==i?(Fe(i,l),new le.ERR_OUT_OF_RANGE(l||"offset","an integer",i)):s<0?new le.ERR_BUFFER_OUT_OF_BOUNDS:new le.ERR_OUT_OF_RANGE(l||"offset",`>= ${l?1:0} and <= ${s}`,i)}var st=/[^+/0-9A-Za-z-_]/g;function at(i){if(i=i.split("=")[0],i=i.trim().replace(st,""),i.length<2)return"";for(;i.length%4!==0;)i=i+"=";return i}function Ye(i,s){s=s||1/0;let l,E=i.length,_=null,k=[];for(let R=0;R<E;++R){if(l=i.charCodeAt(R),l>55295&&l<57344){if(!_){if(l>56319){(s-=3)>-1&&k.push(239,191,189);continue}else if(R+1===E){(s-=3)>-1&&k.push(239,191,189);continue}_=l;continue}if(l<56320){(s-=3)>-1&&k.push(239,191,189),_=l;continue}l=(_-55296<<10|l-56320)+65536}else _&&(s-=3)>-1&&k.push(239,191,189);if(_=null,l<128){if((s-=1)<0)break;k.push(l)}else if(l<2048){if((s-=2)<0)break;k.push(l>>6|192,l&63|128)}else if(l<65536){if((s-=3)<0)break;k.push(l>>12|224,l>>6&63|128,l&63|128)}else if(l<1114112){if((s-=4)<0)break;k.push(l>>18|240,l>>12&63|128,l>>6&63|128,l&63|128)}else throw new Error("Invalid code point")}return k}function ut(i){let s=[];for(let l=0;l<i.length;++l)s.push(i.charCodeAt(l)&255);return s}function lt(i,s){let l,E,_,k=[];for(let R=0;R<i.length&&!((s-=2)<0);++R)l=i.charCodeAt(R),E=l>>8,_=l%256,k.push(_),k.push(E);return k}function ot(i){return t.toByteArray(at(i))}function je(i,s,l,E){let _;for(_=0;_<E&&!(_+l>=s.length||_>=i.length);++_)s[_+l]=i[_];return _}function Ae(i,s){return i instanceof s||i!=null&&i.constructor!=null&&i.constructor.name!=null&&i.constructor.name===s.name}function Qe(i){return i!==i}var ft=function(){let i="0123456789abcdef",s=new Array(256);for(let l=0;l<16;++l){let E=l*16;for(let _=0;_<16;++_)s[E+_]=i[l]+i[_]}return s}();function ke(i){return typeof BigInt>"u"?bt:i}function bt(){throw new Error("BigInt not supported")}}),hy=P((e,t)=>{v();var r=t.exports={},n,o;function u(){throw new Error("setTimeout has not been defined")}function c(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?n=setTimeout:n=u}catch{n=u}try{typeof clearTimeout=="function"?o=clearTimeout:o=c}catch{o=c}})();function a(A){if(n===setTimeout)return setTimeout(A,0);if((n===u||!n)&&setTimeout)return n=setTimeout,setTimeout(A,0);try{return n(A,0)}catch{try{return n.call(null,A,0)}catch{return n.call(this,A,0)}}}function h(A){if(o===clearTimeout)return clearTimeout(A);if((o===c||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(A);try{return o(A)}catch{try{return o.call(null,A)}catch{return o.call(this,A)}}}var d=[],m=!1,w,p=-1;function f(){!m||!w||(m=!1,w.length?d=w.concat(d):p=-1,d.length&&y())}function y(){if(!m){var A=a(f);m=!0;for(var T=d.length;T;){for(w=d,d=[];++p<T;)w&&w[p].run();p=-1,T=d.length}w=null,m=!1,h(A)}}r.nextTick=function(A){var T=new Array(arguments.length-1);if(arguments.length>1)for(var O=1;O<arguments.length;O++)T[O-1]=arguments[O];d.push(new b(A,T)),d.length===1&&!m&&a(y)};function b(A,T){this.fun=A,this.array=T}b.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={};function g(){}r.on=g,r.addListener=g,r.once=g,r.off=g,r.removeListener=g,r.removeAllListeners=g,r.emit=g,r.prependListener=g,r.prependOnceListener=g,r.listeners=function(A){return[]},r.binding=function(A){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(A){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}}),Ki,St,Tt,v=se(()=>{fo().Buffer,Ki=hy(),St=typeof St<"u"?St:typeof globalThis<"u"?globalThis:typeof Tt<"u"?Tt:typeof window<"u"?window:{},Tt=globalThis,globalThis&&globalThis.process&&globalThis.process.env&&(globalThis.process.env.LIBP2P_FORCE_PNET=!1)}),dy=P((e,t)=>{v(),t.exports=c;var r=128,n=127,o=~n,u=Math.pow(2,31);function c(a,h,d){if(Number.MAX_SAFE_INTEGER&&a>Number.MAX_SAFE_INTEGER)throw c.bytes=0,new RangeError("Could not encode varint");h=h||[],d=d||0;for(var m=d;a>=u;)h[d++]=a&255|r,a/=128;for(;a&o;)h[d++]=a&255|r,a>>>=7;return h[d]=a|0,c.bytes=d-m+1,h}}),py=P((e,t)=>{v(),t.exports=o;var r=128,n=127;function o(u,h){var a=0,h=h||0,d=0,m=h,w,p=u.length;do{if(m>=p||d>49)throw o.bytes=0,new RangeError("Could not decode varint");w=u[m++],a+=d<28?(w&n)<<d:(w&n)*Math.pow(2,d),d+=7}while(w>=r);return o.bytes=m-h,a}}),yy=P((e,t)=>{v();var r=Math.pow(2,7),n=Math.pow(2,14),o=Math.pow(2,21),u=Math.pow(2,28),c=Math.pow(2,35),a=Math.pow(2,42),h=Math.pow(2,49),d=Math.pow(2,56),m=Math.pow(2,63);t.exports=function(w){return w<r?1:w<n?2:w<o?3:w<u?4:w<c?5:w<a?6:w<h?7:w<d?8:w<m?9:10}}),nt=P((e,t)=>{v(),t.exports={encode:dy(),decode:py(),encodingLength:yy()}});function th(e,t,r){t=t||[],r=r||0;for(var n=r;e>=nh;)t[r++]=e&255|Fs,e/=128;for(;e&rh;)t[r++]=e&255|Fs,e>>>=7;return t[r]=e|0,th.bytes=r-n+1,t}function Ls(e,n){var r=0,n=n||0,o=0,u=n,c,a=e.length;do{if(u>=a)throw Ls.bytes=0,new RangeError("Could not decode varint");c=e[u++],r+=o<28?(c&Ns)<<o:(c&Ns)*Math.pow(2,o),o+=7}while(c>=ih);return Ls.bytes=u-n,r}var Du,Fs,Mu,rh,nh,zu,ih,Ns,qu,Vu,Ku,Wu,Hu,Gu,Ju,Yu,Qu,Zu,Xu,el,Rn,gy=se(()=>{v(),Du=th,Fs=128,Mu=127,rh=~Mu,nh=Math.pow(2,31),zu=Ls,ih=128,Ns=127,qu=Math.pow(2,7),Vu=Math.pow(2,14),Ku=Math.pow(2,21),Wu=Math.pow(2,28),Hu=Math.pow(2,35),Gu=Math.pow(2,42),Ju=Math.pow(2,49),Yu=Math.pow(2,56),Qu=Math.pow(2,63),Zu=function(e){return e<qu?1:e<Vu?2:e<Ku?3:e<Wu?4:e<Hu?5:e<Gu?6:e<Ju?7:e<Yu?8:e<Qu?9:10},Xu={encode:Du,decode:zu,encodingLength:Zu},el=Xu,Rn=el}),Xi,Hn,Gn,Xs=se(()=>{v(),gy(),Xi=(e,t=0)=>[Rn.decode(e,t),Rn.decode.bytes],Hn=(e,t,r=0)=>(Rn.encode(e,t,r),t),Gn=e=>Rn.encodingLength(e)}),ea={};pe(ea,{coerce:()=>br,empty:()=>Rs,equals:()=>ta,fromHex:()=>sh,fromString:()=>ra,isBinary:()=>ah,toHex:()=>oh,toString:()=>na});var Rs,oh,sh,ta,br,ah,ra,na,Nr=se(()=>{v(),Rs=new Uint8Array(0),oh=e=>e.reduce((t,r)=>t+r.toString(16).padStart(2,"0"),""),sh=e=>{let t=e.match(/../g);return t?new Uint8Array(t.map(r=>parseInt(r,16))):Rs},ta=(e,t)=>{if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0},br=e=>{if(e instanceof Uint8Array&&e.constructor.name==="Uint8Array")return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")},ah=e=>e instanceof ArrayBuffer||ArrayBuffer.isView(e),ra=e=>new TextEncoder().encode(e),na=e=>new TextDecoder().decode(e)}),uh={};pe(uh,{Digest:()=>jn,create:()=>cn,decode:()=>Xe,equals:()=>ia});var cn,Xe,ia,jn,He=se(()=>{v(),Nr(),Xs(),cn=(e,t)=>{let r=t.byteLength,n=Gn(e),o=n+Gn(r),u=new Uint8Array(o+r);return Hn(e,u,0),Hn(r,u,n),u.set(t,o),new jn(e,r,t,u)},Xe=e=>{let t=br(e),[r,n]=Xi(t),[o,u]=Xi(t.subarray(n)),c=t.subarray(n+u);if(c.byteLength!==o)throw new Error("Incorrect length");return new jn(r,o,c,t)},ia=(e,t)=>e===t?!0:e.code===t.code&&e.size===t.size&&ta(e.bytes,t.bytes),jn=class{constructor(e,t,r,n){this.code=e,this.size=t,this.digest=r,this.bytes=n}}});function wy(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var o=0;o<e.length;o++){var u=e.charAt(o),c=u.charCodeAt(0);if(r[c]!==255)throw new TypeError(u+" is ambiguous");r[c]=o}var a=e.length,h=e.charAt(0),d=Math.log(a)/Math.log(256),m=Math.log(256)/Math.log(a);function w(y){if(y instanceof Uint8Array||(ArrayBuffer.isView(y)?y=new Uint8Array(y.buffer,y.byteOffset,y.byteLength):Array.isArray(y)&&(y=Uint8Array.from(y))),!(y instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(y.length===0)return"";for(var b=0,g=0,A=0,T=y.length;A!==T&&y[A]===0;)A++,b++;for(var O=(T-A)*m+1>>>0,C=new Uint8Array(O);A!==T;){for(var j=y[A],B=0,I=O-1;(j!==0||B<g)&&I!==-1;I--,B++)j+=256*C[I]>>>0,C[I]=j%a>>>0,j=j/a>>>0;if(j!==0)throw new Error("Non-zero carry");g=B,A++}for(var S=O-g;S!==O&&C[S]===0;)S++;for(var F=h.repeat(b);S<O;++S)F+=e.charAt(C[S]);return F}function p(y){if(typeof y!="string")throw new TypeError("Expected String");if(y.length===0)return new Uint8Array;var b=0;if(y[b]!==" "){for(var g=0,A=0;y[b]===h;)g++,b++;for(var T=(y.length-b)*d+1>>>0,O=new Uint8Array(T);y[b];){var C=r[y.charCodeAt(b)];if(C===255)return;for(var j=0,B=T-1;(C!==0||j<A)&&B!==-1;B--,j++)C+=a*O[B]>>>0,O[B]=C%256>>>0,C=C/256>>>0;if(C!==0)throw new Error("Non-zero carry");A=j,b++}if(y[b]!==" "){for(var I=T-A;I!==T&&O[I]===0;)I++;for(var S=new Uint8Array(g+(T-I)),F=g;I!==T;)S[F++]=O[I++];return S}}}function f(y){var b=p(y);if(b)return b;throw new Error(`Non-${t} character`)}return{encode:w,decodeUnsafe:p,decode:f}}var tl,rl,lh,by=se(()=>{v(),tl=wy,rl=tl,lh=rl}),nl,il,ol,ns,sl,Pn,hn,al,ul,Re,Bt=se(()=>{v(),by(),Nr(),nl=class{constructor(e,t,r){this.name=e,this.prefix=t,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},il=class{constructor(e,t,r){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return ns(this,e)}},ol=class{constructor(e){this.decoders=e}or(e){return ns(this,e)}decode(e){let t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}},ns=(e,t)=>new ol({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}}),sl=class{constructor(e,t,r,n){this.name=e,this.prefix=t,this.baseEncode=r,this.baseDecode=n,this.encoder=new nl(e,t,r),this.decoder=new il(e,t,n)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}},Pn=({name:e,prefix:t,encode:r,decode:n})=>new sl(e,t,r,n),hn=({prefix:e,name:t,alphabet:r})=>{let{encode:n,decode:o}=lh(r,t);return Pn({prefix:e,name:t,encode:n,decode:u=>br(o(u))})},al=(e,t,r,n)=>{let o={};for(let m=0;m<t.length;++m)o[t[m]]=m;let u=e.length;for(;e[u-1]==="=";)--u;let c=new Uint8Array(u*r/8|0),a=0,h=0,d=0;for(let m=0;m<u;++m){let w=o[e[m]];if(w===void 0)throw new SyntaxError(`Non-${n} character`);h=h<<r|w,a+=r,a>=8&&(a-=8,c[d++]=255&h>>a)}if(a>=r||255&h<<8-a)throw new SyntaxError("Unexpected end of data");return c},ul=(e,t,r)=>{let n=t[t.length-1]==="=",o=(1<<r)-1,u="",c=0,a=0;for(let h=0;h<e.length;++h)for(a=a<<8|e[h],c+=8;c>r;)c-=r,u+=t[o&a>>c];if(c&&(u+=t[o&a<<r-c]),n)for(;u.length*r&7;)u+="=";return u},Re=({name:e,prefix:t,bitsPerChar:r,alphabet:n})=>Pn({prefix:t,name:e,encode(o){return ul(o,n,r)},decode(o){return al(o,n,r,e)}})}),po={};pe(po,{base58btc:()=>Oe,base58flickr:()=>ch});var Oe,ch,it=se(()=>{v(),Bt(),Oe=hn({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),ch=hn({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"})}),oa={};pe(oa,{base32:()=>ie,base32hex:()=>dh,base32hexpad:()=>yh,base32hexpadupper:()=>gh,base32hexupper:()=>ph,base32pad:()=>sa,base32padupper:()=>fh,base32upper:()=>hh,base32z:()=>wh});var ie,hh,sa,fh,dh,ph,yh,gh,wh,Ge=se(()=>{v(),Bt(),ie=Re({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),hh=Re({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),sa=Re({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),fh=Re({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),dh=Re({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),ph=Re({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),yh=Re({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),gh=Re({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),wh=Re({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5})}),aa={};pe(aa,{CID:()=>G});var G,ll,cl,hl,Qr,fl,is,os,Cn,On,dl,pl,yl,ce=se(()=>{v(),Xs(),He(),it(),Ge(),Nr(),G=class{constructor(e,t,r,n){this.code=t,this.version=e,this.multihash=r,this.bytes=n,this.byteOffset=n.byteOffset,this.byteLength=n.byteLength,this.asCID=this,this._baseCache=new Map,Object.defineProperties(this,{byteOffset:On,byteLength:On,code:Cn,version:Cn,multihash:Cn,bytes:Cn,_baseCache:On,asCID:On})}toV0(){switch(this.version){case 0:return this;default:{let{code:e,multihash:t}=this;if(e!==Qr)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==fl)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return G.createV0(t)}}}toV1(){switch(this.version){case 0:{let{code:e,digest:t}=this.multihash,r=cn(e,t);return G.createV1(this.code,r)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}equals(e){return e&&this.code===e.code&&this.version===e.version&&ia(this.multihash,e.multihash)}toString(e){let{bytes:t,version:r,_baseCache:n}=this;switch(r){case 0:return cl(t,n,e||Oe.encoder);default:return hl(t,n,e||ie.encoder)}}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(e){return pl(/^0\.0/,yl),!!(e&&(e[os]||e.asCID===e))}get toBaseEncodedString(){throw new Error("Deprecated, use .toString()")}get codec(){throw new Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw new Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw new Error('"multibaseName" property is deprecated')}get prefix(){throw new Error('"prefix" property is deprecated')}static asCID(e){if(e instanceof G)return e;if(e!=null&&e.asCID===e){let{version:t,code:r,multihash:n,bytes:o}=e;return new G(t,r,n,o||is(t,r,n.bytes))}else if(e!=null&&e[os]===!0){let{version:t,multihash:r,code:n}=e,o=Xe(r);return G.create(t,n,o)}else return null}static create(e,t,r){if(typeof t!="number")throw new Error("String codecs are no longer supported");switch(e){case 0:{if(t!==Qr)throw new Error(`Version 0 CID must use dag-pb (code: ${Qr}) block encoding`);return new G(e,t,r,r.bytes)}case 1:{let n=is(e,t,r.bytes);return new G(e,t,r,n)}default:throw new Error("Invalid version")}}static createV0(e){return G.create(0,Qr,e)}static createV1(e,t){return G.create(1,e,t)}static decode(e){let[t,r]=G.decodeFirst(e);if(r.length)throw new Error("Incorrect length");return t}static decodeFirst(e){let t=G.inspectBytes(e),r=t.size-t.multihashSize,n=br(e.subarray(r,r+t.multihashSize));if(n.byteLength!==t.multihashSize)throw new Error("Incorrect length");let o=n.subarray(t.multihashSize-t.digestSize),u=new jn(t.multihashCode,t.digestSize,o,n);return[t.version===0?G.createV0(u):G.createV1(t.codec,u),e.subarray(t.size)]}static inspectBytes(e){let t=0,r=()=>{let[m,w]=Xi(e.subarray(t));return t+=w,m},n=r(),o=Qr;if(n===18?(n=0,t=0):n===1&&(o=r()),n!==0&&n!==1)throw new RangeError(`Invalid CID version ${n}`);let u=t,c=r(),a=r(),h=t+a,d=h-u;return{version:n,codec:o,multihashCode:c,digestSize:a,multihashSize:d,size:h}}static parse(e,t){let[r,n]=ll(e,t),o=G.decode(n);return o._baseCache.set(r,e),o}},ll=(e,t)=>{switch(e[0]){case"Q":{let r=t||Oe;return[Oe.prefix,r.decode(`${Oe.prefix}${e}`)]}case Oe.prefix:{let r=t||Oe;return[Oe.prefix,r.decode(e)]}case ie.prefix:{let r=t||ie;return[ie.prefix,r.decode(e)]}default:{if(t==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[e[0],t.decode(e)]}}},cl=(e,t,r)=>{let{prefix:n}=r;if(n!==Oe.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);let o=t.get(n);if(o==null){let u=r.encode(e).slice(1);return t.set(n,u),u}else return o},hl=(e,t,r)=>{let{prefix:n}=r,o=t.get(n);if(o==null){let u=r.encode(e);return t.set(n,u),u}else return o},Qr=112,fl=18,is=(e,t,r)=>{let n=Gn(e),o=n+Gn(t),u=new Uint8Array(o+r.byteLength);return Hn(e,u,0),Hn(t,u,n),u.set(r,o),u},os=Symbol.for("@ipld/js-cid/CID"),Cn={writable:!1,configurable:!1,enumerable:!0},On={writable:!1,enumerable:!1,configurable:!1},dl="0.0.0-dev",pl=(e,t)=>{if(e.test(dl))console.warn(t);else throw new Error(t)},yl=`CID.isCID(v) is deprecated and will be removed in the next major release.
Following code pattern:

if (CID.isCID(value)) {
  doSomethingWithCID(value)
}

Is replaced with:

const cid = CID.asCID(value)
if (cid) {
  // Make sure to use cid instead of value
  doSomethingWithCID(cid)
}
`}),$s,gl,bh=se(()=>{v(),He(),$s=({name:e,code:t,encode:r})=>new gl(e,t,r),gl=class{constructor(e,t,r){this.name=e,this.code=t,this.encode=r}digest(e){if(e instanceof Uint8Array){let t=this.encode(e);return t instanceof Uint8Array?cn(this.code,t):t.then(r=>cn(this.code,r))}else throw Error("Unknown type, must be binary type")}}}),ai=se(()=>{v(),ce(),Xs(),Nr(),bh(),He()}),yo={};pe(yo,{code:()=>Or,decode:()=>Eh,encode:()=>vh,name:()=>mh});var mh,Or,vh,Eh,xr=se(()=>{v(),Nr(),mh="raw",Or=85,vh=e=>br(e),Eh=e=>br(e)}),xh={};pe(xh,{sha256:()=>mr,sha512:()=>_h});var ss,mr,_h,ui=se(()=>{v(),bh(),ss=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t)),mr=$s({name:"sha2-256",code:18,encode:ss("SHA-256")}),_h=$s({name:"sha2-512",code:19,encode:ss("SHA-512")})}),my=P((e,t)=>{v();var r=1e3,n=r*60,o=n*60,u=o*24,c=u*7,a=u*365.25;t.exports=function(p,f){f=f||{};var y=typeof p;if(y==="string"&&p.length>0)return h(p);if(y==="number"&&isFinite(p))return f.long?m(p):d(p);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(p))};function h(p){if(p=String(p),!(p.length>100)){var f=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(p);if(f){var y=parseFloat(f[1]),b=(f[2]||"ms").toLowerCase();switch(b){case"years":case"year":case"yrs":case"yr":case"y":return y*a;case"weeks":case"week":case"w":return y*c;case"days":case"day":case"d":return y*u;case"hours":case"hour":case"hrs":case"hr":case"h":return y*o;case"minutes":case"minute":case"mins":case"min":case"m":return y*n;case"seconds":case"second":case"secs":case"sec":case"s":return y*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return y;default:return}}}}function d(p){var f=Math.abs(p);return f>=u?Math.round(p/u)+"d":f>=o?Math.round(p/o)+"h":f>=n?Math.round(p/n)+"m":f>=r?Math.round(p/r)+"s":p+"ms"}function m(p){var f=Math.abs(p);return f>=u?w(p,f,u,"day"):f>=o?w(p,f,o,"hour"):f>=n?w(p,f,n,"minute"):f>=r?w(p,f,r,"second"):p+" ms"}function w(p,f,y,b){var g=f>=y*1.5;return Math.round(p/y)+" "+b+(g?"s":"")}}),vy=P((e,t)=>{v();function r(n){u.debug=u,u.default=u,u.coerce=w,u.disable=h,u.enable=a,u.enabled=d,u.humanize=my(),u.destroy=p,Object.keys(n).forEach(f=>{u[f]=n[f]}),u.names=[],u.skips=[],u.formatters={};function o(f){let y=0;for(let b=0;b<f.length;b++)y=(y<<5)-y+f.charCodeAt(b),y|=0;return u.colors[Math.abs(y)%u.colors.length]}u.selectColor=o;function u(f){let y,b=null,g,A;function T(...O){if(!T.enabled)return;let C=T,j=Number(new Date),B=j-(y||j);C.diff=B,C.prev=y,C.curr=j,y=j,O[0]=u.coerce(O[0]),typeof O[0]!="string"&&O.unshift("%O");let I=0;O[0]=O[0].replace(/%([a-zA-Z%])/g,(S,F)=>{if(S==="%%")return"%";I++;let D=u.formatters[F];if(typeof D=="function"){let q=O[I];S=D.call(C,q),O.splice(I,1),I--}return S}),u.formatArgs.call(C,O),(C.log||u.log).apply(C,O)}return T.namespace=f,T.useColors=u.useColors(),T.color=u.selectColor(f),T.extend=c,T.destroy=u.destroy,Object.defineProperty(T,"enabled",{enumerable:!0,configurable:!1,get:()=>b!==null?b:(g!==u.namespaces&&(g=u.namespaces,A=u.enabled(f)),A),set:O=>{b=O}}),typeof u.init=="function"&&u.init(T),T}function c(f,y){let b=u(this.namespace+(typeof y>"u"?":":y)+f);return b.log=this.log,b}function a(f){u.save(f),u.namespaces=f,u.names=[],u.skips=[];let y,b=(typeof f=="string"?f:"").split(/[\s,]+/),g=b.length;for(y=0;y<g;y++)!b[y]||(f=b[y].replace(/\*/g,".*?"),f[0]==="-"?u.skips.push(new RegExp("^"+f.slice(1)+"$")):u.names.push(new RegExp("^"+f+"$")))}function h(){let f=[...u.names.map(m),...u.skips.map(m).map(y=>"-"+y)].join(",");return u.enable(""),f}function d(f){if(f[f.length-1]==="*")return!0;let y,b;for(y=0,b=u.skips.length;y<b;y++)if(u.skips[y].test(f))return!1;for(y=0,b=u.names.length;y<b;y++)if(u.names[y].test(f))return!0;return!1}function m(f){return f.toString().substring(2,f.toString().length-2).replace(/\.\*\?$/,"*")}function w(f){return f instanceof Error?f.stack||f.message:f}function p(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return u.enable(u.load()),u}t.exports=r}),mt=P((e,t)=>{v(),e.formatArgs=n,e.save=o,e.load=u,e.useColors=r,e.storage=c(),e.destroy=(()=>{let h=!1;return()=>{h||(h=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function r(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function n(h){if(h[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+h[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;let d="color: "+this.color;h.splice(1,0,d,"color: inherit");let m=0,w=0;h[0].replace(/%[a-zA-Z%]/g,p=>{p!=="%%"&&(m++,p==="%c"&&(w=m))}),h.splice(w,0,d)}e.log=console.debug||console.log||(()=>{});function o(h){try{h?e.storage.setItem("debug",h):e.storage.removeItem("debug")}catch{}}function u(){let h;try{h=e.storage.getItem("debug")}catch{}return!h&&typeof Ki<"u"&&"env"in Ki&&(h=Ki.env.DEBUG),h}function c(){try{return localStorage}catch{}}t.exports=vy()(e);var{formatters:a}=t.exports;a.j=function(h){try{return JSON.stringify(h)}catch(d){return"[UnexpectedJSONParseError]: "+d.message}}}),Je=P((e,t)=>{v();function r(o,u){for(let c in u)Object.defineProperty(o,c,{value:u[c],enumerable:!0,configurable:!0});return o}function n(o,u,c){if(!o||typeof o=="string")throw new TypeError("Please pass an Error to err-code");c||(c={}),typeof u=="object"&&(c=u,u=""),u&&(c.code=u);try{return r(o,c)}catch{c.message=o.message,c.stack=o.stack;let a=function(){};return a.prototype=Object.create(Object.getPrototypeOf(o)),r(new a,c)}}t.exports=n}),Ah={};pe(Ah,{identity:()=>kh});var kh,Ey=se(()=>{v(),Bt(),Nr(),kh=Pn({prefix:"\0",name:"identity",encode:e=>na(e),decode:e=>ra(e)})}),Sh={};pe(Sh,{base2:()=>Th});var Th,xy=se(()=>{v(),Bt(),Th=Re({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1})}),Ih={};pe(Ih,{base8:()=>Bh});var Bh,_y=se(()=>{v(),Bt(),Bh=Re({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3})}),Ch={};pe(Ch,{base10:()=>Oh});var Oh,Ay=se(()=>{v(),Bt(),Oh=hn({prefix:"9",name:"base10",alphabet:"0123456789"})}),Lh={};pe(Lh,{base16:()=>Fh,base16upper:()=>Nh});var Fh,Nh,ky=se(()=>{v(),Bt(),Fh=Re({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Nh=Re({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4})}),Rh={};pe(Rh,{base36:()=>$h,base36upper:()=>Uh});var $h,Uh,Sy=se(()=>{v(),Bt(),$h=hn({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Uh=hn({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"})}),jh={};pe(jh,{base64:()=>go,base64pad:()=>Ph,base64url:()=>wo,base64urlpad:()=>Dh});var go,Ph,wo,Dh,bo=se(()=>{v(),Bt(),go=Re({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Ph=Re({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),wo=Re({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Dh=Re({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6})}),Mh={};pe(Mh,{base256emoji:()=>Vh});function Ty(e){return e.reduce((t,r)=>(t+=zh[r],t),"")}function Iy(e){let t=[];for(let r of e){let n=qh[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);t.push(n)}return new Uint8Array(t)}var as,zh,qh,Vh,By=se(()=>{v(),Bt(),as=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),zh=as.reduce((e,t,r)=>(e[r]=t,e),[]),qh=as.reduce((e,t,r)=>(e[t.codePointAt(0)]=r,e),[]),Vh=Pn({prefix:"\u{1F680}",name:"base256emoji",encode:Ty,decode:Iy})}),Kh={};pe(Kh,{identity:()=>Jn});var us,wl,ls,bl,Jn,ua=se(()=>{v(),Nr(),He(),us=0,wl="identity",ls=br,bl=e=>cn(us,ls(e)),Jn={code:us,name:wl,encode:ls,digest:bl}}),Wh={};pe(Wh,{code:()=>la,decode:()=>Jh,encode:()=>Gh,name:()=>Hh});var ml,vl,Hh,la,Gh,Jh,Yh=se(()=>{v(),ml=new TextEncoder,vl=new TextDecoder,Hh="json",la=512,Gh=e=>ml.encode(JSON.stringify(e)),Jh=e=>JSON.parse(vl.decode(e))}),Yn,mo=se(()=>{v(),Ey(),xy(),_y(),Ay(),ky(),Ge(),Sy(),it(),bo(),By(),ui(),ua(),xr(),Yh(),ai(),Yn={...Ah,...Sh,...Ih,...Ch,...Lh,...oa,...Rh,...po,...jh,...Mh},{...xh,...Kh}});function Xh(e=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(e):new Uint8Array(e)}var ef=se(()=>{v()});function El(e,t,r,n){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:n}}}var cs,Si,xl,ca,tf=se(()=>{v(),mo(),ef(),cs=El("utf8","u",e=>{let t=new TextDecoder("utf8");return"u"+t.decode(e)},e=>new TextEncoder().encode(e.substring(1))),Si=El("ascii","a",e=>{let t="a";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t},e=>{e=e.substring(1);let t=Xh(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}),xl={utf8:cs,"utf-8":cs,hex:Yn.base16,latin1:Si,ascii:Si,binary:Si,...Yn},ca=xl}),li={};pe(li,{toString:()=>re});function re(e,t="utf8"){let r=ca[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("utf8"):r.encoder.encode(e).substring(1)}var ye=se(()=>{v(),tf()}),rf={};pe(rf,{fromString:()=>Ue});function Ue(e,t="utf8"){let r=ca[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(e,"utf8"):r.decoder.decode(`${r.prefix}${e}`)}var Ve=se(()=>{v(),tf()}),nf=P((e,t)=>{v();var r=async n=>{let o=0;for await(let u of n)o++;return o};t.exports=r}),Cy=P((e,t)=>{v(),t.exports=r;function r(n,o){for(var u=new Array(arguments.length-1),c=0,a=2,h=!0;a<arguments.length;)u[c++]=arguments[a++];return new Promise(function(d,m){u[c]=function(w){if(h)if(h=!1,w)m(w);else{for(var p=new Array(arguments.length-1),f=0;f<p.length;)p[f++]=arguments[f];d.apply(null,p)}};try{n.apply(o||null,u)}catch(w){h&&(h=!1,m(w))}})}}),Oy=P(e=>{v();var t=e;t.length=function(c){var a=c.length;if(!a)return 0;for(var h=0;--a%4>1&&c.charAt(a)==="=";)++h;return Math.ceil(c.length*3)/4-h};var r=new Array(64),n=new Array(123);for(o=0;o<64;)n[r[o]=o<26?o+65:o<52?o+71:o<62?o-4:o-59|43]=o++;var o;t.encode=function(c,a,h){for(var d=null,m=[],w=0,p=0,f;a<h;){var y=c[a++];switch(p){case 0:m[w++]=r[y>>2],f=(y&3)<<4,p=1;break;case 1:m[w++]=r[f|y>>4],f=(y&15)<<2,p=2;break;case 2:m[w++]=r[f|y>>6],m[w++]=r[y&63],p=0;break}w>8191&&((d||(d=[])).push(String.fromCharCode.apply(String,m)),w=0)}return p&&(m[w++]=r[f],m[w++]=61,p===1&&(m[w++]=61)),d?(w&&d.push(String.fromCharCode.apply(String,m.slice(0,w))),d.join("")):String.fromCharCode.apply(String,m.slice(0,w))};var u="invalid encoding";t.decode=function(c,a,h){for(var d=h,m=0,w,p=0;p<c.length;){var f=c.charCodeAt(p++);if(f===61&&m>1)break;if((f=n[f])===void 0)throw Error(u);switch(m){case 0:w=f,m=1;break;case 1:a[h++]=w<<2|(f&48)>>4,w=f,m=2;break;case 2:a[h++]=(w&15)<<4|(f&60)>>2,w=f,m=3;break;case 3:a[h++]=(w&3)<<6|f,m=0;break}}if(m===1)throw Error(u);return h-d},t.test=function(c){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(c)}}),Ly=P((e,t)=>{v(),t.exports=r;function r(){this._listeners={}}r.prototype.on=function(n,o,u){return(this._listeners[n]||(this._listeners[n]=[])).push({fn:o,ctx:u||this}),this},r.prototype.off=function(n,o){if(n===void 0)this._listeners={};else if(o===void 0)this._listeners[n]=[];else for(var u=this._listeners[n],c=0;c<u.length;)u[c].fn===o?u.splice(c,1):++c;return this},r.prototype.emit=function(n){var o=this._listeners[n];if(o){for(var u=[],c=1;c<arguments.length;)u.push(arguments[c++]);for(c=0;c<o.length;)o[c].fn.apply(o[c++].ctx,u)}return this}}),Fy=P((e,t)=>{v(),t.exports=r(r);function r(a){return typeof Float32Array<"u"?function(){var h=new Float32Array([-0]),d=new Uint8Array(h.buffer),m=d[3]===128;function w(b,g,A){h[0]=b,g[A]=d[0],g[A+1]=d[1],g[A+2]=d[2],g[A+3]=d[3]}function p(b,g,A){h[0]=b,g[A]=d[3],g[A+1]=d[2],g[A+2]=d[1],g[A+3]=d[0]}a.writeFloatLE=m?w:p,a.writeFloatBE=m?p:w;function f(b,g){return d[0]=b[g],d[1]=b[g+1],d[2]=b[g+2],d[3]=b[g+3],h[0]}function y(b,g){return d[3]=b[g],d[2]=b[g+1],d[1]=b[g+2],d[0]=b[g+3],h[0]}a.readFloatLE=m?f:y,a.readFloatBE=m?y:f}():function(){function h(m,w,p,f){var y=w<0?1:0;if(y&&(w=-w),w===0)m(1/w>0?0:2147483648,p,f);else if(isNaN(w))m(2143289344,p,f);else if(w>34028234663852886e22)m((y<<31|2139095040)>>>0,p,f);else if(w<11754943508222875e-54)m((y<<31|Math.round(w/1401298464324817e-60))>>>0,p,f);else{var b=Math.floor(Math.log(w)/Math.LN2),g=Math.round(w*Math.pow(2,-b)*8388608)&8388607;m((y<<31|b+127<<23|g)>>>0,p,f)}}a.writeFloatLE=h.bind(null,n),a.writeFloatBE=h.bind(null,o);function d(m,w,p){var f=m(w,p),y=(f>>31)*2+1,b=f>>>23&255,g=f&8388607;return b===255?g?NaN:y*(1/0):b===0?y*1401298464324817e-60*g:y*Math.pow(2,b-150)*(g+8388608)}a.readFloatLE=d.bind(null,u),a.readFloatBE=d.bind(null,c)}(),typeof Float64Array<"u"?function(){var h=new Float64Array([-0]),d=new Uint8Array(h.buffer),m=d[7]===128;function w(b,g,A){h[0]=b,g[A]=d[0],g[A+1]=d[1],g[A+2]=d[2],g[A+3]=d[3],g[A+4]=d[4],g[A+5]=d[5],g[A+6]=d[6],g[A+7]=d[7]}function p(b,g,A){h[0]=b,g[A]=d[7],g[A+1]=d[6],g[A+2]=d[5],g[A+3]=d[4],g[A+4]=d[3],g[A+5]=d[2],g[A+6]=d[1],g[A+7]=d[0]}a.writeDoubleLE=m?w:p,a.writeDoubleBE=m?p:w;function f(b,g){return d[0]=b[g],d[1]=b[g+1],d[2]=b[g+2],d[3]=b[g+3],d[4]=b[g+4],d[5]=b[g+5],d[6]=b[g+6],d[7]=b[g+7],h[0]}function y(b,g){return d[7]=b[g],d[6]=b[g+1],d[5]=b[g+2],d[4]=b[g+3],d[3]=b[g+4],d[2]=b[g+5],d[1]=b[g+6],d[0]=b[g+7],h[0]}a.readDoubleLE=m?f:y,a.readDoubleBE=m?y:f}():function(){function h(m,w,p,f,y,b){var g=f<0?1:0;if(g&&(f=-f),f===0)m(0,y,b+w),m(1/f>0?0:2147483648,y,b+p);else if(isNaN(f))m(0,y,b+w),m(2146959360,y,b+p);else if(f>17976931348623157e292)m(0,y,b+w),m((g<<31|2146435072)>>>0,y,b+p);else{var A;if(f<22250738585072014e-324)A=f/5e-324,m(A>>>0,y,b+w),m((g<<31|A/4294967296)>>>0,y,b+p);else{var T=Math.floor(Math.log(f)/Math.LN2);T===1024&&(T=1023),A=f*Math.pow(2,-T),m(A*4503599627370496>>>0,y,b+w),m((g<<31|T+1023<<20|A*1048576&1048575)>>>0,y,b+p)}}}a.writeDoubleLE=h.bind(null,n,0,4),a.writeDoubleBE=h.bind(null,o,4,0);function d(m,w,p,f,y){var b=m(f,y+w),g=m(f,y+p),A=(g>>31)*2+1,T=g>>>20&2047,O=4294967296*(g&1048575)+b;return T===2047?O?NaN:A*(1/0):T===0?A*5e-324*O:A*Math.pow(2,T-1075)*(O+4503599627370496)}a.readDoubleLE=d.bind(null,u,0,4),a.readDoubleBE=d.bind(null,c,4,0)}(),a}function n(a,h,d){h[d]=a&255,h[d+1]=a>>>8&255,h[d+2]=a>>>16&255,h[d+3]=a>>>24}function o(a,h,d){h[d]=a>>>24,h[d+1]=a>>>16&255,h[d+2]=a>>>8&255,h[d+3]=a&255}function u(a,h){return(a[h]|a[h+1]<<8|a[h+2]<<16|a[h+3]<<24)>>>0}function c(a,h){return(a[h]<<24|a[h+1]<<16|a[h+2]<<8|a[h+3])>>>0}}),Ny=P((exports,module)=>{v(),module.exports=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}}),Ry=P(e=>{v();var t=e;t.length=function(r){for(var n=0,o=0,u=0;u<r.length;++u)o=r.charCodeAt(u),o<128?n+=1:o<2048?n+=2:(o&64512)===55296&&(r.charCodeAt(u+1)&64512)===56320?(++u,n+=4):n+=3;return n},t.read=function(r,n,o){var u=o-n;if(u<1)return"";for(var c=null,a=[],h=0,d;n<o;)d=r[n++],d<128?a[h++]=d:d>191&&d<224?a[h++]=(d&31)<<6|r[n++]&63:d>239&&d<365?(d=((d&7)<<18|(r[n++]&63)<<12|(r[n++]&63)<<6|r[n++]&63)-65536,a[h++]=55296+(d>>10),a[h++]=56320+(d&1023)):a[h++]=(d&15)<<12|(r[n++]&63)<<6|r[n++]&63,h>8191&&((c||(c=[])).push(String.fromCharCode.apply(String,a)),h=0);return c?(h&&c.push(String.fromCharCode.apply(String,a.slice(0,h))),c.join("")):String.fromCharCode.apply(String,a.slice(0,h))},t.write=function(r,n,o){for(var u=o,c,a,h=0;h<r.length;++h)c=r.charCodeAt(h),c<128?n[o++]=c:c<2048?(n[o++]=c>>6|192,n[o++]=c&63|128):(c&64512)===55296&&((a=r.charCodeAt(h+1))&64512)===56320?(c=65536+((c&1023)<<10)+(a&1023),++h,n[o++]=c>>18|240,n[o++]=c>>12&63|128,n[o++]=c>>6&63|128,n[o++]=c&63|128):(n[o++]=c>>12|224,n[o++]=c>>6&63|128,n[o++]=c&63|128);return o-u}}),$y=P((e,t)=>{v(),t.exports=r;function r(n,o,u){var c=u||8192,a=c>>>1,h=null,d=c;return function(m){if(m<1||m>a)return n(m);d+m>c&&(h=n(c),d=0);var w=o.call(h,d,d+=m);return d&7&&(d=(d|7)+1),w}}}),Uy=P((e,t)=>{v(),t.exports=n;var r=Rr();function n(a,h){this.lo=a>>>0,this.hi=h>>>0}var o=n.zero=new n(0,0);o.toNumber=function(){return 0},o.zzEncode=o.zzDecode=function(){return this},o.length=function(){return 1};var u=n.zeroHash="\0\0\0\0\0\0\0\0";n.fromNumber=function(a){if(a===0)return o;var h=a<0;h&&(a=-a);var d=a>>>0,m=(a-d)/4294967296>>>0;return h&&(m=~m>>>0,d=~d>>>0,++d>4294967295&&(d=0,++m>4294967295&&(m=0))),new n(d,m)},n.from=function(a){if(typeof a=="number")return n.fromNumber(a);if(r.isString(a))if(r.Long)a=r.Long.fromString(a);else return n.fromNumber(parseInt(a,10));return a.low||a.high?new n(a.low>>>0,a.high>>>0):o},n.prototype.toNumber=function(a){if(!a&&this.hi>>>31){var h=~this.lo+1>>>0,d=~this.hi>>>0;return h||(d=d+1>>>0),-(h+d*4294967296)}return this.lo+this.hi*4294967296},n.prototype.toLong=function(a){return r.Long?new r.Long(this.lo|0,this.hi|0,Boolean(a)):{low:this.lo|0,high:this.hi|0,unsigned:Boolean(a)}};var c=String.prototype.charCodeAt;n.fromHash=function(a){return a===u?o:new n((c.call(a,0)|c.call(a,1)<<8|c.call(a,2)<<16|c.call(a,3)<<24)>>>0,(c.call(a,4)|c.call(a,5)<<8|c.call(a,6)<<16|c.call(a,7)<<24)>>>0)},n.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},n.prototype.zzEncode=function(){var a=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^a)>>>0,this.lo=(this.lo<<1^a)>>>0,this},n.prototype.zzDecode=function(){var a=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^a)>>>0,this.hi=(this.hi>>>1^a)>>>0,this},n.prototype.length=function(){var a=this.lo,h=(this.lo>>>28|this.hi<<4)>>>0,d=this.hi>>>24;return d===0?h===0?a<16384?a<128?1:2:a<2097152?3:4:h<16384?h<128?5:6:h<2097152?7:8:d<128?9:10}}),Rr=P(e=>{v();var t=e;t.asPromise=Cy(),t.base64=Oy(),t.EventEmitter=Ly(),t.float=Fy(),t.inquire=Ny(),t.utf8=Ry(),t.pool=$y(),t.LongBits=Uy(),t.isNode=Boolean(typeof St<"u"&&St&&St.process&&St.process.versions&&St.process.versions.node),t.global=t.isNode&&St||typeof window<"u"&&window||typeof Tt<"u"&&Tt||e,t.emptyArray=Object.freeze?Object.freeze([]):[],t.emptyObject=Object.freeze?Object.freeze({}):{},t.isInteger=Number.isInteger||function(o){return typeof o=="number"&&isFinite(o)&&Math.floor(o)===o},t.isString=function(o){return typeof o=="string"||o instanceof String},t.isObject=function(o){return o&&typeof o=="object"},t.isset=t.isSet=function(o,u){var c=o[u];return c!=null&&o.hasOwnProperty(u)?typeof c!="object"||(Array.isArray(c)?c.length:Object.keys(c).length)>0:!1},t.Buffer=function(){try{var o=t.inquire("buffer").Buffer;return o.prototype.utf8Write?o:null}catch{return null}}(),t._Buffer_from=null,t._Buffer_allocUnsafe=null,t.newBuffer=function(o){return typeof o=="number"?t.Buffer?t._Buffer_allocUnsafe(o):new t.Array(o):t.Buffer?t._Buffer_from(o):typeof Uint8Array>"u"?o:new Uint8Array(o)},t.Array=typeof Uint8Array<"u"?Uint8Array:Array,t.Long=t.global.dcodeIO&&t.global.dcodeIO.Long||t.global.Long||t.inquire("long"),t.key2Re=/^true|false|0|1$/,t.key32Re=/^-?(?:0|[1-9][0-9]*)$/,t.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,t.longToHash=function(o){return o?t.LongBits.from(o).toHash():t.LongBits.zeroHash},t.longFromHash=function(o,u){var c=t.LongBits.fromHash(o);return t.Long?t.Long.fromBits(c.lo,c.hi,u):c.toNumber(Boolean(u))};function r(o,u,c){for(var a=Object.keys(u),h=0;h<a.length;++h)(o[a[h]]===void 0||!c)&&(o[a[h]]=u[a[h]]);return o}t.merge=r,t.lcFirst=function(o){return o.charAt(0).toLowerCase()+o.substring(1)};function n(o){function u(c,a){if(!(this instanceof u))return new u(c,a);Object.defineProperty(this,"message",{get:function(){return c}}),Error.captureStackTrace?Error.captureStackTrace(this,u):Object.defineProperty(this,"stack",{value:new Error().stack||""}),a&&r(this,a)}return u.prototype=Object.create(Error.prototype,{constructor:{value:u,writable:!0,enumerable:!1,configurable:!0},name:{get(){return o},set:void 0,enumerable:!1,configurable:!0},toString:{value(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),u}t.newError=n,t.ProtocolError=n("ProtocolError"),t.oneOfGetter=function(o){for(var u={},c=0;c<o.length;++c)u[o[c]]=1;return function(){for(var a=Object.keys(this),h=a.length-1;h>-1;--h)if(u[a[h]]===1&&this[a[h]]!==void 0&&this[a[h]]!==null)return a[h]}},t.oneOfSetter=function(o){return function(u){for(var c=0;c<o.length;++c)o[c]!==u&&delete this[o[c]]}},t.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},t._configure=function(){var o=t.Buffer;if(!o){t._Buffer_from=t._Buffer_allocUnsafe=null;return}t._Buffer_from=o.from!==Uint8Array.from&&o.from||function(u,c){return new o(u,c)},t._Buffer_allocUnsafe=o.allocUnsafe||function(u){return new o(u)}}}),of=P((e,t)=>{v(),t.exports=m;var r=Rr(),n,o=r.LongBits,u=r.base64,c=r.utf8;function a(T,O,C){this.fn=T,this.len=O,this.next=void 0,this.val=C}function h(){}function d(T){this.head=T.head,this.tail=T.tail,this.len=T.len,this.next=T.states}function m(){this.len=0,this.head=new a(h,0,0),this.tail=this.head,this.states=null}var w=function(){return r.Buffer?function(){return(m.create=function(){return new n})()}:function(){return new m}};m.create=w(),m.alloc=function(T){return new r.Array(T)},r.Array!==Array&&(m.alloc=r.pool(m.alloc,r.Array.prototype.subarray)),m.prototype._push=function(T,O,C){return this.tail=this.tail.next=new a(T,O,C),this.len+=O,this};function p(T,O,C){O[C]=T&255}function f(T,O,C){for(;T>127;)O[C++]=T&127|128,T>>>=7;O[C]=T}function y(T,O){this.len=T,this.next=void 0,this.val=O}y.prototype=Object.create(a.prototype),y.prototype.fn=f,m.prototype.uint32=function(T){return this.len+=(this.tail=this.tail.next=new y((T=T>>>0)<128?1:T<16384?2:T<2097152?3:T<268435456?4:5,T)).len,this},m.prototype.int32=function(T){return T<0?this._push(b,10,o.fromNumber(T)):this.uint32(T)},m.prototype.sint32=function(T){return this.uint32((T<<1^T>>31)>>>0)};function b(T,O,C){for(;T.hi;)O[C++]=T.lo&127|128,T.lo=(T.lo>>>7|T.hi<<25)>>>0,T.hi>>>=7;for(;T.lo>127;)O[C++]=T.lo&127|128,T.lo=T.lo>>>7;O[C++]=T.lo}m.prototype.uint64=function(T){var O=o.from(T);return this._push(b,O.length(),O)},m.prototype.int64=m.prototype.uint64,m.prototype.sint64=function(T){var O=o.from(T).zzEncode();return this._push(b,O.length(),O)},m.prototype.bool=function(T){return this._push(p,1,T?1:0)};function g(T,O,C){O[C]=T&255,O[C+1]=T>>>8&255,O[C+2]=T>>>16&255,O[C+3]=T>>>24}m.prototype.fixed32=function(T){return this._push(g,4,T>>>0)},m.prototype.sfixed32=m.prototype.fixed32,m.prototype.fixed64=function(T){var O=o.from(T);return this._push(g,4,O.lo)._push(g,4,O.hi)},m.prototype.sfixed64=m.prototype.fixed64,m.prototype.float=function(T){return this._push(r.float.writeFloatLE,4,T)},m.prototype.double=function(T){return this._push(r.float.writeDoubleLE,8,T)};var A=r.Array.prototype.set?function(T,O,C){O.set(T,C)}:function(T,O,C){for(var j=0;j<T.length;++j)O[C+j]=T[j]};m.prototype.bytes=function(T){var O=T.length>>>0;if(!O)return this._push(p,1,0);if(r.isString(T)){var C=m.alloc(O=u.length(T));u.decode(T,C,0),T=C}return this.uint32(O)._push(A,O,T)},m.prototype.string=function(T){var O=c.length(T);return O?this.uint32(O)._push(c.write,O,T):this._push(p,1,0)},m.prototype.fork=function(){return this.states=new d(this),this.head=this.tail=new a(h,0,0),this.len=0,this},m.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new a(h,0,0),this.len=0),this},m.prototype.ldelim=function(){var T=this.head,O=this.tail,C=this.len;return this.reset().uint32(C),C&&(this.tail.next=T.next,this.tail=O,this.len+=C),this},m.prototype.finish=function(){for(var T=this.head.next,O=this.constructor.alloc(this.len),C=0;T;)T.fn(T.val,O,C),C+=T.len,T=T.next;return O},m._configure=function(T){n=T,m.create=w(),n._configure()}}),jy=P((e,t)=>{v(),t.exports=o;var r=of();(o.prototype=Object.create(r.prototype)).constructor=o;var n=Rr();function o(){r.call(this)}o._configure=function(){o.alloc=n._Buffer_allocUnsafe,o.writeBytesBuffer=n.Buffer&&n.Buffer.prototype instanceof Uint8Array&&n.Buffer.prototype.set.name==="set"?function(c,a,h){a.set(c,h)}:function(c,a,h){if(c.copy)c.copy(a,h,0,c.length);else for(var d=0;d<c.length;)a[h++]=c[d++]}},o.prototype.bytes=function(c){n.isString(c)&&(c=n._Buffer_from(c,"base64"));var a=c.length>>>0;return this.uint32(a),a&&this._push(o.writeBytesBuffer,a,c),this};function u(c,a,h){c.length<40?n.utf8.write(c,a,h):a.utf8Write?a.utf8Write(c,h):a.write(c,h)}o.prototype.string=function(c){var a=n.Buffer.byteLength(c);return this.uint32(a),a&&this._push(u,a,c),this},o._configure()}),sf=P((e,t)=>{v(),t.exports=a;var r=Rr(),n,o=r.LongBits,u=r.utf8;function c(f,y){return RangeError("index out of range: "+f.pos+" + "+(y||1)+" > "+f.len)}function a(f){this.buf=f,this.pos=0,this.len=f.length}var h=typeof Uint8Array<"u"?function(f){if(f instanceof Uint8Array||Array.isArray(f))return new a(f);throw Error("illegal buffer")}:function(f){if(Array.isArray(f))return new a(f);throw Error("illegal buffer")},d=function(){return r.Buffer?function(f){return(a.create=function(y){return r.Buffer.isBuffer(y)?new n(y):h(y)})(f)}:h};a.create=d(),a.prototype._slice=r.Array.prototype.subarray||r.Array.prototype.slice,a.prototype.uint32=function(){var f=4294967295;return function(){if(f=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(f=(f|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(f=(f|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(f=(f|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(f=(f|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return f;if((this.pos+=5)>this.len)throw this.pos=this.len,c(this,10);return f}}(),a.prototype.int32=function(){return this.uint32()|0},a.prototype.sint32=function(){var f=this.uint32();return f>>>1^-(f&1)|0};function m(){var f=new o(0,0),y=0;if(this.len-this.pos>4){for(;y<4;++y)if(f.lo=(f.lo|(this.buf[this.pos]&127)<<y*7)>>>0,this.buf[this.pos++]<128)return f;if(f.lo=(f.lo|(this.buf[this.pos]&127)<<28)>>>0,f.hi=(f.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return f;y=0}else{for(;y<3;++y){if(this.pos>=this.len)throw c(this);if(f.lo=(f.lo|(this.buf[this.pos]&127)<<y*7)>>>0,this.buf[this.pos++]<128)return f}return f.lo=(f.lo|(this.buf[this.pos++]&127)<<y*7)>>>0,f}if(this.len-this.pos>4){for(;y<5;++y)if(f.hi=(f.hi|(this.buf[this.pos]&127)<<y*7+3)>>>0,this.buf[this.pos++]<128)return f}else for(;y<5;++y){if(this.pos>=this.len)throw c(this);if(f.hi=(f.hi|(this.buf[this.pos]&127)<<y*7+3)>>>0,this.buf[this.pos++]<128)return f}throw Error("invalid varint encoding")}a.prototype.bool=function(){return this.uint32()!==0};function w(f,y){return(f[y-4]|f[y-3]<<8|f[y-2]<<16|f[y-1]<<24)>>>0}a.prototype.fixed32=function(){if(this.pos+4>this.len)throw c(this,4);return w(this.buf,this.pos+=4)},a.prototype.sfixed32=function(){if(this.pos+4>this.len)throw c(this,4);return w(this.buf,this.pos+=4)|0};function p(){if(this.pos+8>this.len)throw c(this,8);return new o(w(this.buf,this.pos+=4),w(this.buf,this.pos+=4))}a.prototype.float=function(){if(this.pos+4>this.len)throw c(this,4);var f=r.float.readFloatLE(this.buf,this.pos);return this.pos+=4,f},a.prototype.double=function(){if(this.pos+8>this.len)throw c(this,4);var f=r.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,f},a.prototype.bytes=function(){var f=this.uint32(),y=this.pos,b=this.pos+f;if(b>this.len)throw c(this,f);return this.pos+=f,Array.isArray(this.buf)?this.buf.slice(y,b):y===b?new this.buf.constructor(0):this._slice.call(this.buf,y,b)},a.prototype.string=function(){var f=this.bytes();return u.read(f,0,f.length)},a.prototype.skip=function(f){if(typeof f=="number"){if(this.pos+f>this.len)throw c(this,f);this.pos+=f}else do if(this.pos>=this.len)throw c(this);while(this.buf[this.pos++]&128);return this},a.prototype.skipType=function(f){switch(f){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(f=this.uint32()&7)!==4;)this.skipType(f);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+f+" at offset "+this.pos)}return this},a._configure=function(f){n=f,a.create=d(),n._configure();var y=r.Long?"toLong":"toNumber";r.merge(a.prototype,{int64:function(){return m.call(this)[y](!1)},uint64:function(){return m.call(this)[y](!0)},sint64:function(){return m.call(this).zzDecode()[y](!1)},fixed64:function(){return p.call(this)[y](!0)},sfixed64:function(){return p.call(this)[y](!1)}})}}),Py=P((e,t)=>{v(),t.exports=o;var r=sf();(o.prototype=Object.create(r.prototype)).constructor=o;var n=Rr();function o(u){r.call(this,u)}o._configure=function(){n.Buffer&&(o.prototype._slice=n.Buffer.prototype.slice)},o.prototype.string=function(){var u=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+u,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+u,this.len))},o._configure()}),Dy=P((e,t)=>{v(),t.exports=n;var r=Rr();(n.prototype=Object.create(r.EventEmitter.prototype)).constructor=n;function n(o,u,c){if(typeof o!="function")throw TypeError("rpcImpl must be a function");r.EventEmitter.call(this),this.rpcImpl=o,this.requestDelimited=Boolean(u),this.responseDelimited=Boolean(c)}n.prototype.rpcCall=function o(u,c,a,h,d){if(!h)throw TypeError("request must be specified");var m=this;if(!d)return r.asPromise(o,m,u,c,a,h);if(!m.rpcImpl){setTimeout(function(){d(Error("already ended"))},0);return}try{return m.rpcImpl(u,c[m.requestDelimited?"encodeDelimited":"encode"](h).finish(),function(w,p){if(w)return m.emit("error",w,u),d(w);if(p===null){m.end(!0);return}if(!(p instanceof a))try{p=a[m.responseDelimited?"decodeDelimited":"decode"](p)}catch(f){return m.emit("error",f,u),d(f)}return m.emit("data",p,u),d(null,p)})}catch(w){m.emit("error",w,u),setTimeout(function(){d(w)},0);return}},n.prototype.end=function(o){return this.rpcImpl&&(o||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}}),My=P(e=>{v();var t=e;t.Service=Dy()}),zy=P((e,t)=>{v(),t.exports={}}),qy=P(e=>{v();var t=e;t.build="minimal",t.Writer=of(),t.BufferWriter=jy(),t.Reader=sf(),t.BufferReader=Py(),t.util=Rr(),t.rpc=My(),t.roots=zy(),t.configure=r;function r(){t.util._configure(),t.Writer._configure(t.BufferWriter),t.Reader._configure(t.BufferReader)}r()}),$r=P((e,t)=>{v(),t.exports=qy()}),Vy=P((e,t)=>{v(),Object.defineProperty(e,"__esModule",{value:!0}),r.BASE=2166136261;function r(n,o=r.BASE){let u=n.length;for(let c=0;c<u;c++)o^=n.charCodeAt(c),o+=(o<<1)+(o<<4)+(o<<7)+(o<<8)+(o<<24);return o>>>0}e.default=r,t.exports=r}),ha={};pe(ha,{concat:()=>$e});function $e(e,t){t||(t=e.reduce((o,u)=>o+u.length,0));let r=Xh(t),n=0;for(let o of e)r.set(o,n),n+=o.length;return r}var Ur=se(()=>{v(),ef()}),Ky=P((e,t)=>{v();var r="[a-fA-F\\d:]",n=w=>w&&w.includeBoundaries?`(?:(?<=\\s|^)(?=${r})|(?<=${r})(?=\\s|$))`:"",o="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",u="[a-fA-F\\d]{1,4}",c=`
(?:
(?:${u}:){7}(?:${u}|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8
(?:${u}:){6}(?:${o}|:${u}|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4
(?:${u}:){5}(?::${o}|(?::${u}){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4
(?:${u}:){4}(?:(?::${u}){0,1}:${o}|(?::${u}){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4
(?:${u}:){3}(?:(?::${u}){0,2}:${o}|(?::${u}){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4
(?:${u}:){2}(?:(?::${u}){0,3}:${o}|(?::${u}){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4
(?:${u}:){1}(?:(?::${u}){0,4}:${o}|(?::${u}){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4
(?::(?:(?::${u}){0,5}:${o}|(?::${u}){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4
)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1
`.replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),a=new RegExp(`(?:^${o}$)|(?:^${c}$)`),h=new RegExp(`^${o}$`),d=new RegExp(`^${c}$`),m=w=>w&&w.exact?a:new RegExp(`(?:${n(w)}${o}${n(w)})|(?:${n(w)}${c}${n(w)})`,"g");m.v4=w=>w&&w.exact?h:new RegExp(`${n(w)}${o}${n(w)}`,"g"),m.v6=w=>w&&w.exact?d:new RegExp(`${n(w)}${c}${n(w)}`,"g"),t.exports=m}),Wy=P((e,t)=>{v();var r=Ky(),n=o=>r({exact:!0}).test(o);n.v4=o=>r.v4({exact:!0}).test(o),n.v6=o=>r.v6({exact:!0}).test(o),n.version=o=>n(o)?n.v4(o)?4:6:void 0,t.exports=n}),Hy=P((e,t)=>{v();var r=Wy(),{toString:n}=(ye(),Ze(li)),o=r,u=r.v4,c=r.v6,a=function(d,m,w){w=~~w;let p;if(u(d))p=m||new Uint8Array(w+4),d.split(/\./g).map(function(f){p[w++]=parseInt(f,10)&255});else if(c(d)){let f=d.split(":",8),y;for(y=0;y<f.length;y++){let b=u(f[y]),g;b&&(g=a(f[y]),f[y]=n(g.slice(0,2),"base16")),g&&++y<8&&f.splice(y,0,n(g.slice(2,4),"base16"))}if(f[0]==="")for(;f.length<8;)f.unshift("0");else if(f[f.length-1]==="")for(;f.length<8;)f.push("0");else if(f.length<8){for(y=0;y<f.length&&f[y]!=="";y++);let b=[y,"1"];for(y=9-f.length;y>0;y--)b.push("0");f.splice.apply(f,b)}for(p=m||new Uint8Array(w+16),y=0;y<f.length;y++){let b=parseInt(f[y],16);p[w++]=b>>8&255,p[w++]=b&255}}if(!p)throw Error("Invalid ip address: "+d);return p},h=function(d,m,w){m=~~m,w=w||d.length-m;let p=[],f,y=new DataView(d.buffer);if(w===4){for(let b=0;b<w;b++)p.push(d[m+b]);f=p.join(".")}else if(w===16){for(let b=0;b<w;b+=2)p.push(y.getUint16(m+b).toString(16));f=p.join(":"),f=f.replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3"),f=f.replace(/:{3,4}/,"::")}return f};t.exports={isIP:o,isV4:u,isV6:c,toBytes:a,toString:h}}),fa=P((e,t)=>{v();function r(u){if(typeof u=="number"){if(r.codes[u])return r.codes[u];throw new Error("no protocol with code: "+u)}else if(typeof u=="string"){if(r.names[u])return r.names[u];throw new Error("no protocol with name: "+u)}throw new Error("invalid protocol id type: "+u)}var n=-1;r.lengthPrefixedVarSize=n,r.V=n,r.table=[[4,32,"ip4"],[6,16,"tcp"],[33,16,"dccp"],[41,128,"ip6"],[42,n,"ip6zone"],[53,n,"dns","resolvable"],[54,n,"dns4","resolvable"],[55,n,"dns6","resolvable"],[56,n,"dnsaddr","resolvable"],[132,16,"sctp"],[273,16,"udp"],[275,0,"p2p-webrtc-star"],[276,0,"p2p-webrtc-direct"],[277,0,"p2p-stardust"],[290,0,"p2p-circuit"],[301,0,"udt"],[302,0,"utp"],[400,n,"unix",!1,"path"],[421,n,"ipfs"],[421,n,"p2p"],[443,0,"https"],[444,96,"onion"],[445,296,"onion3"],[446,n,"garlic64"],[460,0,"quic"],[477,0,"ws"],[478,0,"wss"],[479,0,"p2p-websocket-star"],[480,0,"http"],[777,n,"memory"]],r.names={},r.codes={},r.table.map(u=>{let c=o.apply(null,u);return r.codes[c.code]=c,r.names[c.name]=c,null}),r.object=o;function o(u,c,a,h,d){return{code:u,size:c,name:a,resolvable:Boolean(h),path:Boolean(d)}}t.exports=r}),Gy=P((e,t)=>{v();var r=Hy(),n=fa(),{CID:o}=(ce(),Ze(aa)),{base32:u}=(Ge(),Ze(oa)),{base58btc:c}=(it(),Ze(po)),a=(He(),Ze(uh)),h=nt(),{toString:d}=(ye(),Ze(li)),{fromString:m}=(Ve(),Ze(rf)),{concat:w}=(Ur(),Ze(ha));t.exports=p;function p(S,F){return F instanceof Uint8Array?p.toString(S,F):p.toBytes(S,F)}p.toString=function(S,F){switch(n(S).code){case 4:case 41:return y(F);case 6:case 273:case 33:case 132:return g(F).toString();case 53:case 54:case 55:case 56:case 400:case 777:return T(F);case 421:return C(F);case 444:return I(F);case 445:return I(F);default:return d(F,"base16")}},p.toBytes=function(S,F){switch(n(S).code){case 4:return f(F);case 41:return f(F);case 6:case 273:case 33:case 132:return b(parseInt(F,10));case 53:case 54:case 55:case 56:case 400:case 777:return A(F);case 421:return O(F);case 444:return j(F);case 445:return B(F);default:return m(F,"base16")}};function f(S){if(!r.isIP(S))throw new Error("invalid ip address");return r.toBytes(S)}function y(S){let F=r.toString(S);if(!F||!r.isIP(F))throw new Error("invalid ip address");return F}function b(S){let F=new ArrayBuffer(2);return new DataView(F).setUint16(0,S),new Uint8Array(F)}function g(S){return new DataView(S.buffer).getUint16(S.byteOffset)}function A(S){let F=m(S),D=Uint8Array.from(h.encode(F.length));return w([D,F],D.length+F.length)}function T(S){let F=h.decode(S);if(S=S.slice(h.decode.bytes),S.length!==F)throw new Error("inconsistent lengths");return d(S)}function O(S){let F;S[0]==="Q"||S[0]==="1"?F=a.decode(c.decode(`z${S}`)).bytes:F=o.parse(S).multihash.bytes;let D=Uint8Array.from(h.encode(F.length));return w([D,F],D.length+F.length)}function C(S){let F=h.decode(S),D=S.slice(h.decode.bytes);if(D.length!==F)throw new Error("inconsistent lengths");return d(D,"base58btc")}function j(S){let F=S.split(":");if(F.length!==2)throw new Error("failed to parse onion addr: "+F+" does not contain a port number");if(F[0].length!==16)throw new Error("failed to parse onion addr: "+F[0]+" not a Tor onion address.");let D=u.decode("b"+F[0]),q=parseInt(F[1],10);if(q<1||q>65536)throw new Error("Port number is not in range(1, 65536)");let J=b(q);return w([D,J],D.length+J.length)}function B(S){let F=S.split(":");if(F.length!==2)throw new Error("failed to parse onion addr: "+F+" does not contain a port number");if(F[0].length!==56)throw new Error("failed to parse onion addr: "+F[0]+" not a Tor onion3 address.");let D=u.decode("b"+F[0]),q=parseInt(F[1],10);if(q<1||q>65536)throw new Error("Port number is not in range(1, 65536)");let J=b(q);return w([D,J],D.length+J.length)}function I(S){let F=S.slice(0,S.length-2),D=S.slice(S.length-2),q=d(F,"base32"),J=g(D);return q+":"+J}}),Jy=P((e,t)=>{v();var r=Gy(),n=fa(),o=nt(),{concat:u}=(Ur(),Ze(ha)),{toString:c}=(ye(),Ze(li));t.exports={stringToStringTuples:a,stringTuplesToString:h,tuplesToStringTuples:m,stringTuplesToTuples:d,bytesToTuples:f,tuplesToBytes:w,bytesToString:y,stringToBytes:b,fromString:g,fromBytes:A,validateBytes:T,isValidBytes:O,cleanPath:C,ParseError:j,protoFromTuple:B,sizeForAddr:p};function a(I){let S=[],F=I.split("/").slice(1);if(F.length===1&&F[0]==="")return[];for(let D=0;D<F.length;D++){let q=F[D],J=n(q);if(J.size===0){S.push([q]);continue}if(D++,D>=F.length)throw j("invalid address: "+I);if(J.path){S.push([q,C(F.slice(D).join("/"))]);break}S.push([q,F[D]])}return S}function h(I){let S=[];return I.map(F=>{let D=B(F);return S.push(D.name),F.length>1&&S.push(F[1]),null}),C(S.join("/"))}function d(I){return I.map(S=>{Array.isArray(S)||(S=[S]);let F=B(S);return S.length>1?[F.code,r.toBytes(F.code,S[1])]:[F.code]})}function m(I){return I.map(S=>{let F=B(S);return S[1]?[F.code,r.toString(F.code,S[1])]:[F.code]})}function w(I){return A(u(I.map(S=>{let F=B(S),D=Uint8Array.from(o.encode(F.code));return S.length>1&&(D=u([D,S[1]])),D})))}function p(I,S){return I.size>0?I.size/8:I.size===0?0:o.decode(S)+o.decode.bytes}function f(I){let S=[],F=0;for(;F<I.length;){let D=o.decode(I,F),q=o.decode.bytes,J=n(D),he=p(J,I.slice(F+q));if(he===0){S.push([D]),F+=q;continue}let xe=I.slice(F+q,F+q+he);if(F+=he+q,F>I.length)throw j("Invalid address Uint8Array: "+c(I,"base16"));S.push([D,xe])}return S}function y(I){let S=f(I),F=m(S);return h(F)}function b(I){I=C(I);let S=a(I),F=d(S);return w(F)}function g(I){return b(I)}function A(I){let S=T(I);if(S)throw S;return Uint8Array.from(I)}function T(I){try{f(I)}catch(S){return S}}function O(I){return T(I)===void 0}function C(I){return"/"+I.trim().split("/").filter(S=>S).join("/")}function j(I){return new Error("Error parsing address: "+I)}function B(I){return n(I[0])}}),af={};pe(af,{equals:()=>da});function da(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0}var pa=se(()=>{v()}),Yy=P((e,t)=>{v();var r=Jy(),n=fa(),o=nt(),{CID:u}=(ce(),Ze(aa)),{base58btc:c}=(it(),Ze(po)),a=Je(),h=Symbol.for("nodejs.util.inspect.custom"),{toString:d}=(ye(),Ze(li)),{equals:m}=(pa(),Ze(af)),w=new Map,p=Symbol.for("@multiformats/js-multiaddr/multiaddr"),f=class{constructor(b){if(b==null&&(b=""),Object.defineProperty(this,p,{value:!0}),b instanceof Uint8Array)this.bytes=r.fromBytes(b);else if(typeof b=="string"){if(b.length>0&&b.charAt(0)!=="/")throw new Error(`multiaddr "${b}" must start with a "/"`);this.bytes=r.fromString(b)}else if(f.isMultiaddr(b))this.bytes=r.fromBytes(b.bytes);else throw new Error("addr must be a string, Buffer, or another Multiaddr")}toString(){return r.bytesToString(this.bytes)}toJSON(){return this.toString()}toOptions(){let b={},g=this.toString().split("/");return b.family=g[1]==="ip4"?4:6,b.host=g[2],b.transport=g[3],b.port=parseInt(g[4]),b}protos(){return this.protoCodes().map(b=>Object.assign({},n(b)))}protoCodes(){let b=[],g=this.bytes,A=0;for(;A<g.length;){let T=o.decode(g,A),O=o.decode.bytes,C=n(T);A+=r.sizeForAddr(C,g.slice(A+O))+O,b.push(T)}return b}protoNames(){return this.protos().map(b=>b.name)}tuples(){return r.bytesToTuples(this.bytes)}stringTuples(){let b=r.bytesToTuples(this.bytes);return r.tuplesToStringTuples(b)}encapsulate(b){return b=new f(b),new f(this.toString()+b.toString())}decapsulate(b){let g=b.toString(),A=this.toString(),T=A.lastIndexOf(g);if(T<0)throw new Error("Address "+this+" does not contain subaddress: "+b);return new f(A.slice(0,T))}decapsulateCode(b){let g=this.tuples();for(let A=g.length-1;A>=0;A--)if(g[A][0]===b)return new f(r.tuplesToBytes(g.slice(0,A)));return this}getPeerId(){try{let b=this.stringTuples().filter(g=>g[0]===n.names.ipfs.code).pop();if(b&&b[1]){let g=b[1];return g[0]==="Q"||g[0]==="1"?d(c.decode(`z${g}`),"base58btc"):d(u.parse(g).multihash.bytes,"base58btc")}return null}catch{return null}}getPath(){let b=null;try{b=this.stringTuples().filter(g=>!!n(g[0]).path)[0][1],b||(b=null)}catch{b=null}return b}equals(b){return m(this.bytes,b.bytes)}async resolve(){let b=this.protos().find(A=>A.resolvable);if(!b)return[this];let g=w.get(b.name);if(!g)throw a(new Error(`no available resolver for ${b.name}`),"ERR_NO_AVAILABLE_RESOLVER");return(await g(this)).map(A=>new f(A))}nodeAddress(){let b=this.protoCodes(),g=this.protoNames(),A=this.toString().split("/").slice(1);if(A.length<4)throw new Error('multiaddr must have a valid format: "/{ip4, ip6, dns4, dns6}/{address}/{tcp, udp}/{port}".');if(b[0]!==4&&b[0]!==41&&b[0]!==54&&b[0]!==55)throw new Error(`no protocol with name: "'${g[0]}'". Must have a valid family name: "{ip4, ip6, dns4, dns6}".`);if(A[2]!=="tcp"&&A[2]!=="udp")throw new Error(`no protocol with name: "'${g[1]}'". Must have a valid transport protocol: "{tcp, udp}".`);return{family:b[0]===41||b[0]===55?6:4,address:A[1],port:parseInt(A[3])}}isThinWaistAddress(b){let g=(b||this).protos();return!(g.length!==2||g[0].code!==4&&g[0].code!==41||g[1].code!==6&&g[1].code!==273)}static fromNodeAddress(b,g){if(!b)throw new Error("requires node address object");if(!g)throw new Error("requires transport protocol");let A;switch(b.family){case 4:A="ip4";break;case 6:A="ip6";break;default:throw Error(`Invalid addr family. Got '${b.family}' instead of 4 or 6`)}return new f("/"+[A,b.address,g,b.port].join("/"))}static isName(b){return f.isMultiaddr(b)?b.protos().some(g=>g.resolvable):!1}static isMultiaddr(b){return b instanceof f||Boolean(b&&b[p])}[h](){return"<Multiaddr "+d(this.bytes,"base16")+" - "+r.bytesToString(this.bytes)+">"}inspect(){return"<Multiaddr "+d(this.bytes,"base16")+" - "+r.bytesToString(this.bytes)+">"}};f.protocols=n,f.resolvers=w;function y(b){return new f(b)}t.exports={Multiaddr:f,multiaddr:y,protocols:n,resolvers:w}}),Qy=P((e,t)=>{v(),t.exports=c,t.exports.format=a,t.exports.parse=h;var r=/\B(?=(\d{3})+(?!\d))/g,n=/(?:\.0*|(\.[^0]+)0+)$/,o={b:1,kb:1<<10,mb:1<<20,gb:1<<30,tb:Math.pow(1024,4),pb:Math.pow(1024,5)},u=/^((-|\+)?(\d+(?:\.\d+)?)) *(kb|mb|gb|tb|pb)$/i;function c(d,m){return typeof d=="string"?h(d):typeof d=="number"?a(d,m):null}function a(d,m){if(!Number.isFinite(d))return null;var w=Math.abs(d),p=m&&m.thousandsSeparator||"",f=m&&m.unitSeparator||"",y=m&&m.decimalPlaces!==void 0?m.decimalPlaces:2,b=Boolean(m&&m.fixedDecimals),g=m&&m.unit||"";(!g||!o[g.toLowerCase()])&&(w>=o.pb?g="PB":w>=o.tb?g="TB":w>=o.gb?g="GB":w>=o.mb?g="MB":w>=o.kb?g="KB":g="B");var A=d/o[g.toLowerCase()],T=A.toFixed(y);return b||(T=T.replace(n,"$1")),p&&(T=T.split(".").map(function(O,C){return C===0?O.replace(r,p):O}).join(".")),T+f+g}function h(d){if(typeof d=="number"&&!isNaN(d))return d;if(typeof d!="string")return null;var m=u.exec(d),w,p="b";return m?(w=parseFloat(m[1]),p=m[4].toLowerCase()):(w=parseInt(d,10),p="b"),isNaN(w)?null:Math.floor(o[p]*w)}}),Zy=P((e,t)=>{v(),t.exports=r=>{if(Object.prototype.toString.call(r)!=="[object Object]")return!1;let n=Object.getPrototypeOf(r);return n===null||n===Object.prototype}}),Xy=P((e,t)=>{v();var r=Zy(),{hasOwnProperty:n}=Object.prototype,{propertyIsEnumerable:o}=Object,u=(b,g,A)=>Object.defineProperty(b,g,{value:A,writable:!0,enumerable:!0,configurable:!0}),c=e,a={concatArrays:!1,ignoreUndefined:!1},h=b=>{let g=[];for(let A in b)n.call(b,A)&&g.push(A);if(Object.getOwnPropertySymbols){let A=Object.getOwnPropertySymbols(b);for(let T of A)o.call(b,T)&&g.push(T)}return g};function d(b){return Array.isArray(b)?m(b):r(b)?w(b):b}function m(b){let g=b.slice(0,0);return h(b).forEach(A=>{u(g,A,d(b[A]))}),g}function w(b){let g=Object.getPrototypeOf(b)===null?Object.create(null):{};return h(b).forEach(A=>{u(g,A,d(b[A]))}),g}var p=(b,g,A,T)=>(A.forEach(O=>{typeof g[O]>"u"&&T.ignoreUndefined||(O in b&&b[O]!==Object.getPrototypeOf(b)?u(b,O,y(b[O],g[O],T)):u(b,O,d(g[O])))}),b),f=(b,g,A)=>{let T=b.slice(0,0),O=0;return[b,g].forEach(C=>{let j=[];for(let B=0;B<C.length;B++)!n.call(C,B)||(j.push(String(B)),C===b?u(T,O++,C[B]):u(T,O++,d(C[B])));T=p(T,C,h(C).filter(B=>!j.includes(B)),A)}),T};function y(b,g,A){return A.concatArrays&&Array.isArray(b)&&Array.isArray(g)?f(b,g,A):!r(g)||!r(b)?d(g):p(b,g,h(g),A)}t.exports=function(...b){let g=y(d(a),this!==c&&this||{},a),A={_:{}};for(let T of b)if(T!==void 0){if(!r(T))throw new TypeError("`"+T+"` is not an Option Object");A=y(A,{_:T},g)}return A._}}),eg=P((e,t)=>{v();var r=Object.prototype.hasOwnProperty,n="~";function o(){}Object.create&&(o.prototype=Object.create(null),new o().__proto__||(n=!1));function u(d,m,w){this.fn=d,this.context=m,this.once=w||!1}function c(d,m,w,p,f){if(typeof w!="function")throw new TypeError("The listener must be a function");var y=new u(w,p||d,f),b=n?n+m:m;return d._events[b]?d._events[b].fn?d._events[b]=[d._events[b],y]:d._events[b].push(y):(d._events[b]=y,d._eventsCount++),d}function a(d,m){--d._eventsCount===0?d._events=new o:delete d._events[m]}function h(){this._events=new o,this._eventsCount=0}h.prototype.eventNames=function(){var d=[],m,w;if(this._eventsCount===0)return d;for(w in m=this._events)r.call(m,w)&&d.push(n?w.slice(1):w);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(m)):d},h.prototype.listeners=function(d){var m=n?n+d:d,w=this._events[m];if(!w)return[];if(w.fn)return[w.fn];for(var p=0,f=w.length,y=new Array(f);p<f;p++)y[p]=w[p].fn;return y},h.prototype.listenerCount=function(d){var m=n?n+d:d,w=this._events[m];return w?w.fn?1:w.length:0},h.prototype.emit=function(d,m,w,p,f,y){var b=n?n+d:d;if(!this._events[b])return!1;var g=this._events[b],A=arguments.length,T,O;if(g.fn){switch(g.once&&this.removeListener(d,g.fn,void 0,!0),A){case 1:return g.fn.call(g.context),!0;case 2:return g.fn.call(g.context,m),!0;case 3:return g.fn.call(g.context,m,w),!0;case 4:return g.fn.call(g.context,m,w,p),!0;case 5:return g.fn.call(g.context,m,w,p,f),!0;case 6:return g.fn.call(g.context,m,w,p,f,y),!0}for(O=1,T=new Array(A-1);O<A;O++)T[O-1]=arguments[O];g.fn.apply(g.context,T)}else{var C=g.length,j;for(O=0;O<C;O++)switch(g[O].once&&this.removeListener(d,g[O].fn,void 0,!0),A){case 1:g[O].fn.call(g[O].context);break;case 2:g[O].fn.call(g[O].context,m);break;case 3:g[O].fn.call(g[O].context,m,w);break;case 4:g[O].fn.call(g[O].context,m,w,p);break;default:if(!T)for(j=1,T=new Array(A-1);j<A;j++)T[j-1]=arguments[j];g[O].fn.apply(g[O].context,T)}}return!0},h.prototype.on=function(d,m,w){return c(this,d,m,w,!1)},h.prototype.once=function(d,m,w){return c(this,d,m,w,!0)},h.prototype.removeListener=function(d,m,w,p){var f=n?n+d:d;if(!this._events[f])return this;if(!m)return a(this,f),this;var y=this._events[f];if(y.fn)y.fn===m&&(!p||y.once)&&(!w||y.context===w)&&a(this,f);else{for(var b=0,g=[],A=y.length;b<A;b++)(y[b].fn!==m||p&&!y[b].once||w&&y[b].context!==w)&&g.push(y[b]);g.length?this._events[f]=g.length===1?g[0]:g:a(this,f)}return this},h.prototype.removeAllListeners=function(d){var m;return d?(m=n?n+d:d,this._events[m]&&a(this,m)):(this._events=new o,this._eventsCount=0),this},h.prototype.off=h.prototype.removeListener,h.prototype.addListener=h.prototype.on,h.prefixed=n,h.EventEmitter=h,typeof t<"u"&&(t.exports=h)}),wn=P((e,t)=>{v();var r=async function*(n,o){for await(let u of n)await o(u)&&(yield u)};t.exports=r}),bn=P((e,t)=>{v();var r=async n=>{for await(let o of n);};t.exports=r}),uf=P((e,t)=>{v();var r=async n=>{for await(let o of n)return o};t.exports=r}),ci=P((e,t)=>{v();var r=async function*(n,o){for await(let u of n)yield o(u)};t.exports=r}),tg=P((e,t)=>{v();async function*r(n,o=1){let u=[];o<1&&(o=1);for await(let c of n)for(u.push(c);u.length>=o;)yield u.slice(0,o),u=u.slice(o);for(;u.length;)yield u.slice(0,o),u=u.slice(o)}t.exports=r}),rg=P((e,t)=>{v();var r=tg();async function*n(o,u=1){for await(let c of r(o,u)){let a=c.map(h=>h().then(d=>({ok:!0,value:d}),d=>({ok:!1,err:d})));for(let h=0;h<a.length;h++){let d=await a[h];if(d.ok)yield d.value;else throw d.err}}}t.exports=n}),ng=P((e,t)=>{v(),t.exports=class{constructor(r){if(!(r>0)||(r-1&r)!==0)throw new Error("Max size for a FixedFIFO should be a power of two");this.buffer=new Array(r),this.mask=r-1,this.top=0,this.btm=0,this.next=null}push(r){return this.buffer[this.top]!==void 0?!1:(this.buffer[this.top]=r,this.top=this.top+1&this.mask,!0)}shift(){let r=this.buffer[this.btm];if(r!==void 0)return this.buffer[this.btm]=void 0,this.btm=this.btm+1&this.mask,r}peek(){return this.buffer[this.btm]}isEmpty(){return this.buffer[this.btm]===void 0}}}),ig=P((e,t)=>{v();var r=ng();t.exports=class{constructor(n){this.hwm=n||16,this.head=new r(this.hwm),this.tail=this.head}push(n){if(!this.head.push(n)){let o=this.head;this.head=o.next=new r(2*this.head.buffer.length),this.head.push(n)}}shift(){let n=this.tail.shift();if(n===void 0&&this.tail.next){let o=this.tail.next;return this.tail.next=null,this.tail=o,this.tail.shift()}return n}peek(){return this.tail.peek()}isEmpty(){return this.head.isEmpty()}}}),og=P((e,t)=>{v();var r=ig();t.exports=n=>{n=n||{};let o;typeof n=="function"?(o=n,n={}):o=n.onEnd;let u=new r,c,a,h,d=()=>{if(!u.isEmpty()){if(n.writev){let T,O=[];for(;!u.isEmpty();){if(T=u.shift(),T.error)throw T.error;O.push(T.value)}return{done:T.done,value:O}}let A=u.shift();if(A.error)throw A.error;return A}return h?{done:!0}:new Promise((A,T)=>{a=O=>(a=null,O.error?T(O.error):n.writev&&!O.done?A({done:O.done,value:[O.value]}):A(O),c)})},m=A=>a?a(A):(u.push(A),c),w=A=>(u=new r,a?a({error:A}):(u.push({error:A}),c)),p=A=>h?c:m({done:!1,value:A}),f=A=>h?c:(h=!0,A?w(A):m({done:!0})),y=()=>(u=new r,f(),{done:!0}),b=A=>(f(A),{done:!0});if(c={[Symbol.asyncIterator](){return this},next:d,return:y,throw:b,push:p,end:f},!o)return c;let g=c;return c={[Symbol.asyncIterator](){return this},next(){return g.next()},throw(A){return g.throw(A),o&&(o(A),o=null),{done:!0}},return(){return g.return(),o&&(o(),o=null),{done:!0}},push:p,end(A){return g.end(A),o&&(o(A),o=null),c}},c}}),ya=P((e,t)=>{v();var r=og(),n=async function*(...o){let u=r();setTimeout(async()=>{try{await Promise.all(o.map(async c=>{for await(let a of c)u.push(a)})),u.end()}catch(c){u.end(c)}},0),yield*u};t.exports=n}),vo=P((e,t)=>{v();var r=async n=>{let o=[];for await(let u of n)o.push(u);return o};t.exports=r}),Eo=P((e,t)=>{v();var r=async function*(n,o){let u=0;if(!(o<1)){for await(let c of n)if(yield c,u++,u===o)return}};t.exports=r}),sg=P((e,t)=>{v();var r=vo(),n=async function*(o,u){yield*(await r(o)).sort(u)};t.exports=n}),ag=P(e=>{v(),e.supports=function(...t){let r=t.reduce((n,o)=>Object.assign(n,o),{});return Object.assign(r,{snapshots:r.snapshots||!1,permanence:r.permanence||!1,seek:r.seek||!1,clear:r.clear||!1,getMany:r.getMany||!1,keyIterator:r.keyIterator||!1,valueIterator:r.valueIterator||!1,iteratorNextv:r.iteratorNextv||!1,iteratorAll:r.iteratorAll||!1,status:r.status||!1,createIfMissing:r.createIfMissing||!1,errorIfExists:r.errorIfExists||!1,deferredOpen:r.deferredOpen||!1,promises:r.promises||!1,streams:r.streams||!1,encodings:Object.assign({},r.encodings),events:Object.assign({},r.events),additionalMethods:Object.assign({},r.additionalMethods)})}}),Ct=P((e,t)=>{v(),t.exports=class extends Error{constructor(r,n){super(r||""),typeof n=="object"&&n!==null&&(n.code&&(this.code=String(n.code)),n.expected&&(this.expected=!0),n.transient&&(this.transient=!0),n.cause&&(this.cause=n.cause)),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}}}),lf=P((e,t)=>{v();var r=null;t.exports=function(){return r===null&&(r={textEncoder:new TextEncoder,textDecoder:new TextDecoder}),r}}),cf=P(e=>{v();var t=Ct(),r=new Set(["buffer","view","utf8"]),n=class{constructor(o){if(this.encode=o.encode||this.encode,this.decode=o.decode||this.decode,this.name=o.name||this.name,this.format=o.format||this.format,typeof this.encode!="function")throw new TypeError("The 'encode' property must be a function");if(typeof this.decode!="function")throw new TypeError("The 'decode' property must be a function");if(this.encode=this.encode.bind(this),this.decode=this.decode.bind(this),typeof this.name!="string"||this.name==="")throw new TypeError("The 'name' property must be a string");if(typeof this.format!="string"||!r.has(this.format))throw new TypeError("The 'format' property must be one of 'buffer', 'view', 'utf8'");o.createViewTranscoder&&(this.createViewTranscoder=o.createViewTranscoder),o.createBufferTranscoder&&(this.createBufferTranscoder=o.createBufferTranscoder),o.createUTF8Transcoder&&(this.createUTF8Transcoder=o.createUTF8Transcoder)}get commonName(){return this.name.split("+")[0]}createBufferTranscoder(){throw new t(`Encoding '${this.name}' cannot be transcoded to 'buffer'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}createViewTranscoder(){throw new t(`Encoding '${this.name}' cannot be transcoded to 'view'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}createUTF8Transcoder(){throw new t(`Encoding '${this.name}' cannot be transcoded to 'utf8'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}};e.Encoding=n}),hf=P(e=>{v();var{Buffer:t}=fo()||{},{Encoding:r}=cf(),n=lf(),o=class extends r{constructor(a){super({...a,format:"buffer"})}createViewTranscoder(){return new u({encode:this.encode,decode:a=>this.decode(t.from(a.buffer,a.byteOffset,a.byteLength)),name:`${this.name}+view`})}createBufferTranscoder(){return this}},u=class extends r{constructor(a){super({...a,format:"view"})}createBufferTranscoder(){return new o({encode:a=>{let h=this.encode(a);return t.from(h.buffer,h.byteOffset,h.byteLength)},decode:this.decode,name:`${this.name}+buffer`})}createViewTranscoder(){return this}},c=class extends r{constructor(a){super({...a,format:"utf8"})}createBufferTranscoder(){return new o({encode:a=>t.from(this.encode(a),"utf8"),decode:a=>this.decode(a.toString("utf8")),name:`${this.name}+buffer`})}createViewTranscoder(){let{textEncoder:a,textDecoder:h}=n();return new u({encode:d=>a.encode(this.encode(d)),decode:d=>this.decode(h.decode(d)),name:`${this.name}+view`})}createUTF8Transcoder(){return this}};e.BufferFormat=o,e.ViewFormat=u,e.UTF8Format=c}),ug=P(e=>{v();var{Buffer:t}=fo()||{Buffer:{isBuffer:()=>!1}},{textEncoder:r,textDecoder:n}=lf()(),{BufferFormat:o,ViewFormat:u,UTF8Format:c}=hf(),a=h=>h;e.utf8=new c({encode:function(h){return t.isBuffer(h)?h.toString("utf8"):ArrayBuffer.isView(h)?n.decode(h):String(h)},decode:a,name:"utf8",createViewTranscoder(){return new u({encode:function(h){return ArrayBuffer.isView(h)?h:r.encode(h)},decode:function(h){return n.decode(h)},name:`${this.name}+view`})},createBufferTranscoder(){return new o({encode:function(h){return t.isBuffer(h)?h:ArrayBuffer.isView(h)?t.from(h.buffer,h.byteOffset,h.byteLength):t.from(String(h),"utf8")},decode:function(h){return h.toString("utf8")},name:`${this.name}+buffer`})}}),e.json=new c({encode:JSON.stringify,decode:JSON.parse,name:"json"}),e.buffer=new o({encode:function(h){return t.isBuffer(h)?h:ArrayBuffer.isView(h)?t.from(h.buffer,h.byteOffset,h.byteLength):t.from(String(h),"utf8")},decode:a,name:"buffer",createViewTranscoder(){return new u({encode:function(h){return ArrayBuffer.isView(h)?h:t.from(String(h),"utf8")},decode:function(h){return t.from(h.buffer,h.byteOffset,h.byteLength)},name:`${this.name}+view`})}}),e.view=new u({encode:function(h){return ArrayBuffer.isView(h)?h:r.encode(h)},decode:a,name:"view",createBufferTranscoder(){return new o({encode:function(h){return t.isBuffer(h)?h:ArrayBuffer.isView(h)?t.from(h.buffer,h.byteOffset,h.byteLength):t.from(String(h),"utf8")},decode:a,name:`${this.name}+buffer`})}}),e.hex=new o({encode:function(h){return t.isBuffer(h)?h:t.from(String(h),"hex")},decode:function(h){return h.toString("hex")},name:"hex"}),e.base64=new o({encode:function(h){return t.isBuffer(h)?h:t.from(String(h),"base64")},decode:function(h){return h.toString("base64")},name:"base64"})}),lg=P(e=>{v();var t=Ct(),r=ug(),{Encoding:n}=cf(),{BufferFormat:o,ViewFormat:u,UTF8Format:c}=hf(),a=Symbol("formats"),h=Symbol("encodings"),d=new Set(["buffer","view","utf8"]),m=class{constructor(g){if(Array.isArray(g)){if(!g.every(A=>d.has(A)))throw new TypeError("Format must be one of 'buffer', 'view', 'utf8'")}else throw new TypeError("The first argument 'formats' must be an array");this[h]=new Map,this[a]=new Set(g);for(let A in r)try{this.encoding(A)}catch(T){if(T.code!=="LEVEL_ENCODING_NOT_SUPPORTED")throw T}}encodings(){return Array.from(new Set(this[h].values()))}encoding(g){let A=this[h].get(g);if(A===void 0){if(typeof g=="string"&&g!==""){if(A=y[g],!A)throw new t(`Encoding '${g}' is not found`,{code:"LEVEL_ENCODING_NOT_FOUND"})}else{if(typeof g!="object"||g===null)throw new TypeError("First argument 'encoding' must be a string or object");A=w(g)}let{name:T,format:O}=A;if(!this[a].has(O))if(this[a].has("view"))A=A.createViewTranscoder();else if(this[a].has("buffer"))A=A.createBufferTranscoder();else if(this[a].has("utf8"))A=A.createUTF8Transcoder();else throw new t(`Encoding '${T}' cannot be transcoded`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"});for(let C of[g,T,A.name,A.commonName])this[h].set(C,A)}return A}};e.Transcoder=m;function w(g){if(g instanceof n)return g;let A="type"in g&&typeof g.type=="string"?g.type:void 0,T=g.name||A||`anonymous-${b++}`;switch(p(g)){case"view":return new u({...g,name:T});case"utf8":return new c({...g,name:T});case"buffer":return new o({...g,name:T});default:throw new TypeError("Format must be one of 'buffer', 'view', 'utf8'")}}function p(g){return"format"in g&&g.format!==void 0?g.format:"buffer"in g&&typeof g.buffer=="boolean"?g.buffer?"buffer":"utf8":"code"in g&&Number.isInteger(g.code)?"view":"buffer"}var f={binary:r.buffer,"utf-8":r.utf8},y={...r,...f},b=0}),cg=P((e,t)=>{v();var r=typeof Reflect=="object"?Reflect:null,n=r&&typeof r.apply=="function"?r.apply:function(B,I,S){return Function.prototype.apply.call(B,I,S)},o;r&&typeof r.ownKeys=="function"?o=r.ownKeys:Object.getOwnPropertySymbols?o=function(B){return Object.getOwnPropertyNames(B).concat(Object.getOwnPropertySymbols(B))}:o=function(B){return Object.getOwnPropertyNames(B)};function u(B){console&&console.warn&&console.warn(B)}var c=Number.isNaN||function(B){return B!==B};function a(){a.init.call(this)}t.exports=a,t.exports.once=O,a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var h=10;function d(B){if(typeof B!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof B)}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return h},set:function(B){if(typeof B!="number"||B<0||c(B))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+B+".");h=B}}),a.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(B){if(typeof B!="number"||B<0||c(B))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+B+".");return this._maxListeners=B,this};function m(B){return B._maxListeners===void 0?a.defaultMaxListeners:B._maxListeners}a.prototype.getMaxListeners=function(){return m(this)},a.prototype.emit=function(B){for(var I=[],S=1;S<arguments.length;S++)I.push(arguments[S]);var F=B==="error",D=this._events;if(D!==void 0)F=F&&D.error===void 0;else if(!F)return!1;if(F){var q;if(I.length>0&&(q=I[0]),q instanceof Error)throw q;var J=new Error("Unhandled error."+(q?" ("+q.message+")":""));throw J.context=q,J}var he=D[B];if(he===void 0)return!1;if(typeof he=="function")n(he,this,I);else for(var xe=he.length,Ie=g(he,xe),S=0;S<xe;++S)n(Ie[S],this,I);return!0};function w(B,I,S,F){var D,q,J;if(d(S),q=B._events,q===void 0?(q=B._events=Object.create(null),B._eventsCount=0):(q.newListener!==void 0&&(B.emit("newListener",I,S.listener?S.listener:S),q=B._events),J=q[I]),J===void 0)J=q[I]=S,++B._eventsCount;else if(typeof J=="function"?J=q[I]=F?[S,J]:[J,S]:F?J.unshift(S):J.push(S),D=m(B),D>0&&J.length>D&&!J.warned){J.warned=!0;var he=new Error("Possible EventEmitter memory leak detected. "+J.length+" "+String(I)+" listeners added. Use emitter.setMaxListeners() to increase limit");he.name="MaxListenersExceededWarning",he.emitter=B,he.type=I,he.count=J.length,u(he)}return B}a.prototype.addListener=function(B,I){return w(this,B,I,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(B,I){return w(this,B,I,!0)};function p(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function f(B,I,S){var F={fired:!1,wrapFn:void 0,target:B,type:I,listener:S},D=p.bind(F);return D.listener=S,F.wrapFn=D,D}a.prototype.once=function(B,I){return d(I),this.on(B,f(this,B,I)),this},a.prototype.prependOnceListener=function(B,I){return d(I),this.prependListener(B,f(this,B,I)),this},a.prototype.removeListener=function(B,I){var S,F,D,q,J;if(d(I),F=this._events,F===void 0)return this;if(S=F[B],S===void 0)return this;if(S===I||S.listener===I)--this._eventsCount===0?this._events=Object.create(null):(delete F[B],F.removeListener&&this.emit("removeListener",B,S.listener||I));else if(typeof S!="function"){for(D=-1,q=S.length-1;q>=0;q--)if(S[q]===I||S[q].listener===I){J=S[q].listener,D=q;break}if(D<0)return this;D===0?S.shift():A(S,D),S.length===1&&(F[B]=S[0]),F.removeListener!==void 0&&this.emit("removeListener",B,J||I)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(B){var I,S,F;if(S=this._events,S===void 0)return this;if(S.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):S[B]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete S[B]),this;if(arguments.length===0){var D=Object.keys(S),q;for(F=0;F<D.length;++F)q=D[F],q!=="removeListener"&&this.removeAllListeners(q);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(I=S[B],typeof I=="function")this.removeListener(B,I);else if(I!==void 0)for(F=I.length-1;F>=0;F--)this.removeListener(B,I[F]);return this};function y(B,I,S){var F=B._events;if(F===void 0)return[];var D=F[I];return D===void 0?[]:typeof D=="function"?S?[D.listener||D]:[D]:S?T(D):g(D,D.length)}a.prototype.listeners=function(B){return y(this,B,!0)},a.prototype.rawListeners=function(B){return y(this,B,!1)},a.listenerCount=function(B,I){return typeof B.listenerCount=="function"?B.listenerCount(I):b.call(B,I)},a.prototype.listenerCount=b;function b(B){var I=this._events;if(I!==void 0){var S=I[B];if(typeof S=="function")return 1;if(S!==void 0)return S.length}return 0}a.prototype.eventNames=function(){return this._eventsCount>0?o(this._events):[]};function g(B,I){for(var S=new Array(I),F=0;F<I;++F)S[F]=B[F];return S}function A(B,I){for(;I+1<B.length;I++)B[I]=B[I+1];B.pop()}function T(B){for(var I=new Array(B.length),S=0;S<I.length;++S)I[S]=B[S].listener||B[S];return I}function O(B,I){return new Promise(function(S,F){function D(J){B.removeListener(I,q),F(J)}function q(){typeof B.removeListener=="function"&&B.removeListener("error",D),S([].slice.call(arguments))}j(B,I,q,{once:!0}),I!=="error"&&C(B,D,{once:!0})})}function C(B,I,S){typeof B.on=="function"&&j(B,"error",I,S)}function j(B,I,S,F){if(typeof B.on=="function")F.once?B.once(I,S):B.on(I,S);else if(typeof B.addEventListener=="function")B.addEventListener(I,function D(q){F.once&&B.removeEventListener(I,D),S(q)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof B)}}),hg=P((e,t)=>{v(),t.exports=typeof queueMicrotask=="function"?queueMicrotask:r=>Promise.resolve().then(r)}),xo=P(e=>{v();var t=hg();e.fromCallback=function(r,n){if(r===void 0){var o=new Promise(function(u,c){r=function(a,h){a?c(a):u(h)}});r[n!==void 0?n:"promise"]=o}else if(typeof r!="function")throw new TypeError("Callback must be a function");return r},e.fromPromise=function(r,n){if(n===void 0)return r;r.then(function(o){t(()=>n(null,o))}).catch(function(o){t(()=>n(o))})}}),ga=P(e=>{v(),e.getCallback=function(t,r){return typeof t=="function"?t:r},e.getOptions=function(t,r){return typeof t=="object"&&t!==null?t:r!==void 0?r:{}}}),Cr=P(e=>{v();var{fromCallback:t}=xo(),r=Ct(),{getOptions:n,getCallback:o}=ga(),u=Symbol("promise"),c=Symbol("callback"),a=Symbol("working"),h=Symbol("handleOne"),d=Symbol("handleMany"),m=Symbol("autoClose"),w=Symbol("finishWork"),p=Symbol("returnMany"),f=Symbol("closing"),y=Symbol("handleClose"),b=Symbol("closed"),g=Symbol("closeCallbacks"),A=Symbol("keyEncoding"),T=Symbol("valueEncoding"),O=Symbol("abortOnClose"),C=Symbol("legacy"),j=Symbol("keys"),B=Symbol("values"),I=Symbol("limit"),S=Symbol("count"),F=Object.freeze({}),D=()=>{},q=!1,J=class{constructor(M,x,N){if(typeof M!="object"||M===null){let L=M===null?"null":typeof M;throw new TypeError(`The first argument must be an abstract-level database, received ${L}`)}if(typeof x!="object"||x===null)throw new TypeError("The second argument must be an options object");this[b]=!1,this[g]=[],this[a]=!1,this[f]=!1,this[m]=!1,this[c]=null,this[h]=this[h].bind(this),this[d]=this[d].bind(this),this[y]=this[y].bind(this),this[A]=x[A],this[T]=x[T],this[C]=N,this[I]=Number.isInteger(x.limit)&&x.limit>=0?x.limit:1/0,this[S]=0,this[O]=!!x.abortOnClose,this.db=M,this.db.attachResource(this),this.nextTick=M.nextTick}get count(){return this[S]}get limit(){return this[I]}next(M){let x;if(M===void 0)x=new Promise((N,L)=>{M=(U,K,ne)=>{U?L(U):this[C]?K===void 0&&ne===void 0?N():N([K,ne]):N(K)}});else if(typeof M!="function")throw new TypeError("Callback must be a function");return this[f]?this.nextTick(M,new r("Iterator is not open: cannot call next() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[a]?this.nextTick(M,new r("Iterator is busy: cannot call next() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(this[a]=!0,this[c]=M,this[S]>=this[I]?this.nextTick(this[h],null):this._next(this[h])),x}_next(M){this.nextTick(M)}nextv(M,x,N){return N=o(x,N),N=t(N,u),x=n(x,F),Number.isInteger(M)?(this[f]?this.nextTick(N,new r("Iterator is not open: cannot call nextv() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[a]?this.nextTick(N,new r("Iterator is busy: cannot call nextv() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(M<1&&(M=1),this[I]<1/0&&(M=Math.min(M,this[I]-this[S])),this[a]=!0,this[c]=N,M<=0?this.nextTick(this[d],null,[]):this._nextv(M,x,this[d])),N[u]):(this.nextTick(N,new TypeError("The first argument 'size' must be an integer")),N[u])}_nextv(M,x,N){let L=[],U=(K,ne,fe)=>{if(K)return N(K);if(this[C]?ne===void 0&&fe===void 0:ne===void 0)return N(null,L);L.push(this[C]?[ne,fe]:ne),L.length===M?N(null,L):this._next(U)};this._next(U)}all(M,x){return x=o(M,x),x=t(x,u),M=n(M,F),this[f]?this.nextTick(x,new r("Iterator is not open: cannot call all() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[a]?this.nextTick(x,new r("Iterator is busy: cannot call all() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(this[a]=!0,this[c]=x,this[m]=!0,this[S]>=this[I]?this.nextTick(this[d],null,[]):this._all(M,this[d])),x[u]}_all(M,x){let N=this[S],L=[],U=()=>{let ne=this[I]<1/0?Math.min(1e3,this[I]-N):1e3;ne<=0?this.nextTick(x,null,L):this._nextv(ne,F,K)},K=(ne,fe)=>{ne?x(ne):fe.length===0?x(null,L):(L.push.apply(L,fe),N+=fe.length,U())};U()}[w](){let M=this[c];return this[O]&&M===null?D:(this[a]=!1,this[c]=null,this[f]&&this._close(this[y]),M)}[p](M,x,N){this[m]?this.close(M.bind(null,x,N)):M(x,N)}seek(M,x){if(x=n(x,F),!this[f]){if(this[a])throw new r("Iterator is busy: cannot call seek() until next() has completed",{code:"LEVEL_ITERATOR_BUSY"});{let N=this.db.keyEncoding(x.keyEncoding||this[A]),L=N.format;x.keyEncoding!==L&&(x={...x,keyEncoding:L});let U=this.db.prefixKey(N.encode(M),L);this._seek(U,x)}}}_seek(M,x){throw new r("Iterator does not support seek()",{code:"LEVEL_NOT_SUPPORTED"})}close(M){return M=t(M,u),this[b]?this.nextTick(M):this[f]?this[g].push(M):(this[f]=!0,this[g].push(M),this[a]?this[O]&&this[w]()(new r("Aborted on iterator close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this._close(this[y])),M[u]}_close(M){this.nextTick(M)}[y](){this[b]=!0,this.db.detachResource(this);let M=this[g];this[g]=[];for(let x of M)x()}async*[Symbol.asyncIterator](){try{let M;for(;(M=await this.next())!==void 0;)yield M}finally{this[b]||await this.close()}}},he=class extends J{constructor(M,x){super(M,x,!0),this[j]=x.keys!==!1,this[B]=x.values!==!1}[h](M,x,N){let L=this[w]();if(M)return L(M);try{x=this[j]&&x!==void 0?this[A].decode(x):void 0,N=this[B]&&N!==void 0?this[T].decode(N):void 0}catch(U){return L(new Te("entry",U))}x===void 0&&N===void 0||this[S]++,L(null,x,N)}[d](M,x){let N=this[w]();if(M)return this[p](N,M);try{for(let L of x){let U=L[0],K=L[1];L[0]=this[j]&&U!==void 0?this[A].decode(U):void 0,L[1]=this[B]&&K!==void 0?this[T].decode(K):void 0}}catch(L){return this[p](N,new Te("entries",L))}this[S]+=x.length,this[p](N,null,x)}end(M){return!q&&typeof console<"u"&&(q=!0,console.warn(new r("The iterator.end() method was renamed to close() and end() is an alias that will be removed in a future version",{code:"LEVEL_LEGACY"}))),this.close(M)}},xe=class extends J{constructor(M,x){super(M,x,!1)}[h](M,x){let N=this[w]();if(M)return N(M);try{x=x!==void 0?this[A].decode(x):void 0}catch(L){return N(new Te("key",L))}x!==void 0&&this[S]++,N(null,x)}[d](M,x){let N=this[w]();if(M)return this[p](N,M);try{for(let L=0;L<x.length;L++){let U=x[L];x[L]=U!==void 0?this[A].decode(U):void 0}}catch(L){return this[p](N,new Te("keys",L))}this[S]+=x.length,this[p](N,null,x)}},Ie=class extends J{constructor(M,x){super(M,x,!1)}[h](M,x){let N=this[w]();if(M)return N(M);try{x=x!==void 0?this[T].decode(x):void 0}catch(L){return N(new Te("value",L))}x!==void 0&&this[S]++,N(null,x)}[d](M,x){let N=this[w]();if(M)return this[p](N,M);try{for(let L=0;L<x.length;L++){let U=x[L];x[L]=U!==void 0?this[T].decode(U):void 0}}catch(L){return this[p](N,new Te("values",L))}this[S]+=x.length,this[p](N,null,x)}},Te=class extends r{constructor(M,x){super(`Iterator could not decode ${M}`,{code:"LEVEL_DECODE_ERROR",cause:x})}};for(let M of["_ended property","_nexting property","_end method"])Object.defineProperty(he.prototype,M.split(" ")[0],{get(){throw new r(`The ${M} has been removed`,{code:"LEVEL_LEGACY"})},set(){throw new r(`The ${M} has been removed`,{code:"LEVEL_LEGACY"})}});he.keyEncoding=A,he.valueEncoding=T,e.AbstractIterator=he,e.AbstractKeyIterator=xe,e.AbstractValueIterator=Ie}),fg=P(e=>{v();var{AbstractKeyIterator:t,AbstractValueIterator:r}=Cr(),n=Symbol("iterator"),o=Symbol("callback"),u=Symbol("handleOne"),c=Symbol("handleMany"),a=class extends t{constructor(d,m){super(d,m),this[n]=d.iterator({...m,keys:!0,values:!1}),this[u]=this[u].bind(this),this[c]=this[c].bind(this)}},h=class extends r{constructor(d,m){super(d,m),this[n]=d.iterator({...m,keys:!1,values:!0}),this[u]=this[u].bind(this),this[c]=this[c].bind(this)}};for(let d of[a,h]){let m=d===a,w=m?p=>p[0]:p=>p[1];d.prototype._next=function(p){this[o]=p,this[n].next(this[u])},d.prototype[u]=function(p,f,y){let b=this[o];p?b(p):b(null,m?f:y)},d.prototype._nextv=function(p,f,y){this[o]=y,this[n].nextv(p,f,this[c])},d.prototype._all=function(p,f){this[o]=f,this[n].all(p,this[c])},d.prototype[c]=function(p,f){let y=this[o];p?y(p):y(null,f.map(w))},d.prototype._seek=function(p,f){this[n].seek(p,f)},d.prototype._close=function(p){this[n].close(p)}}e.DefaultKeyIterator=a,e.DefaultValueIterator=h}),dg=P(e=>{v();var{AbstractIterator:t,AbstractKeyIterator:r,AbstractValueIterator:n}=Cr(),o=Ct(),u=Symbol("nut"),c=Symbol("undefer"),a=Symbol("factory"),h=class extends t{constructor(w,p){super(w,p),this[u]=null,this[a]=()=>w.iterator(p),this.db.defer(()=>this[c]())}},d=class extends r{constructor(w,p){super(w,p),this[u]=null,this[a]=()=>w.keys(p),this.db.defer(()=>this[c]())}},m=class extends n{constructor(w,p){super(w,p),this[u]=null,this[a]=()=>w.values(p),this.db.defer(()=>this[c]())}};for(let w of[h,d,m])w.prototype[c]=function(){this.db.status==="open"&&(this[u]=this[a]())},w.prototype._next=function(p){this[u]!==null?this[u].next(p):this.db.status==="opening"?this.db.defer(()=>this._next(p)):this.nextTick(p,new o("Iterator is not open: cannot call next() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},w.prototype._nextv=function(p,f,y){this[u]!==null?this[u].nextv(p,f,y):this.db.status==="opening"?this.db.defer(()=>this._nextv(p,f,y)):this.nextTick(y,new o("Iterator is not open: cannot call nextv() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},w.prototype._all=function(p,f){this[u]!==null?this[u].all(f):this.db.status==="opening"?this.db.defer(()=>this._all(p,f)):this.nextTick(f,new o("Iterator is not open: cannot call all() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},w.prototype._seek=function(p,f){this[u]!==null?this[u]._seek(p,f):this.db.status==="opening"&&this.db.defer(()=>this._seek(p,f))},w.prototype._close=function(p){this[u]!==null?this[u].close(p):this.db.status==="opening"?this.db.defer(()=>this._close(p)):this.nextTick(p)};e.DeferredIterator=h,e.DeferredKeyIterator=d,e.DeferredValueIterator=m}),ff=P(e=>{v();var{fromCallback:t}=xo(),r=Ct(),{getCallback:n,getOptions:o}=ga(),u=Symbol("promise"),c=Symbol("status"),a=Symbol("operations"),h=Symbol("finishClose"),d=Symbol("closeCallbacks"),m=class{constructor(w){if(typeof w!="object"||w===null){let p=w===null?"null":typeof w;throw new TypeError(`The first argument must be an abstract-level database, received ${p}`)}this[a]=[],this[d]=[],this[c]="open",this[h]=this[h].bind(this),this.db=w,this.db.attachResource(this),this.nextTick=w.nextTick}get length(){return this[a].length}put(w,p,f){if(this[c]!=="open")throw new r("Batch is not open: cannot call put() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});let y=this.db._checkKey(w)||this.db._checkValue(p);if(y)throw y;let b=f&&f.sublevel!=null?f.sublevel:this.db,g=f,A=b.keyEncoding(f&&f.keyEncoding),T=b.valueEncoding(f&&f.valueEncoding),O=A.format;f={...f,keyEncoding:O,valueEncoding:T.format},b!==this.db&&(f.sublevel=null);let C=b.prefixKey(A.encode(w),O),j=T.encode(p);return this._put(C,j,f),this[a].push({...g,type:"put",key:w,value:p}),this}_put(w,p,f){}del(w,p){if(this[c]!=="open")throw new r("Batch is not open: cannot call del() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});let f=this.db._checkKey(w);if(f)throw f;let y=p&&p.sublevel!=null?p.sublevel:this.db,b=p,g=y.keyEncoding(p&&p.keyEncoding),A=g.format;return p={...p,keyEncoding:A},y!==this.db&&(p.sublevel=null),this._del(y.prefixKey(g.encode(w),A),p),this[a].push({...b,type:"del",key:w}),this}_del(w,p){}clear(){if(this[c]!=="open")throw new r("Batch is not open: cannot call clear() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});return this._clear(),this[a]=[],this}_clear(){}write(w,p){return p=n(w,p),p=t(p,u),w=o(w),this[c]!=="open"?this.nextTick(p,new r("Batch is not open: cannot call write() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"})):this.length===0?this.close(p):(this[c]="writing",this._write(w,f=>{this[c]="closing",this[d].push(()=>p(f)),f||this.db.emit("batch",this[a]),this._close(this[h])})),p[u]}_write(w,p){}close(w){return w=t(w,u),this[c]==="closing"?this[d].push(w):this[c]==="closed"?this.nextTick(w):(this[d].push(w),this[c]!=="writing"&&(this[c]="closing",this._close(this[h]))),w[u]}_close(w){this.nextTick(w)}[h](){this[c]="closed",this.db.detachResource(this);let w=this[d];this[d]=[];for(let p of w)p()}};e.AbstractChainedBatch=m}),pg=P(e=>{v();var{AbstractChainedBatch:t}=ff(),r=Ct(),n=Symbol("encoded"),o=class extends t{constructor(u){super(u),this[n]=[]}_put(u,c,a){this[n].push({...a,type:"put",key:u,value:c})}_del(u,c){this[n].push({...c,type:"del",key:u})}_clear(){this[n]=[]}_write(u,c){this.db.status==="opening"?this.db.defer(()=>this._write(u,c)):this.db.status==="open"?this[n].length===0?this.nextTick(c):this.db._batch(this[n],u,c):this.nextTick(c,new r("Batch is not open: cannot call write() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"}))}};e.DefaultChainedBatch=o}),yg=P((e,t)=>{v();var r=Ct(),n=Object.prototype.hasOwnProperty,o=new Set(["lt","lte","gt","gte"]);t.exports=function(u,c){let a={};for(let h in u)if(!!n.call(u,h)&&!(h==="keyEncoding"||h==="valueEncoding")){if(h==="start"||h==="end")throw new r(`The legacy range option '${h}' has been removed`,{code:"LEVEL_LEGACY"});if(h==="encoding")throw new r("The levelup-style 'encoding' alias has been removed, use 'valueEncoding' instead",{code:"LEVEL_LEGACY"});o.has(h)?a[h]=c.encode(u[h]):a[h]=u[h]}return a.reverse=!!a.reverse,a.limit=Number.isInteger(a.limit)&&a.limit>=0?a.limit:-1,a}}),df=P((e,t)=>{v();var r;t.exports=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window<"u"?window:St):n=>(r||(r=Promise.resolve())).then(n).catch(o=>setTimeout(()=>{throw o},0))}),gg=P((e,t)=>{v();var r=df();t.exports=function(n,...o){o.length===0?r(n):r(()=>n(...o))}}),wg=P(e=>{v();var{AbstractIterator:t,AbstractKeyIterator:r,AbstractValueIterator:n}=Cr(),o=Symbol("unfix"),u=Symbol("iterator"),c=Symbol("handleOne"),a=Symbol("handleMany"),h=Symbol("callback"),d=class extends t{constructor(p,f,y,b){super(p,f),this[u]=y,this[o]=b,this[c]=this[c].bind(this),this[a]=this[a].bind(this),this[h]=null}[c](p,f,y){let b=this[h];if(p)return b(p);f!==void 0&&(f=this[o](f)),b(p,f,y)}[a](p,f){let y=this[h];if(p)return y(p);for(let b of f){let g=b[0];g!==void 0&&(b[0]=this[o](g))}y(p,f)}},m=class extends r{constructor(p,f,y,b){super(p,f),this[u]=y,this[o]=b,this[c]=this[c].bind(this),this[a]=this[a].bind(this),this[h]=null}[c](p,f){let y=this[h];if(p)return y(p);f!==void 0&&(f=this[o](f)),y(p,f)}[a](p,f){let y=this[h];if(p)return y(p);for(let b=0;b<f.length;b++){let g=f[b];g!==void 0&&(f[b]=this[o](g))}y(p,f)}},w=class extends n{constructor(p,f,y){super(p,f),this[u]=y}};for(let p of[d,m])p.prototype._next=function(f){this[h]=f,this[u].next(this[c])},p.prototype._nextv=function(f,y,b){this[h]=b,this[u].nextv(f,y,this[a])},p.prototype._all=function(f,y){this[h]=y,this[u].all(f,this[a])};for(let p of[w])p.prototype._next=function(f){this[u].next(f)},p.prototype._nextv=function(f,y,b){this[u].nextv(f,y,b)},p.prototype._all=function(f,y){this[u].all(f,y)};for(let p of[d,m,w])p.prototype._seek=function(f,y){this[u].seek(f,y)},p.prototype._close=function(f){this[u].close(f)};e.AbstractSublevelIterator=d,e.AbstractSublevelKeyIterator=m,e.AbstractSublevelValueIterator=w}),bg=P((e,t)=>{v();var r=Ct(),{Buffer:n}=fo()||{},{AbstractSublevelIterator:o,AbstractSublevelKeyIterator:u,AbstractSublevelValueIterator:c}=wg(),a=Symbol("prefix"),h=Symbol("upperBound"),d=Symbol("prefixRange"),m=Symbol("parent"),w=Symbol("unfix"),p=new TextEncoder,f={separator:"!"};t.exports=function({AbstractLevel:O}){class C extends O{static defaults(B){if(typeof B=="string")throw new r("The subleveldown string shorthand for { separator } has been removed",{code:"LEVEL_LEGACY"});if(B&&B.open)throw new r("The subleveldown open option has been removed",{code:"LEVEL_LEGACY"});return B==null?f:B.separator?B:{...B,separator:"!"}}constructor(B,I,S){let{separator:F,manifest:D,...q}=C.defaults(S);I=T(I,F);let J=F.charCodeAt(0)+1,he=B[m]||B;if(!p.encode(I).every(Te=>Te>J&&Te<127))throw new r(`Prefix must use bytes > ${J} < ${127}`,{code:"LEVEL_INVALID_PREFIX"});super(y(he,D),q);let xe=(B.prefix||"")+F+I+F,Ie=xe.slice(0,-1)+String.fromCharCode(J);this[m]=he,this[a]=new g(xe),this[h]=new g(Ie),this[w]=new A,this.nextTick=he.nextTick}prefixKey(B,I){if(I==="utf8")return this[a].utf8+B;if(B.byteLength===0)return this[a][I];if(I==="view"){let S=this[a].view,F=new Uint8Array(S.byteLength+B.byteLength);return F.set(S,0),F.set(B,S.byteLength),F}else{let S=this[a].buffer;return n.concat([S,B],S.byteLength+B.byteLength)}}[d](B,I){B.gte!==void 0?B.gte=this.prefixKey(B.gte,I):B.gt!==void 0?B.gt=this.prefixKey(B.gt,I):B.gte=this[a][I],B.lte!==void 0?B.lte=this.prefixKey(B.lte,I):B.lt!==void 0?B.lt=this.prefixKey(B.lt,I):B.lte=this[h][I]}get prefix(){return this[a].utf8}get db(){return this[m]}_open(B,I){this[m].open({passive:!0},I)}_put(B,I,S,F){this[m].put(B,I,S,F)}_get(B,I,S){this[m].get(B,I,S)}_getMany(B,I,S){this[m].getMany(B,I,S)}_del(B,I,S){this[m].del(B,I,S)}_batch(B,I,S){this[m].batch(B,I,S)}_clear(B,I){this[d](B,B.keyEncoding),this[m].clear(B,I)}_iterator(B){this[d](B,B.keyEncoding);let I=this[m].iterator(B),S=this[w].get(this[a].utf8.length,B.keyEncoding);return new o(this,B,I,S)}_keys(B){this[d](B,B.keyEncoding);let I=this[m].keys(B),S=this[w].get(this[a].utf8.length,B.keyEncoding);return new u(this,B,I,S)}_values(B){this[d](B,B.keyEncoding);let I=this[m].values(B);return new c(this,B,I)}}return{AbstractSublevel:C}};var y=function(O,C){return{...O.supports,createIfMissing:!1,errorIfExists:!1,events:{},additionalMethods:{},...C,encodings:{utf8:b(O,"utf8"),buffer:b(O,"buffer"),view:b(O,"view")}}},b=function(O,C){return O.supports.encodings[C]?O.keyEncoding(C).name===C:!1},g=class{constructor(O){this.utf8=O,this.view=p.encode(O),this.buffer=n?n.from(this.view.buffer,0,this.view.byteLength):{}}},A=class{constructor(){this.cache=new Map}get(O,C){let j=this.cache.get(C);return j===void 0&&(C==="view"?j=function(B,I){return I.subarray(B)}.bind(null,O):j=function(B,I){return I.slice(B)}.bind(null,O),this.cache.set(C,j)),j}},T=function(O,C){let j=0,B=O.length;for(;j<B&&O[j]===C;)j++;for(;B>j&&O[B-1]===C;)B--;return O.slice(j,B)}}),_l=P(e=>{v();var{supports:t}=ag(),{Transcoder:r}=lg(),{EventEmitter:n}=cg(),{fromCallback:o}=xo(),u=Ct(),{AbstractIterator:c}=Cr(),{DefaultKeyIterator:a,DefaultValueIterator:h}=fg(),{DeferredIterator:d,DeferredKeyIterator:m,DeferredValueIterator:w}=dg(),{DefaultChainedBatch:p}=pg(),{getCallback:f,getOptions:y}=ga(),b=yg(),g=Symbol("promise"),A=Symbol("landed"),T=Symbol("resources"),O=Symbol("closeResources"),C=Symbol("operations"),j=Symbol("undefer"),B=Symbol("deferOpen"),I=Symbol("options"),S=Symbol("status"),F=Symbol("defaultOptions"),D=Symbol("transcoder"),q=Symbol("keyEncoding"),J=Symbol("valueEncoding"),he=()=>{},xe=class extends n{constructor(x,N){if(super(),typeof x!="object"||x===null)throw new TypeError("The first argument 'manifest' must be an object");N=y(N);let{keyEncoding:L,valueEncoding:U,passive:K,...ne}=N;this[T]=new Set,this[C]=[],this[B]=!0,this[I]=ne,this[S]="opening",this.supports=t(x,{status:!0,promises:!0,clear:!0,getMany:!0,deferredOpen:!0,snapshots:x.snapshots!==!1,permanence:x.permanence!==!1,keyIterator:!0,valueIterator:!0,iteratorNextv:!0,iteratorAll:!0,encodings:x.encodings||{},events:Object.assign({},x.events,{opening:!0,open:!0,closing:!0,closed:!0,put:!0,del:!0,batch:!0,clear:!0})}),this[D]=new r(M(this)),this[q]=this[D].encoding(L||"utf8"),this[J]=this[D].encoding(U||"utf8");for(let fe of this[D].encodings())this.supports.encodings[fe.commonName]||(this.supports.encodings[fe.commonName]=!0);this[F]={empty:Object.freeze({}),entry:Object.freeze({keyEncoding:this[q].commonName,valueEncoding:this[J].commonName}),key:Object.freeze({keyEncoding:this[q].commonName})},this.nextTick(()=>{this[B]&&this.open({passive:!1},he)})}get status(){return this[S]}keyEncoding(x){return this[D].encoding(x!=null?x:this[q])}valueEncoding(x){return this[D].encoding(x!=null?x:this[J])}open(x,N){N=f(x,N),N=o(N,g),x={...this[I],...y(x)},x.createIfMissing=x.createIfMissing!==!1,x.errorIfExists=!!x.errorIfExists;let L=U=>{this[S]==="closing"||this[S]==="opening"?this.once(A,U?()=>L(U):L):this[S]!=="open"?N(new u("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN",cause:U})):N()};return x.passive?this[S]==="opening"?this.once(A,L):this.nextTick(L):this[S]==="closed"||this[B]?(this[B]=!1,this[S]="opening",this.emit("opening"),this._open(x,U=>{if(U){this[S]="closed",this[O](()=>{this.emit(A),L(U)}),this[j]();return}this[S]="open",this[j](),this.emit(A),this[S]==="open"&&this.emit("open"),this[S]==="open"&&this.emit("ready"),L()})):this[S]==="open"?this.nextTick(L):this.once(A,()=>this.open(x,N)),N[g]}_open(x,N){this.nextTick(N)}close(x){x=o(x,g);let N=L=>{this[S]==="opening"||this[S]==="closing"?this.once(A,L?N(L):N):this[S]!=="closed"?x(new u("Database is not closed",{code:"LEVEL_DATABASE_NOT_CLOSED",cause:L})):x()};if(this[S]==="open"){this[S]="closing",this.emit("closing");let L=U=>{this[S]="open",this[j](),this.emit(A),N(U)};this[O](()=>{this._close(U=>{if(U)return L(U);this[S]="closed",this[j](),this.emit(A),this[S]==="closed"&&this.emit("closed"),N()})})}else this[S]==="closed"?this.nextTick(N):this.once(A,()=>this.close(x));return x[g]}[O](x){if(this[T].size===0)return this.nextTick(x);let N=this[T].size,L=!0,U=()=>{--N===0&&(L?this.nextTick(x):x())};for(let K of this[T])K.close(U);L=!1,this[T].clear()}_close(x){this.nextTick(x)}get(x,N,L){if(L=f(N,L),L=o(L,g),N=y(N,this[F].entry),this[S]==="opening")return this.defer(()=>this.get(x,N,L)),L[g];if(Te(this,L))return L[g];let U=this._checkKey(x);if(U)return this.nextTick(L,U),L[g];let K=this.keyEncoding(N.keyEncoding),ne=this.valueEncoding(N.valueEncoding),fe=K.format,de=ne.format;return(N.keyEncoding!==fe||N.valueEncoding!==de)&&(N=Object.assign({},N,{keyEncoding:fe,valueEncoding:de})),this._get(this.prefixKey(K.encode(x),fe),N,(Z,ge)=>{if(Z)return(Z.code==="LEVEL_NOT_FOUND"||Z.notFound||/NotFound/i.test(Z))&&(Z.code||(Z.code="LEVEL_NOT_FOUND"),Z.notFound||(Z.notFound=!0),Z.status||(Z.status=404)),L(Z);try{ge=ne.decode(ge)}catch(le){return L(new u("Could not decode value",{code:"LEVEL_DECODE_ERROR",cause:le}))}L(null,ge)}),L[g]}_get(x,N,L){this.nextTick(L,new Error("NotFound"))}getMany(x,N,L){if(L=f(N,L),L=o(L,g),N=y(N,this[F].entry),this[S]==="opening")return this.defer(()=>this.getMany(x,N,L)),L[g];if(Te(this,L))return L[g];if(!Array.isArray(x))return this.nextTick(L,new TypeError("The first argument 'keys' must be an array")),L[g];if(x.length===0)return this.nextTick(L,null,[]),L[g];let U=this.keyEncoding(N.keyEncoding),K=this.valueEncoding(N.valueEncoding),ne=U.format,fe=K.format;(N.keyEncoding!==ne||N.valueEncoding!==fe)&&(N=Object.assign({},N,{keyEncoding:ne,valueEncoding:fe}));let de=new Array(x.length);for(let Z=0;Z<x.length;Z++){let ge=x[Z],le=this._checkKey(ge);if(le)return this.nextTick(L,le),L[g];de[Z]=this.prefixKey(U.encode(ge),ne)}return this._getMany(de,N,(Z,ge)=>{if(Z)return L(Z);try{for(let le=0;le<ge.length;le++)ge[le]!==void 0&&(ge[le]=K.decode(ge[le]))}catch(le){return L(new u(`Could not decode one or more of ${ge.length} value(s)`,{code:"LEVEL_DECODE_ERROR",cause:le}))}L(null,ge)}),L[g]}_getMany(x,N,L){this.nextTick(L,null,new Array(x.length).fill(void 0))}put(x,N,L,U){if(U=f(L,U),U=o(U,g),L=y(L,this[F].entry),this[S]==="opening")return this.defer(()=>this.put(x,N,L,U)),U[g];if(Te(this,U))return U[g];let K=this._checkKey(x)||this._checkValue(N);if(K)return this.nextTick(U,K),U[g];let ne=this.keyEncoding(L.keyEncoding),fe=this.valueEncoding(L.valueEncoding),de=ne.format,Z=fe.format;(L.keyEncoding!==de||L.valueEncoding!==Z)&&(L=Object.assign({},L,{keyEncoding:de,valueEncoding:Z}));let ge=this.prefixKey(ne.encode(x),de),le=fe.encode(N);return this._put(ge,le,L,Ce=>{if(Ce)return U(Ce);this.emit("put",x,N),U()}),U[g]}_put(x,N,L,U){this.nextTick(U)}del(x,N,L){if(L=f(N,L),L=o(L,g),N=y(N,this[F].key),this[S]==="opening")return this.defer(()=>this.del(x,N,L)),L[g];if(Te(this,L))return L[g];let U=this._checkKey(x);if(U)return this.nextTick(L,U),L[g];let K=this.keyEncoding(N.keyEncoding),ne=K.format;return N.keyEncoding!==ne&&(N=Object.assign({},N,{keyEncoding:ne})),this._del(this.prefixKey(K.encode(x),ne),N,fe=>{if(fe)return L(fe);this.emit("del",x),L()}),L[g]}_del(x,N,L){this.nextTick(L)}batch(x,N,L){if(!arguments.length){if(this[S]==="opening")return new p(this);if(this[S]!=="open")throw new u("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._chainedBatch()}if(typeof x=="function"?L=x:L=f(N,L),L=o(L,g),N=y(N,this[F].empty),this[S]==="opening")return this.defer(()=>this.batch(x,N,L)),L[g];if(Te(this,L))return L[g];if(!Array.isArray(x))return this.nextTick(L,new TypeError("The first argument 'operations' must be an array")),L[g];if(x.length===0)return this.nextTick(L),L[g];let U=new Array(x.length),{keyEncoding:K,valueEncoding:ne,...fe}=N;for(let de=0;de<x.length;de++){if(typeof x[de]!="object"||x[de]===null)return this.nextTick(L,new TypeError("A batch operation must be an object")),L[g];let Z=Object.assign({},x[de]);if(Z.type!=="put"&&Z.type!=="del")return this.nextTick(L,new TypeError("A batch operation must have a type property that is 'put' or 'del'")),L[g];let ge=this._checkKey(Z.key);if(ge)return this.nextTick(L,ge),L[g];let le=Z.sublevel!=null?Z.sublevel:this,Ce=le.keyEncoding(Z.keyEncoding||K),qe=Ce.format;if(Z.key=le.prefixKey(Ce.encode(Z.key),qe),Z.keyEncoding=qe,Z.type==="put"){let et=this._checkValue(Z.value);if(et)return this.nextTick(L,et),L[g];let Ke=le.valueEncoding(Z.valueEncoding||ne);Z.value=Ke.encode(Z.value),Z.valueEncoding=Ke.format}le!==this&&(Z.sublevel=null),U[de]=Z}return this._batch(U,fe,de=>{if(de)return L(de);this.emit("batch",x),L()}),L[g]}_batch(x,N,L){this.nextTick(L)}sublevel(x,N){return this._sublevel(x,Ie.defaults(N))}_sublevel(x,N){return new Ie(this,x,N)}prefixKey(x,N){return x}clear(x,N){if(N=f(x,N),N=o(N,g),x=y(x,this[F].empty),this[S]==="opening")return this.defer(()=>this.clear(x,N)),N[g];if(Te(this,N))return N[g];let L=x,U=this.keyEncoding(x.keyEncoding);return x=b(x,U),x.keyEncoding=U.format,x.limit===0?this.nextTick(N):this._clear(x,K=>{if(K)return N(K);this.emit("clear",L),N()}),N[g]}_clear(x,N){this.nextTick(N)}iterator(x){let N=this.keyEncoding(x&&x.keyEncoding),L=this.valueEncoding(x&&x.valueEncoding);if(x=b(x,N),x.keys=x.keys!==!1,x.values=x.values!==!1,x[c.keyEncoding]=N,x[c.valueEncoding]=L,x.keyEncoding=N.format,x.valueEncoding=L.format,this[S]==="opening")return new d(this,x);if(this[S]!=="open")throw new u("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._iterator(x)}_iterator(x){return new c(this,x)}keys(x){let N=this.keyEncoding(x&&x.keyEncoding),L=this.valueEncoding(x&&x.valueEncoding);if(x=b(x,N),x[c.keyEncoding]=N,x[c.valueEncoding]=L,x.keyEncoding=N.format,x.valueEncoding=L.format,this[S]==="opening")return new m(this,x);if(this[S]!=="open")throw new u("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._keys(x)}_keys(x){return new a(this,x)}values(x){let N=this.keyEncoding(x&&x.keyEncoding),L=this.valueEncoding(x&&x.valueEncoding);if(x=b(x,N),x[c.keyEncoding]=N,x[c.valueEncoding]=L,x.keyEncoding=N.format,x.valueEncoding=L.format,this[S]==="opening")return new w(this,x);if(this[S]!=="open")throw new u("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._values(x)}_values(x){return new h(this,x)}defer(x){if(typeof x!="function")throw new TypeError("The first argument must be a function");this[C].push(x)}[j](){if(this[C].length===0)return;let x=this[C];this[C]=[];for(let N of x)N()}attachResource(x){if(typeof x!="object"||x===null||typeof x.close!="function")throw new TypeError("The first argument must be a resource object");this[T].add(x)}detachResource(x){this[T].delete(x)}_chainedBatch(){return new p(this)}_checkKey(x){if(x==null)return new u("Key cannot be null or undefined",{code:"LEVEL_INVALID_KEY"})}_checkValue(x){if(x==null)return new u("Value cannot be null or undefined",{code:"LEVEL_INVALID_VALUE"})}};xe.prototype.nextTick=gg();var{AbstractSublevel:Ie}=bg()({AbstractLevel:xe});e.AbstractLevel=xe,e.AbstractSublevel=Ie;var Te=function(x,N){return x[S]!=="open"?(x.nextTick(N,new u("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"})),!0):!1},M=function(x){return Object.keys(x.supports.encodings).filter(N=>!!x.supports.encodings[N])}}),pf=P(e=>{v(),e.AbstractLevel=_l().AbstractLevel,e.AbstractSublevel=_l().AbstractSublevel,e.AbstractIterator=Cr().AbstractIterator,e.AbstractKeyIterator=Cr().AbstractKeyIterator,e.AbstractValueIterator=Cr().AbstractValueIterator,e.AbstractChainedBatch=ff().AbstractChainedBatch}),mg=P((e,t)=>{v(),t.exports=n;var r=df();function n(o,u,c){if(typeof u!="number")throw new Error("second argument must be a Number");let a,h,d,m,w,p=!0,f;Array.isArray(o)?(a=[],d=h=o.length):(m=Object.keys(o),a={},d=h=m.length);function y(g){function A(){c&&c(g,a),c=null}p?r(A):A()}function b(g,A,T){if(a[g]=T,A&&(w=!0),--d===0||A)y(A);else if(!w&&f<h){let O;m?(O=m[f],f+=1,o[O](function(C,j){b(O,C,j)})):(O=f,f+=1,o[O](function(C,j){b(O,C,j)}))}}f=u,d?m?m.some(function(g,A){return o[g](function(T,O){b(g,T,O)}),A===u-1}):o.some(function(g,A){return g(function(T,O){b(A,T,O)}),A===u-1}):y(null),p=!1}}),yf=P((e,t)=>{v(),t.exports=function(r){let n=r.gte!==void 0?r.gte:r.gt!==void 0?r.gt:void 0,o=r.lte!==void 0?r.lte:r.lt!==void 0?r.lt:void 0,u=r.gte===void 0,c=r.lte===void 0;return n!==void 0&&o!==void 0?IDBKeyRange.bound(n,o,u,c):n!==void 0?IDBKeyRange.lowerBound(n,u):o!==void 0?IDBKeyRange.upperBound(o,c):null}}),gf=P((e,t)=>{v();var r=new TextEncoder;t.exports=function(n){return n instanceof Uint8Array?n:n instanceof ArrayBuffer?new Uint8Array(n):r.encode(n)}}),vg=P(e=>{v();var{AbstractIterator:t}=pf(),r=yf(),n=gf(),o=Symbol("cache"),u=Symbol("finished"),c=Symbol("options"),a=Symbol("currentOptions"),h=Symbol("position"),d=Symbol("location"),m=Symbol("first"),w={},p=class extends t{constructor(y,b,g){super(y,g),this[o]=[],this[u]=this.limit===0,this[c]=g,this[a]={...g},this[h]=void 0,this[d]=b,this[m]=!0}_nextv(y,b,g){if(this[m]=!1,this[u])return this.nextTick(g,null,[]);if(this[o].length>0)return y=Math.min(y,this[o].length),this.nextTick(g,null,this[o].splice(0,y));this[h]!==void 0&&(this[c].reverse?(this[a].lt=this[h],this[a].lte=void 0):(this[a].gt=this[h],this[a].gte=void 0));let A;try{A=r(this[a])}catch{return this[u]=!0,this.nextTick(g,null,[])}let T=this.db.db.transaction([this[d]],"readonly"),O=T.objectStore(this[d]),C=[];if(this[c].reverse){let j=!this[c].values&&O.openKeyCursor?"openKeyCursor":"openCursor";O[j](A,"prev").onsuccess=B=>{let I=B.target.result;if(I){let{key:S,value:F}=I;this[h]=S,C.push([this[c].keys&&S!==void 0?n(S):void 0,this[c].values&&F!==void 0?n(F):void 0]),C.length<y?I.continue():f(T)}else this[u]=!0}}else{let j,B,I=()=>{if(j===void 0||B===void 0)return;let S=Math.max(j.length,B.length);S===0||y===1/0?this[u]=!0:this[h]=j[S-1],C.length=S;for(let F=0;F<S;F++){let D=j[F],q=B[F];C[F]=[this[c].keys&&D!==void 0?n(D):void 0,this[c].values&&q!==void 0?n(q):void 0]}f(T)};this[c].keys||y<1/0?O.getAllKeys(A,y<1/0?y:void 0).onsuccess=S=>{j=S.target.result,I()}:(j=[],this.nextTick(I)),this[c].values?O.getAll(A,y<1/0?y:void 0).onsuccess=S=>{B=S.target.result,I()}:(B=[],this.nextTick(I))}T.onabort=()=>{g(T.error||new Error("aborted by user")),g=null},T.oncomplete=()=>{g(null,C),g=null}}_next(y){if(this[o].length>0){let[b,g]=this[o].shift();this.nextTick(y,null,b,g)}else if(this[u])this.nextTick(y);else{let b=Math.min(100,this.limit-this.count);this[m]&&(this[m]=!1,b=1),this._nextv(b,w,(g,A)=>{if(g)return y(g);this[o]=A,this._next(y)})}}_all(y,b){this[m]=!1;let g=this[o].splice(0,this[o].length),A=this.limit-this.count-g.length;if(A<=0)return this.nextTick(b,null,g);this._nextv(A,w,(T,O)=>{if(T)return b(T);g.length>0&&(O=g.concat(O)),b(null,O)})}_seek(y,b){this[m]=!0,this[o]=[],this[u]=!1,this[h]=void 0,this[a]={...this[c]};let g;try{g=r(this[c])}catch{this[u]=!0;return}g!==null&&!g.includes(y)?this[u]=!0:this[c].reverse?this[a].lte=y:this[a].gte=y}};e.Iterator=p;function f(y){typeof y.commit=="function"&&y.commit()}}),Eg=P((e,t)=>{v(),t.exports=function(r,n,o,u,c){if(u.limit===0)return r.nextTick(c);let a=r.db.transaction([n],"readwrite"),h=a.objectStore(n),d=0;a.oncomplete=function(){c()},a.onabort=function(){c(a.error||new Error("aborted by user"))};let m=h.openKeyCursor?"openKeyCursor":"openCursor",w=u.reverse?"prev":"next";h[m](o,w).onsuccess=function(p){let f=p.target.result;f&&(h.delete(f.key).onsuccess=function(){(u.limit<=0||++d<u.limit)&&f.continue()})}}}),xg=P(e=>{v();var{AbstractLevel:t}=pf(),r=Ct(),n=mg(),{fromCallback:o}=xo(),{Iterator:u}=vg(),c=gf(),a=Eg(),h=yf(),d="level-js-",m=Symbol("idb"),w=Symbol("namePrefix"),p=Symbol("location"),f=Symbol("version"),y=Symbol("store"),b=Symbol("onComplete"),g=Symbol("promise"),A=class extends t{constructor(T,O,C){if(typeof O=="function"||typeof C=="function")throw new r("The levelup-style callback argument has been removed",{code:"LEVEL_LEGACY"});let{prefix:j,version:B,...I}=O||{};if(super({encodings:{view:!0},snapshots:!1,createIfMissing:!1,errorIfExists:!1,seek:!0},I),typeof T!="string")throw new Error("constructor requires a location string argument");this[p]=T,this[w]=j!=null?j:d,this[f]=parseInt(B||1,10),this[m]=null}get location(){return this[p]}get namePrefix(){return this[w]}get version(){return this[f]}get db(){return this[m]}get type(){return"browser-level"}_open(T,O){let C=indexedDB.open(this[w]+this[p],this[f]);C.onerror=function(){O(C.error||new Error("unknown error"))},C.onsuccess=()=>{this[m]=C.result,O()},C.onupgradeneeded=j=>{let B=j.target.result;B.objectStoreNames.contains(this[p])||B.createObjectStore(this[p])}}[y](T){return this[m].transaction([this[p]],T).objectStore(this[p])}[b](T,O){let C=T.transaction;C.onabort=function(){O(C.error||new Error("aborted by user"))},C.oncomplete=function(){O(null,T.result)}}_get(T,O,C){let j=this[y]("readonly"),B;try{B=j.get(T)}catch(I){return this.nextTick(C,I)}this[b](B,function(I,S){if(I)return C(I);if(S===void 0)return C(new r("Entry not found",{code:"LEVEL_NOT_FOUND"}));C(null,c(S))})}_getMany(T,O,C){let j=this[y]("readonly"),B=T.map(I=>S=>{let F;try{F=j.get(I)}catch(D){return S(D)}F.onsuccess=()=>{let D=F.result;S(null,D===void 0?D:c(D))},F.onerror=D=>{D.stopPropagation(),S(F.error)}});n(B,16,C)}_del(T,O,C){let j=this[y]("readwrite"),B;try{B=j.delete(T)}catch(I){return this.nextTick(C,I)}this[b](B,C)}_put(T,O,C,j){let B=this[y]("readwrite"),I;try{I=B.put(O,T)}catch(S){return this.nextTick(j,S)}this[b](I,j)}_iterator(T){return new u(this,this[p],T)}_batch(T,O,C){let j=this[y]("readwrite"),B=j.transaction,I=0,S;B.onabort=function(){C(S||B.error||new Error("aborted by user"))},B.oncomplete=function(){C()};function F(){let D=T[I++],q=D.key,J;try{J=D.type==="del"?j.delete(q):j.put(D.value,q)}catch(he){S=he,B.abort();return}I<T.length?J.onsuccess=F:typeof B.commit=="function"&&B.commit()}F()}_clear(T,O){let C,j;try{C=h(T)}catch{return this.nextTick(O)}if(T.limit>=0)return a(this,this[p],C,T,O);try{let B=this[y]("readwrite");j=C?B.delete(C):B.clear()}catch(B){return this.nextTick(O,B)}this[b](j,O)}_close(T){this[m].close(),this.nextTick(T)}};A.destroy=function(T,O,C){typeof O=="function"&&(C=O,O=d),C=o(C,g);let j=indexedDB.deleteDatabase(O+T);return j.onsuccess=function(){C()},j.onerror=function(B){C(B)},C[g]},e.BrowserLevel=A}),_g=P(e=>{v(),e.Level=xg().BrowserLevel}),Ag=P((e,t)=>{v(),t.exports=function(){return Date.now()}}),kg=P((e,t)=>{v();var r=Ag(),n=class{constructor(u,c,a){let h=this;this._started=r(),this._rescheduled=0,this._scheduled=c,this._args=a,this._triggered=!1,this._timerWrapper=()=>{h._rescheduled>0?(h._scheduled=h._rescheduled-(r()-h._started),h._schedule(h._scheduled)):(h._triggered=!0,u.apply(null,h._args))},this._timer=setTimeout(this._timerWrapper,c)}reschedule(u){u||(u=this._scheduled);let c=r();c+u-(this._started+this._scheduled)<0?(clearTimeout(this._timer),this._schedule(u)):this._triggered?this._schedule(u):(this._started=c,this._rescheduled=u)}_schedule(u){this._triggered=!1,this._started=r(),this._rescheduled=0,this._scheduled=u,this._timer=setTimeout(this._timerWrapper,u)}clear(){clearTimeout(this._timer)}};function o(){if(typeof arguments[0]!="function")throw new Error("callback needed");if(typeof arguments[1]!="number")throw new Error("timeout needed");let u;if(arguments.length>0){u=new Array(arguments.length-2);for(var c=0;c<u.length;c++)u[c]=arguments[c+2]}return new n(arguments[0],arguments[1],u)}t.exports=o}),Sg=P((e,t)=>{v();var{AbortController:r}=globalThis,n=kg(),o=class extends r{constructor(u){super(),this._ms=u,this._timer=n(()=>this.abort(),u),Object.setPrototypeOf(this,o.prototype)}abort(){return this._timer.clear(),super.abort()}clear(){this._timer.clear()}reset(){this._timer.clear(),this._timer=n(()=>this.abort(),this._ms)}};t.exports={TimeoutController:o}}),Tg=P((e,t)=>{v();function r(n){let o=new globalThis.AbortController;function u(){o.abort();for(let c of n)!c||!c.removeEventListener||c.removeEventListener("abort",u)}for(let c of n)if(!(!c||!c.addEventListener)){if(c.aborted){u();break}c.addEventListener("abort",u)}return o.signal}t.exports=r,t.exports.anySignal=r}),Ig=P((e,t)=>{v();var r=async n=>{let o;for await(let u of n)o=u;return o};t.exports=r}),wf=P((e,t)=>{v();var r=typeof navigator<"u"&&navigator.product==="ReactNative";function n(){return r?"http://localhost":Tt.location?Tt.location.protocol+"//"+Tt.location.host:""}var o=Tt.URL,u=n(),c=class{constructor(h="",d=u){this.super=new o(h,d),this.path=this.pathname+this.search,this.auth=this.username&&this.password?this.username+":"+this.password:null,this.query=this.search&&this.search.startsWith("?")?this.search.slice(1):null}get hash(){return this.super.hash}get host(){return this.super.host}get hostname(){return this.super.hostname}get href(){return this.super.href}get origin(){return this.super.origin}get password(){return this.super.password}get pathname(){return this.super.pathname}get port(){return this.super.port}get protocol(){return this.super.protocol}get search(){return this.super.search}get searchParams(){return this.super.searchParams}get username(){return this.super.username}set hash(h){this.super.hash=h}set host(h){this.super.host=h}set hostname(h){this.super.hostname=h}set href(h){this.super.href=h}set password(h){this.super.password=h}set pathname(h){this.super.pathname=h}set port(h){this.super.port=h}set protocol(h){this.super.protocol=h}set search(h){this.super.search=h}set username(h){this.super.username=h}static createObjectURL(h){return o.createObjectURL(h)}static revokeObjectURL(h){o.revokeObjectURL(h)}toJSON(){return this.super.toJSON()}toString(){return this.super.toString()}format(){return this.toString()}};function a(h){if(typeof h=="string")return new o(h).toString();if(!(h instanceof o)){let d=h.username&&h.password?`${h.username}:${h.password}@`:"",m=h.auth?h.auth+"@":"",w=h.port?":"+h.port:"",p=h.protocol?h.protocol+"//":"",f=h.host||"",y=h.hostname||"",b=h.search||(h.query?"?"+h.query:""),g=h.hash||"",A=h.pathname||"",T=h.path||A+b;return`${p}${d||m}${f||y+w}${T}${g}`}}t.exports={URLWithLegacySupport:c,URLSearchParams:Tt.URLSearchParams,defaultBase:u,format:a}}),Bg=P((e,t)=>{v();var{URLWithLegacySupport:r,format:n}=wf();t.exports=(o,u={},c={},a)=>{let h=u.protocol?u.protocol.replace(":",""):"http";h=(c[h]||a||h)+":";let d;try{d=new r(o)}catch{d={}}let m=Object.assign({},u,{protocol:h||d.protocol,host:u.host||d.host});return new r(o,n(m)).toString()}}),Cg=P((e,t)=>{v();var{URLWithLegacySupport:r,format:n,URLSearchParams:o,defaultBase:u}=wf(),c=Bg();t.exports={URL:r,URLSearchParams:o,format:n,relative:c,defaultBase:u}}),Og=P((e,t)=>{v();function r(n){let[o,u]=n[Symbol.asyncIterator]?[n[Symbol.asyncIterator](),Symbol.asyncIterator]:[n[Symbol.iterator](),Symbol.iterator],c=[];return{peek:()=>o.next(),push:a=>{c.push(a)},next:()=>c.length?{done:!1,value:c.shift()}:o.next(),[u](){return this}}}t.exports=r});v();v();v();var _o=z(nt(),1);v();v();v();var Lg=["string","number","bigint","symbol"],Fg=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","HTMLElement","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];function Ng(e){if(e===null)return"null";if(e===void 0)return"undefined";if(e===!0||e===!1)return"boolean";let t=typeof e;return Lg.includes(t)?t:t==="function"?"Function":Array.isArray(e)?"Array":Rg(e)?"Buffer":$g(e)||"Object"}function Rg(e){return e&&e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer.call(null,e)}function $g(e){let t=Object.prototype.toString.call(e).slice(8,-1);if(Fg.includes(t))return t}v();var $=class{constructor(e,t,r){this.major=e,this.majorEncoded=e<<5,this.name=t,this.terminal=r}toString(){return`Type[${this.major}].${this.name}`}compare(e){return this.major<e.major?-1:this.major>e.major?1:0}};$.uint=new $(0,"uint",!0);$.negint=new $(1,"negint",!0);$.bytes=new $(2,"bytes",!0);$.string=new $(3,"string",!0);$.array=new $(4,"array",!1);$.map=new $(5,"map",!1);$.tag=new $(6,"tag",!1);$.float=new $(7,"float",!0);$.false=new $(7,"false",!0);$.true=new $(7,"true",!0);$.null=new $(7,"null",!0);$.undefined=new $(7,"undefined",!0);$.break=new $(7,"break",!0);var W=class{constructor(e,t,r){this.type=e,this.value=t,this.encodedLength=r,this.encodedBytes=void 0,this.byteValue=void 0}toString(){return`Token[${this.type}].${this.value}`}};v();v();var mn=globalThis.process&&!globalThis.process.browser&&globalThis.Buffer&&typeof globalThis.Buffer.isBuffer=="function",Ug=new TextDecoder,jg=new TextEncoder;function eo(e){return mn&&globalThis.Buffer.isBuffer(e)}function bf(e){return e instanceof Uint8Array?eo(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e:Uint8Array.from(e)}var Pg=mn?(e,t,r)=>r-t>64?globalThis.Buffer.from(e.subarray(t,r)).toString("utf8"):kl(e,t,r):(e,t,r)=>r-t>64?Ug.decode(e.subarray(t,r)):kl(e,t,r),Dg=mn?e=>e.length>64?globalThis.Buffer.from(e):Al(e):e=>e.length>64?jg.encode(e):Al(e),Mt=e=>Uint8Array.from(e),wa=mn?(e,t,r)=>eo(e)?new Uint8Array(e.subarray(t,r)):e.slice(t,r):(e,t,r)=>e.slice(t,r),Mg=mn?(e,t)=>(e=e.map(r=>r instanceof Uint8Array?r:globalThis.Buffer.from(r)),bf(globalThis.Buffer.concat(e,t))):(e,t)=>{let r=new Uint8Array(t),n=0;for(let o of e)n+o.length>r.length&&(o=o.subarray(0,r.length-n)),r.set(o,n),n+=o.length;return r},zg=mn?e=>globalThis.Buffer.allocUnsafe(e):e=>new Uint8Array(e);function qg(e,t){if(eo(e)&&eo(t))return e.compare(t);for(let r=0;r<e.length;r++)if(e[r]!==t[r])return e[r]<t[r]?-1:1;return 0}function Al(e,t=1/0){let r,n=e.length,o=null,u=[];for(let c=0;c<n;++c){if(r=e.charCodeAt(c),r>55295&&r<57344){if(!o){if(r>56319){(t-=3)>-1&&u.push(239,191,189);continue}else if(c+1===n){(t-=3)>-1&&u.push(239,191,189);continue}o=r;continue}if(r<56320){(t-=3)>-1&&u.push(239,191,189),o=r;continue}r=(o-55296<<10|r-56320)+65536}else o&&(t-=3)>-1&&u.push(239,191,189);if(o=null,r<128){if((t-=1)<0)break;u.push(r)}else if(r<2048){if((t-=2)<0)break;u.push(r>>6|192,r&63|128)}else if(r<65536){if((t-=3)<0)break;u.push(r>>12|224,r>>6&63|128,r&63|128)}else if(r<1114112){if((t-=4)<0)break;u.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else throw new Error("Invalid code point")}return u}function kl(e,t,r){let n=[];for(;t<r;){let o=e[t],u=null,c=o>239?4:o>223?3:o>191?2:1;if(t+c<=r){let a,h,d,m;switch(c){case 1:o<128&&(u=o);break;case 2:a=e[t+1],(a&192)===128&&(m=(o&31)<<6|a&63,m>127&&(u=m));break;case 3:a=e[t+1],h=e[t+2],(a&192)===128&&(h&192)===128&&(m=(o&15)<<12|(a&63)<<6|h&63,m>2047&&(m<55296||m>57343)&&(u=m));break;case 4:a=e[t+1],h=e[t+2],d=e[t+3],(a&192)===128&&(h&192)===128&&(d&192)===128&&(m=(o&15)<<18|(a&63)<<12|(h&63)<<6|d&63,m>65535&&m<1114112&&(u=m))}}u===null?(u=65533,c=1):u>65535&&(u-=65536,n.push(u>>>10&1023|55296),u=56320|u&1023),n.push(u),t+=c}return Vg(n)}var Sl=4096;function Vg(e){let t=e.length;if(t<=Sl)return String.fromCharCode.apply(String,e);let r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=Sl));return r}var Kg=256,mf=class{constructor(e=Kg){this.chunkSize=e,this.cursor=0,this.maxCursor=-1,this.chunks=[],this._initReuseChunk=null}reset(){this.cursor=0,this.maxCursor=-1,this.chunks.length&&(this.chunks=[]),this._initReuseChunk!==null&&(this.chunks.push(this._initReuseChunk),this.maxCursor=this._initReuseChunk.length-1)}push(e){let t=this.chunks[this.chunks.length-1];if(this.cursor+e.length<=this.maxCursor+1){let r=t.length-(this.maxCursor-this.cursor)-1;t.set(e,r)}else{if(t){let r=t.length-(this.maxCursor-this.cursor)-1;r<t.length&&(this.chunks[this.chunks.length-1]=t.subarray(0,r),this.maxCursor=this.cursor-1)}e.length<64&&e.length<this.chunkSize?(t=zg(this.chunkSize),this.chunks.push(t),this.maxCursor+=t.length,this._initReuseChunk===null&&(this._initReuseChunk=t),t.set(e,0)):(this.chunks.push(e),this.maxCursor+=e.length)}this.cursor+=e.length}toBytes(e=!1){let t;if(this.chunks.length===1){let r=this.chunks[0];e&&this.cursor>r.length/2?(t=this.cursor===r.length?r:r.subarray(0,this.cursor),this._initReuseChunk=null,this.chunks=[]):t=wa(r,0,this.cursor)}else t=Mg(this.chunks,this.cursor);return e&&this.reset(),t}};v();var te="CBOR decode error:",vf="CBOR encode error:";function vn(e,t,r){if(e.length-t<r)throw new Error(`${te} not enough data for type`)}v();v();var ze=[24,256,65536,4294967296,BigInt("18446744073709551616")];function jr(e,t,r){vn(e,t,1);let n=e[t];if(r.strict===!0&&n<ze[0])throw new Error(`${te} integer encoded in more bytes than necessary (strict decode)`);return n}function Pr(e,t,r){vn(e,t,2);let n=e[t]<<8|e[t+1];if(r.strict===!0&&n<ze[1])throw new Error(`${te} integer encoded in more bytes than necessary (strict decode)`);return n}function Dr(e,t,r){vn(e,t,4);let n=e[t]*16777216+(e[t+1]<<16)+(e[t+2]<<8)+e[t+3];if(r.strict===!0&&n<ze[2])throw new Error(`${te} integer encoded in more bytes than necessary (strict decode)`);return n}function Mr(e,t,r){vn(e,t,8);let n=e[t]*16777216+(e[t+1]<<16)+(e[t+2]<<8)+e[t+3],o=e[t+4]*16777216+(e[t+5]<<16)+(e[t+6]<<8)+e[t+7],u=(BigInt(n)<<BigInt(32))+BigInt(o);if(r.strict===!0&&u<ze[3])throw new Error(`${te} integer encoded in more bytes than necessary (strict decode)`);if(u<=Number.MAX_SAFE_INTEGER)return Number(u);if(r.allowBigInt===!0)return u;throw new Error(`${te} integers outside of the safe integer range are not supported`)}function Wg(e,t,r,n){return new W($.uint,jr(e,t+1,n),2)}function Hg(e,t,r,n){return new W($.uint,Pr(e,t+1,n),3)}function Gg(e,t,r,n){return new W($.uint,Dr(e,t+1,n),5)}function Jg(e,t,r,n){return new W($.uint,Mr(e,t+1,n),9)}function zr(e,t){return dt(e,0,t.value)}function dt(e,t,r){if(r<ze[0]){let n=Number(r);e.push([t|n])}else if(r<ze[1]){let n=Number(r);e.push([t|24,n])}else if(r<ze[2]){let n=Number(r);e.push([t|25,n>>>8,n&255])}else if(r<ze[3]){let n=Number(r);e.push([t|26,n>>>24&255,n>>>16&255,n>>>8&255,n&255])}else{let n=BigInt(r);if(n<ze[4]){let o=[t|27,0,0,0,0,0,0,0],u=Number(n&BigInt(4294967295)),c=Number(n>>BigInt(32)&BigInt(4294967295));o[8]=u&255,u=u>>8,o[7]=u&255,u=u>>8,o[6]=u&255,u=u>>8,o[5]=u&255,o[4]=c&255,c=c>>8,o[3]=c&255,c=c>>8,o[2]=c&255,c=c>>8,o[1]=c&255,e.push(o)}else throw new Error(`${te} encountered BigInt larger than allowable range`)}}zr.encodedSize=function(e){return dt.encodedSize(e.value)};dt.encodedSize=function(e){return e<ze[0]?1:e<ze[1]?2:e<ze[2]?3:e<ze[3]?5:9};zr.compareTokens=function(e,t){return e.value<t.value?-1:e.value>t.value?1:0};v();function Yg(e,t,r,n){return new W($.negint,-1-jr(e,t+1,n),2)}function Qg(e,t,r,n){return new W($.negint,-1-Pr(e,t+1,n),3)}function Zg(e,t,r,n){return new W($.negint,-1-Dr(e,t+1,n),5)}var ba=BigInt(-1),Ef=BigInt(1);function Xg(e,t,r,n){let o=Mr(e,t+1,n);if(typeof o!="bigint"){let u=-1-o;if(u>=Number.MIN_SAFE_INTEGER)return new W($.negint,u,9)}if(n.allowBigInt!==!0)throw new Error(`${te} integers outside of the safe integer range are not supported`);return new W($.negint,ba-BigInt(o),9)}function ma(e,t){let r=t.value,n=typeof r=="bigint"?r*ba-Ef:r*-1-1;dt(e,t.type.majorEncoded,n)}ma.encodedSize=function(e){let t=e.value,r=typeof t=="bigint"?t*ba-Ef:t*-1-1;return r<ze[0]?1:r<ze[1]?2:r<ze[2]?3:r<ze[3]?5:9};ma.compareTokens=function(e,t){return e.value<t.value?1:e.value>t.value?-1:0};v();function fi(e,t,r,n){vn(e,t,r+n);let o=wa(e,t+r,t+r+n);return new W($.bytes,o,r+n)}function e0(e,t,r,n){return fi(e,t,1,r)}function t0(e,t,r,n){return fi(e,t,2,jr(e,t+1,n))}function r0(e,t,r,n){return fi(e,t,3,Pr(e,t+1,n))}function n0(e,t,r,n){return fi(e,t,5,Dr(e,t+1,n))}function i0(e,t,r,n){let o=Mr(e,t+1,n);if(typeof o=="bigint")throw new Error(`${te} 64-bit integer bytes lengths not supported`);return fi(e,t,9,o)}function to(e){return e.encodedBytes===void 0&&(e.encodedBytes=e.type===$.string?Dg(e.value):e.value),e.encodedBytes}function Ao(e,t){let r=to(t);dt(e,t.type.majorEncoded,r.length),e.push(r)}Ao.encodedSize=function(e){let t=to(e);return dt.encodedSize(t.length)+t.length};Ao.compareTokens=function(e,t){return o0(to(e),to(t))};function o0(e,t){return e.length<t.length?-1:e.length>t.length?1:qg(e,t)}v();function di(e,t,r,n,o){let u=r+n;vn(e,t,u);let c=new W($.string,Pg(e,t+r,t+u),u);return o.retainStringBytes===!0&&(c.byteValue=wa(e,t+r,t+u)),c}function s0(e,t,r,n){return di(e,t,1,r,n)}function a0(e,t,r,n){return di(e,t,2,jr(e,t+1,n),n)}function u0(e,t,r,n){return di(e,t,3,Pr(e,t+1,n),n)}function l0(e,t,r,n){return di(e,t,5,Dr(e,t+1,n),n)}function c0(e,t,r,n){let o=Mr(e,t+1,n);if(typeof o=="bigint")throw new Error(`${te} 64-bit integer string lengths not supported`);return di(e,t,9,o,n)}var h0=Ao;v();function En(e,t,r,n){return new W($.array,n,r)}function f0(e,t,r,n){return En(e,t,1,r)}function d0(e,t,r,n){return En(e,t,2,jr(e,t+1,n))}function p0(e,t,r,n){return En(e,t,3,Pr(e,t+1,n))}function y0(e,t,r,n){return En(e,t,5,Dr(e,t+1,n))}function g0(e,t,r,n){let o=Mr(e,t+1,n);if(typeof o=="bigint")throw new Error(`${te} 64-bit integer array lengths not supported`);return En(e,t,9,o)}function w0(e,t,r,n){if(n.allowIndefinite===!1)throw new Error(`${te} indefinite length items not allowed`);return En(e,t,1,1/0)}function va(e,t){dt(e,$.array.majorEncoded,t.value)}va.compareTokens=zr.compareTokens;va.encodedSize=function(e){return dt.encodedSize(e.value)};v();function xn(e,t,r,n){return new W($.map,n,r)}function b0(e,t,r,n){return xn(e,t,1,r)}function m0(e,t,r,n){return xn(e,t,2,jr(e,t+1,n))}function v0(e,t,r,n){return xn(e,t,3,Pr(e,t+1,n))}function E0(e,t,r,n){return xn(e,t,5,Dr(e,t+1,n))}function x0(e,t,r,n){let o=Mr(e,t+1,n);if(typeof o=="bigint")throw new Error(`${te} 64-bit integer map lengths not supported`);return xn(e,t,9,o)}function _0(e,t,r,n){if(n.allowIndefinite===!1)throw new Error(`${te} indefinite length items not allowed`);return xn(e,t,1,1/0)}function Ea(e,t){dt(e,$.map.majorEncoded,t.value)}Ea.compareTokens=zr.compareTokens;Ea.encodedSize=function(e){return dt.encodedSize(e.value)};v();function A0(e,t,r,n){return new W($.tag,r,1)}function k0(e,t,r,n){return new W($.tag,jr(e,t+1,n),2)}function S0(e,t,r,n){return new W($.tag,Pr(e,t+1,n),3)}function T0(e,t,r,n){return new W($.tag,Dr(e,t+1,n),5)}function I0(e,t,r,n){return new W($.tag,Mr(e,t+1,n),9)}function xa(e,t){dt(e,$.tag.majorEncoded,t.value)}xa.compareTokens=zr.compareTokens;xa.encodedSize=function(e){return dt.encodedSize(e.value)};v();var B0=20,C0=21,O0=22,L0=23;function F0(e,t,r,n){if(n.allowUndefined===!1)throw new Error(`${te} undefined values are not supported`);return n.coerceUndefinedToNull===!0?new W($.null,null,1):new W($.undefined,void 0,1)}function N0(e,t,r,n){if(n.allowIndefinite===!1)throw new Error(`${te} indefinite length items not allowed`);return new W($.break,void 0,1)}function _a(e,t,r){if(r){if(r.allowNaN===!1&&Number.isNaN(e))throw new Error(`${te} NaN values are not supported`);if(r.allowInfinity===!1&&(e===1/0||e===-1/0))throw new Error(`${te} Infinity values are not supported`)}return new W($.float,e,t)}function R0(e,t,r,n){return _a(ka(e,t+1),3,n)}function $0(e,t,r,n){return _a(Sa(e,t+1),5,n)}function U0(e,t,r,n){return _a(kf(e,t+1),9,n)}function Aa(e,t,r){let n=t.value;if(n===!1)e.push([$.float.majorEncoded|B0]);else if(n===!0)e.push([$.float.majorEncoded|C0]);else if(n===null)e.push([$.float.majorEncoded|O0]);else if(n===void 0)e.push([$.float.majorEncoded|L0]);else{let o,u=!1;(!r||r.float64!==!0)&&(_f(n),o=ka(gt,1),n===o||Number.isNaN(n)?(gt[0]=249,e.push(gt.slice(0,3)),u=!0):(Af(n),o=Sa(gt,1),n===o&&(gt[0]=250,e.push(gt.slice(0,5)),u=!0))),u||(j0(n),o=kf(gt,1),gt[0]=251,e.push(gt.slice(0,9)))}}Aa.encodedSize=function(e,t){let r=e.value;if(r===!1||r===!0||r===null||r===void 0)return 1;if(!t||t.float64!==!0){_f(r);let n=ka(gt,1);if(r===n||Number.isNaN(r))return 3;if(Af(r),n=Sa(gt,1),r===n)return 5}return 9};var xf=new ArrayBuffer(9),ht=new DataView(xf,1),gt=new Uint8Array(xf,0);function _f(e){if(e===1/0)ht.setUint16(0,31744,!1);else if(e===-1/0)ht.setUint16(0,64512,!1);else if(Number.isNaN(e))ht.setUint16(0,32256,!1);else{ht.setFloat32(0,e);let t=ht.getUint32(0),r=(t&2139095040)>>23,n=t&8388607;if(r===255)ht.setUint16(0,31744,!1);else if(r===0)ht.setUint16(0,(e&2147483648)>>16|n>>13,!1);else{let o=r-127;o<-24?ht.setUint16(0,0):o<-14?ht.setUint16(0,(t&2147483648)>>16|1<<24+o,!1):ht.setUint16(0,(t&2147483648)>>16|o+15<<10|n>>13,!1)}}}function ka(e,t){if(e.length-t<2)throw new Error(`${te} not enough data for float16`);let r=(e[t]<<8)+e[t+1];if(r===31744)return 1/0;if(r===64512)return-1/0;if(r===32256)return NaN;let n=r>>10&31,o=r&1023,u;return n===0?u=o*2**-24:n!==31?u=(o+1024)*2**(n-25):u=o===0?1/0:NaN,r&32768?-u:u}function Af(e){ht.setFloat32(0,e,!1)}function Sa(e,t){if(e.length-t<4)throw new Error(`${te} not enough data for float32`);let r=(e.byteOffset||0)+t;return new DataView(e.buffer,r,4).getFloat32(0,!1)}function j0(e){ht.setFloat64(0,e,!1)}function kf(e,t){if(e.length-t<8)throw new Error(`${te} not enough data for float64`);let r=(e.byteOffset||0)+t;return new DataView(e.buffer,r,8).getFloat64(0,!1)}Aa.compareTokens=zr.compareTokens;function oe(e,t,r){throw new Error(`${te} encountered invalid minor (${r}) for major ${e[t]>>>5}`)}function ko(e){return()=>{throw new Error(`${te} ${e}`)}}var V=[];for(let e=0;e<=23;e++)V[e]=oe;V[24]=Wg;V[25]=Hg;V[26]=Gg;V[27]=Jg;V[28]=oe;V[29]=oe;V[30]=oe;V[31]=oe;for(let e=32;e<=55;e++)V[e]=oe;V[56]=Yg;V[57]=Qg;V[58]=Zg;V[59]=Xg;V[60]=oe;V[61]=oe;V[62]=oe;V[63]=oe;for(let e=64;e<=87;e++)V[e]=e0;V[88]=t0;V[89]=r0;V[90]=n0;V[91]=i0;V[92]=oe;V[93]=oe;V[94]=oe;V[95]=ko("indefinite length bytes/strings are not supported");for(let e=96;e<=119;e++)V[e]=s0;V[120]=a0;V[121]=u0;V[122]=l0;V[123]=c0;V[124]=oe;V[125]=oe;V[126]=oe;V[127]=ko("indefinite length bytes/strings are not supported");for(let e=128;e<=151;e++)V[e]=f0;V[152]=d0;V[153]=p0;V[154]=y0;V[155]=g0;V[156]=oe;V[157]=oe;V[158]=oe;V[159]=w0;for(let e=160;e<=183;e++)V[e]=b0;V[184]=m0;V[185]=v0;V[186]=E0;V[187]=x0;V[188]=oe;V[189]=oe;V[190]=oe;V[191]=_0;for(let e=192;e<=215;e++)V[e]=A0;V[216]=k0;V[217]=S0;V[218]=T0;V[219]=I0;V[220]=oe;V[221]=oe;V[222]=oe;V[223]=oe;for(let e=224;e<=243;e++)V[e]=ko("simple values are not supported");V[244]=oe;V[245]=oe;V[246]=oe;V[247]=F0;V[248]=ko("simple values are not supported");V[249]=R0;V[250]=$0;V[251]=U0;V[252]=oe;V[253]=oe;V[254]=oe;V[255]=N0;var Ot=[];for(let e=0;e<24;e++)Ot[e]=new W($.uint,e,1);for(let e=-1;e>=-24;e--)Ot[31-e]=new W($.negint,e,1);Ot[64]=new W($.bytes,new Uint8Array(0),1);Ot[96]=new W($.string,"",1);Ot[128]=new W($.array,0,1);Ot[160]=new W($.map,0,1);Ot[244]=new W($.false,!1,1);Ot[245]=new W($.true,!0,1);Ot[246]=new W($.null,null,1);function Sf(e){switch(e.type){case $.false:return Mt([244]);case $.true:return Mt([245]);case $.null:return Mt([246]);case $.bytes:return e.value.length?void 0:Mt([64]);case $.string:return e.value===""?Mt([96]):void 0;case $.array:return e.value===0?Mt([128]):void 0;case $.map:return e.value===0?Mt([160]):void 0;case $.uint:return e.value<24?Mt([Number(e.value)]):void 0;case $.negint:if(e.value>=-24)return Mt([31-Number(e.value)])}}var P0={float64:!1,mapSorter:M0,quickEncodeToken:Sf};function Tf(){let e=[];return e[$.uint.major]=zr,e[$.negint.major]=ma,e[$.bytes.major]=Ao,e[$.string.major]=h0,e[$.array.major]=va,e[$.map.major]=Ea,e[$.tag.major]=xa,e[$.float.major]=Aa,e}var If=Tf(),hs=new mf,Us=class{constructor(e,t){this.obj=e,this.parent=t}includes(e){let t=this;do if(t.obj===e)return!0;while(t=t.parent);return!1}static createCheck(e,t){if(e&&e.includes(t))throw new Error(`${vf} object contains circular references`);return new Us(t,e)}},ir={null:new W($.null,null),undefined:new W($.undefined,void 0),true:new W($.true,!0),false:new W($.false,!1),emptyArray:new W($.array,0),emptyMap:new W($.map,0)},vr={number(e,t,r,n){return!Number.isInteger(e)||!Number.isSafeInteger(e)?new W($.float,e):e>=0?new W($.uint,e):new W($.negint,e)},bigint(e,t,r,n){return e>=BigInt(0)?new W($.uint,e):new W($.negint,e)},Uint8Array(e,t,r,n){return new W($.bytes,e)},string(e,t,r,n){return new W($.string,e)},boolean(e,t,r,n){return e?ir.true:ir.false},null(e,t,r,n){return ir.null},undefined(e,t,r,n){return ir.undefined},ArrayBuffer(e,t,r,n){return new W($.bytes,new Uint8Array(e))},DataView(e,t,r,n){return new W($.bytes,new Uint8Array(e.buffer,e.byteOffset,e.byteLength))},Array(e,t,r,n){if(!e.length)return r.addBreakTokens===!0?[ir.emptyArray,new W($.break)]:ir.emptyArray;n=Us.createCheck(n,e);let o=[],u=0;for(let c of e)o[u++]=Wi(c,r,n);return r.addBreakTokens?[new W($.array,e.length),o,new W($.break)]:[new W($.array,e.length),o]},Object(e,t,r,n){let o=t!=="Object",u=o?e.keys():Object.keys(e),c=o?e.size:u.length;if(!c)return r.addBreakTokens===!0?[ir.emptyMap,new W($.break)]:ir.emptyMap;n=Us.createCheck(n,e);let a=[],h=0;for(let d of u)a[h++]=[Wi(d,r,n),Wi(o?e.get(d):e[d],r,n)];return D0(a,r),r.addBreakTokens?[new W($.map,c),a,new W($.break)]:[new W($.map,c),a]}};vr.Map=vr.Object;vr.Buffer=vr.Uint8Array;for(let e of"Uint8Clamped Uint16 Uint32 Int8 Int16 Int32 BigUint64 BigInt64 Float32 Float64".split(" "))vr[`${e}Array`]=vr.DataView;function Wi(e,t={},r){let n=Ng(e),o=t&&t.typeEncoders&&t.typeEncoders[n]||vr[n];if(typeof o=="function"){let c=o(e,n,t,r);if(c!=null)return c}let u=vr[n];if(!u)throw new Error(`${vf} unsupported type: ${n}`);return u(e,n,t,r)}function D0(e,t){t.mapSorter&&e.sort(t.mapSorter)}function M0(e,t){let r=Array.isArray(e[0])?e[0][0]:e[0],n=Array.isArray(t[0])?t[0][0]:t[0];if(r.type!==n.type)return r.type.compare(n.type);let o=r.type.major,u=If[o].compareTokens(r,n);return u===0&&console.warn("WARNING: complex key types used, CBOR key sorting guarantees are gone"),u}function Bf(e,t,r,n){if(Array.isArray(t))for(let o of t)Bf(e,o,r,n);else r[t.type.major](e,t,n)}function z0(e,t,r){let n=Wi(e,r);if(!Array.isArray(n)&&r.quickEncodeToken){let o=r.quickEncodeToken(n);if(o)return o;let u=t[n.type.major];if(u.encodedSize){let c=u.encodedSize(n,r),a=new mf(c);if(u(a,n,r),a.chunks.length!==1)throw new Error(`Unexpected error: pre-calculated length for ${n} was wrong`);return bf(a.chunks[0])}}return hs.reset(),Bf(hs,n,t,r),hs.toBytes(!0)}function Qn(e,t){return t=Object.assign({},P0,t),z0(e,If,t)}v();var q0={strict:!1,allowIndefinite:!0,allowUndefined:!0,allowBigInt:!0},V0=class{constructor(e,t={}){this.pos=0,this.data=e,this.options=t}done(){return this.pos>=this.data.length}next(){let e=this.data[this.pos],t=Ot[e];if(t===void 0){let r=V[e];if(!r)throw new Error(`${te} no decoder for major type ${e>>>5} (byte 0x${e.toString(16).padStart(2,"0")})`);let n=e&31;t=r(this.data,this.pos,n,this.options)}return this.pos+=t.encodedLength,t}},Zn=Symbol.for("DONE"),So=Symbol.for("BREAK");function K0(e,t,r){let n=[];for(let o=0;o<e.value;o++){let u=Xn(t,r);if(u===So){if(e.value===1/0)break;throw new Error(`${te} got unexpected break to lengthed array`)}if(u===Zn)throw new Error(`${te} found array but not enough entries (got ${o}, expected ${e.value})`);n[o]=u}return n}function W0(e,t,r){let n=r.useMaps===!0,o=n?void 0:{},u=n?new Map:void 0;for(let c=0;c<e.value;c++){let a=Xn(t,r);if(a===So){if(e.value===1/0)break;throw new Error(`${te} got unexpected break to lengthed map`)}if(a===Zn)throw new Error(`${te} found map but not enough entries (got ${c} [no key], expected ${e.value})`);if(n!==!0&&typeof a!="string")throw new Error(`${te} non-string keys not supported (got ${typeof a})`);let h=Xn(t,r);if(h===Zn)throw new Error(`${te} found map but not enough entries (got ${c} [no value], expected ${e.value})`);n?u.set(a,h):o[a]=h}return n?u:o}function Xn(e,t){if(e.done())return Zn;let r=e.next();if(r.type===$.break)return So;if(r.type.terminal)return r.value;if(r.type===$.array)return K0(r,e,t);if(r.type===$.map)return W0(r,e,t);if(r.type===$.tag){if(t.tags&&typeof t.tags[r.value]=="function"){let n=Xn(e,t);return t.tags[r.value](n)}throw new Error(`${te} tag not supported (${r.value})`)}throw new Error("unsupported")}function sr(e,t){if(!(e instanceof Uint8Array))throw new Error(`${te} data to decode must be a Uint8Array`);t=Object.assign({},q0,t);let r=t.tokenizer||new V0(e,t),n=Xn(r,t);if(n===Zn)throw new Error(`${te} did not find any content to decode`);if(n===So)throw new Error(`${te} got unexpected break`);if(!r.done())throw new Error(`${te} too many terminals, data makes no sense`);return n}v();var H0=Tf(),G0={float64:!1,quickEncodeToken:Sf};function Cf(e,t=H0,r=G0){if(Array.isArray(e)){let n=0;for(let o of e)n+=Cf(o,t,r);return n}else{let n=t[e.type.major];if(n.encodedSize===void 0||typeof n.encodedSize!="function")throw new Error(`Encoder for ${e.type.name} does not have an encodedSize()`);return n.encodedSize(e,r)}}var To={};pe(To,{code:()=>tw,decode:()=>Ta,encode:()=>Io,name:()=>ew});v();ce();var Of=42;function J0(e){if(e.asCID!==e)return null;let t=G.asCID(e);if(!t)return null;let r=new Uint8Array(t.bytes.byteLength+1);return r.set(t.bytes,1),[new W($.tag,Of),new W($.bytes,r)]}function Y0(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")}function Q0(e){if(Number.isNaN(e))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(e===1/0||e===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}var Z0={float64:!0,typeEncoders:{Object:J0,undefined:Y0,number:Q0}};function X0(e){if(e[0]!==0)throw new Error("Invalid CID for CBOR tag 42; expected leading 0x00");return G.decode(e.subarray(1))}var Lf={allowIndefinite:!1,coerceUndefinedToNull:!0,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,tags:[]};Lf.tags[Of]=X0;var ew="dag-cbor",tw=113,Io=e=>Qn(e,Z0),Ta=e=>sr(e,Lf),rw=class{constructor(e,t){this.bytes=e,this.byteOffset=t,this.roots=[],this.headerSize=t}addRoot(e,t){return nw(this,e,t),this}write(e){return iw(this,e),this}close(e){return ow(this,e)}},nw=(e,t,r={})=>{let{resize:n=!1}=r,{bytes:o,headerSize:u,byteOffset:c,roots:a}=e;e.roots.push(t);let h=ro(e);if(h>u)if(h-u+c<o.byteLength)if(n)Ff(e,h);else throw a.pop(),new RangeError(`Header of size ${u} has no capacity for new root ${t}.
  However there is a space in the buffer and you could call addRoot(root, { resize: root }) to resize header to make a space for this root.`);else throw a.pop(),new RangeError(`Buffer has no capacity for a new root ${t}`)},Tl=({cid:e,bytes:t})=>{let r=e.bytes.byteLength+t.byteLength;return _o.default.encodingLength(r)+r},iw=(e,{cid:t,bytes:r})=>{let n=t.bytes.byteLength+r.byteLength,o=_o.default.encode(n);if(e.byteOffset+o.length+n>e.bytes.byteLength)throw new RangeError("Buffer has no capacity for this block");fs(e,o),fs(e,t.bytes),fs(e,r)},ow=(e,t={})=>{let{resize:r=!1}=t,{roots:n,bytes:o,byteOffset:u,headerSize:c}=e,a=Io({version:1,roots:n}),h=_o.default.encode(a.length),d=h.length+a.byteLength;if(c-d===0)return Il(e,h,a),o.subarray(0,u);if(r)return Ff(e,d),Il(e,h,a),o.subarray(0,e.byteOffset);throw new RangeError(`Header size was overestimated.
You can use close({ resize: true }) to resize header`)},Ff=(e,t)=>{let{bytes:r,headerSize:n}=e;r.set(r.subarray(n,e.byteOffset),t),e.byteOffset+=t-n,e.headerSize=t},fs=(e,t)=>{e.bytes.set(t,e.byteOffset),e.byteOffset+=t.length},Il=({bytes:e},t,r)=>{e.set(t),e.set(r,t.length)},sw=[new W($.map,2),new W($.string,"version"),new W($.uint,1),new W($.string,"roots")],aw=new W($.tag,42),uw=e=>{let t=[...sw];t.push(new W($.array,e.length));for(let n of e)t.push(aw),t.push(new W($.bytes,{length:n+1}));let r=Cf(t);return _o.default.encodingLength(r)+r},ro=({roots:e})=>uw(e.map(t=>t.bytes.byteLength)),lw=(e,t={})=>{let{roots:r=[],byteOffset:n=0,byteLength:o=e.byteLength,headerSize:u=ro({roots:r})}=t,c=new Uint8Array(e,n,o),a=new rw(c,u);for(let h of r)a.addRoot(h);return a};v();v();v();var Br=z(nt(),1);ce();He();v();var cr={Null:e=>e===null,Int:e=>Number.isInteger(e),Float:e=>typeof e=="number"&&Number.isFinite(e),String:e=>typeof e=="string",Bool:e=>typeof e=="boolean",Bytes:e=>e instanceof Uint8Array,Link:e=>!cr.Null(e)&&typeof e=="object"&&e.asCID===e,List:e=>Array.isArray(e),Map:e=>!cr.Null(e)&&typeof e=="object"&&e.asCID!==e&&!cr.List(e)&&!cr.Bytes(e)},nn={Int:cr.Int,"CarHeader > version":e=>nn.Int(e),"CarHeader > roots (anon) > valueType (anon)":cr.Link,"CarHeader > roots (anon)":e=>cr.List(e)&&Array.prototype.every.call(e,nn["CarHeader > roots (anon) > valueType (anon)"]),"CarHeader > roots":e=>nn["CarHeader > roots (anon)"](e),CarHeader:e=>{let t=e&&Object.keys(e);return cr.Map(e)&&["version"].every(r=>t.includes(r))&&Object.entries(e).every(([r,n])=>nn["CarHeader > "+r]&&nn["CarHeader > "+r](n))}},cw=nn.CarHeader,ds={SHA2_256:18,LENGTH:32,DAG_PB:112},Bl=16+8+8+8;async function no(e){let t=await e.upTo(8);if(!t.length)throw new Error("Unexpected end of data");let r=Br.default.decode(t);return e.seek(Br.default.decode.bytes),r}async function hw(e){let t=await e.exactly(Bl),r=new DataView(t.buffer,t.byteOffset,t.byteLength),n=0,o={version:2,characteristics:[r.getBigUint64(n,!0),r.getBigUint64(n+=8,!0)],dataOffset:Number(r.getBigUint64(n+=8,!0)),dataSize:Number(r.getBigUint64(n+=8,!0)),indexOffset:Number(r.getBigUint64(n+=8,!0))};return e.seek(Bl),o}async function Ia(e,t){let r=await no(e);if(r===0)throw new Error("Invalid CAR header (zero length)");let n=await e.exactly(r);e.seek(r);let o=Ta(n);if(!cw(o))throw new Error("Invalid CAR header format");if(o.version!==1&&o.version!==2||t!==void 0&&o.version!==t)throw new Error(`Invalid CAR version: ${o.version}${t!==void 0?` (expected ${t})`:""}`);let u=Array.isArray(o.roots);if(o.version===1&&!u||o.version===2&&u)throw new Error("Invalid CAR header format");if(o.version===1)return o;let c=await hw(e);e.seek(c.dataOffset-e.pos);let a=await Ia(e,1);return Object.assign(a,c)}async function fw(e){let t=await e.upTo(8);Br.default.decode(t);let r=Br.default.decode.bytes,n=Br.default.decode(t.subarray(Br.default.decode.bytes)),o=Br.default.decode.bytes,u=r+o+n,c=await e.exactly(u);return e.seek(u),c}async function dw(e){let t=await e.exactly(2);if(t[0]===ds.SHA2_256&&t[1]===ds.LENGTH){let c=await e.exactly(34);e.seek(34);let a=Xe(c);return G.create(0,ds.DAG_PB,a)}let r=await no(e);if(r!==1)throw new Error(`Unexpected CID version (${r})`);let n=await no(e),o=await fw(e),u=Xe(o);return G.create(r,n,u)}async function Nf(e){let t=e.pos,r=await no(e);if(r===0)throw new Error("Invalid CAR section (zero length)");r+=e.pos-t;let n=await dw(e),o=r-Number(e.pos-t);return{cid:n,length:r,blockLength:o}}async function pw(e){let{cid:t,blockLength:r}=await Nf(e),n=await e.exactly(r);return e.seek(r),{bytes:n,cid:t}}async function yw(e){let t=e.pos,{cid:r,length:n,blockLength:o}=await Nf(e),u={cid:r,length:n,blockLength:o,offset:t,blockOffset:e.pos};return e.seek(u.blockLength),u}function Ba(e){let t=(async()=>{let r=await Ia(e);if(r.version===2){let n=e.pos-r.dataOffset;e=ww(e,r.dataSize-n)}return r})();return{header:()=>t,async*blocks(){for(await t;(await e.upTo(8)).length>0;)yield await pw(e)},async*blocksIndex(){for(await t;(await e.upTo(8)).length>0;)yield await yw(e)}}}function Bo(e){let t=0;return{async upTo(r){return e.subarray(t,t+Math.min(r,e.length-t))},async exactly(r){if(r>e.length-t)throw new Error("Unexpected end of data");return e.subarray(t,t+r)},seek(r){t+=r},get pos(){return t}}}function gw(e){let t=0,r=0,n=0,o=new Uint8Array(0),u=async c=>{r=o.length-n;let a=[o.subarray(n)];for(;r<c;){let d=await e();if(d==null)break;r<0?d.length>r&&a.push(d.subarray(-r)):a.push(d),r+=d.length}o=new Uint8Array(a.reduce((d,m)=>d+m.length,0));let h=0;for(let d of a)o.set(d,h),h+=d.length;n=0};return{async upTo(c){return o.length-n<c&&await u(c),o.subarray(n,n+Math.min(o.length-n,c))},async exactly(c){if(o.length-n<c&&await u(c),o.length-n<c)throw new Error("Unexpected end of data");return o.subarray(n,n+c)},seek(c){t+=c,n+=c},get pos(){return t}}}function Ca(e){let t=e[Symbol.asyncIterator]();async function r(){let n=await t.next();return n.done?null:n.value}return gw(r)}function ww(e,t){let r=0;return{async upTo(n){let o=await e.upTo(n);return o.length+r>t&&(o=o.subarray(0,t-r)),o},async exactly(n){let o=await e.exactly(n);if(o.length+r>t)throw new Error("Unexpected end of data");return o},seek(n){r+=n,e.seek(n)},get pos(){return e.pos}}}var Rf=class{constructor(e,t){this._header=e,this._blocks=t,this._keys=t.map(r=>r.cid.toString())}get version(){return this._header.version}async getRoots(){return this._header.roots}async has(e){return this._keys.indexOf(e.toString())>-1}async get(e){let t=this._keys.indexOf(e.toString());return t>-1?this._blocks[t]:void 0}async*blocks(){for(let e of this._blocks)yield e}async*cids(){for(let e of this._blocks)yield e.cid}static async fromBytes(e){if(!(e instanceof Uint8Array))throw new TypeError("fromBytes() requires a Uint8Array");return Cl(Bo(e))}static async fromIterable(e){if(!e||typeof e[Symbol.asyncIterator]!="function")throw new TypeError("fromIterable() requires an async iterable");return Cl(Ca(e))}};async function Cl(e){let t=Ba(e),r=await t.header(),n=[];for await(let o of t.blocks())n.push(o);return new Rf(r,n)}v();v();v();ce();v();z(nt(),1);v();v();ai();He();xr();ui();v();ai();var Ii=({enumerable:e=!0,configurable:t=!1}={})=>({enumerable:e,configurable:t,writable:!1}),Ds=function*(e,t){if(e!=null&&!(e instanceof Uint8Array))for(let[r,n]of Object.entries(e)){let o=[...t,r];if(n!=null&&typeof n=="object")if(Array.isArray(n))for(let[u,c]of n.entries()){let a=[...o,u],h=G.asCID(c);h?yield[a.join("/"),h]:typeof c=="object"&&(yield*Ds(c,a))}else{let u=G.asCID(n);u?yield[o.join("/"),u]:yield*Ds(n,o)}}},Ms=function*(e,t){if(e!=null)for(let[r,n]of Object.entries(e)){let o=[...t,r];if(yield o.join("/"),n!=null&&!(n instanceof Uint8Array)&&typeof n=="object"&&!G.asCID(n))if(Array.isArray(n))for(let[u,c]of n.entries()){let a=[...o,u];yield a.join("/"),typeof c=="object"&&!G.asCID(c)&&(yield*Ms(c,a))}else yield*Ms(n,o)}},xw=(e,t)=>{let r=e;for(let[n,o]of t.entries()){if(r=r[o],r==null)throw new Error(`Object has no property at ${t.slice(0,n+1).map(c=>`[${JSON.stringify(c)}]`).join("")}`);let u=G.asCID(r);if(u)return{value:u,remaining:t.slice(n+1).join("/")}}return{value:r}},zf=class{constructor({cid:e,bytes:t,value:r}){if(!e||!t||typeof r>"u")throw new Error("Missing required argument");this.cid=e,this.bytes=t,this.value=r,this.asBlock=this,Object.defineProperties(this,{cid:Ii(),bytes:Ii(),value:Ii(),asBlock:Ii()})}links(){return Ds(this.value,[])}tree(){return Ms(this.value,[])}get(e="/"){return xw(this.value,e.split("/").filter(Boolean))}},Rl=async({value:e,codec:t,hasher:r})=>{if(typeof e>"u")throw new Error('Missing required argument "value"');if(!t||!r)throw new Error("Missing required argument: codec or hasher");let n=t.encode(e),o=await r.digest(n),u=G.create(1,t.code,o);return new zf({value:e,bytes:n,cid:u})},Co=({bytes:e,cid:t,value:r,codec:n})=>{let o=r!==void 0?r:n&&n.decode(e);if(o===void 0)throw new Error('Missing required argument, must either provide "value" or "codec"');return new zf({cid:t,bytes:e,value:o})},_w=async({bytes:e,cid:t,hasher:r,codec:n})=>{if(!e)throw new Error('Missing required argument "bytes"');if(!r)throw new Error('Missing required argument "hasher"');let o=n.decode(e),u=await r.digest(e);if(!ea.equals(t.multihash.bytes,u.bytes))throw new Error("CID hash does not match bytes");return Co({bytes:e,cid:t,value:o,codec:n})};v();function qf(e){return{all:e=e||new Map,on:function(t,r){var n=e.get(t);n?n.push(r):e.set(t,[r])},off:function(t,r){var n=e.get(t);n&&(r?n.splice(n.indexOf(r)>>>0,1):e.set(t,[]))},emit:function(t,r){var n=e.get(t);n&&n.slice().map(function(o){o(r)}),(n=e.get("*"))&&n.slice().map(function(o){o(t,r)})}}}var{isBinary:Aw}=ea,Oa=e=>Aw(e)?Rl({value:e,hasher:mr,codec:yo}):Rl({value:e,hasher:mr,codec:To}),$l=({bytes:e,cid:t})=>{let r,n,{code:o}=t,u=t.multihash.code||Xe(t.multihash).code;if(u===18)r=mr;else throw new Error("Unsupported hash function: "+u);if(o===113)n=To;else if(o===85)n=yo;else throw new Error("Unsupported codec: "+o);return _w({bytes:e,cid:t,codec:n,hasher:r})},un=class{constructor(){Object.assign(this,qf()),this.blocks=[]}static create(){return new this}static async load(e){let t=await Rf.fromBytes(e),[r]=await t.getRoots();return{root:r,get:n=>t.get(n).then(o=>$l(o)).then(({value:o})=>o)}}async add(e){let t=await Oa(e);return this.last=t,this.blocks.push(t),this.emit("size",this.size),t.cid}async get(e){let{cid:t,bytes:r,value:n}=await $l(e);return{cid:t,bytes:r,value:n}}undo(){return this.blocks.pop()}async commit(){let e=this.last.cid,t=0,r=ro({roots:[e]});t+=r;for(let u of this.blocks)t+=Tl(u);let n=new Uint8Array(t),o=await lw(n,{headerSize:r});o.addRoot(e);for(let u of this.blocks)o.write(u);return await o.close(),o.bytes}get size(){if(!(this!=null&&this.last))return 0;let e=this.last.cid,t=0;t+=ro({roots:[e]});for(let r of this.blocks)t+=Tl(r);return t}};v();v();v();v();var Sw=z(mt(),1);z(Je(),1);v();v();v();ce();v();v();v();var _n=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce((t,r)=>(r&=63,r<36?t+=r.toString(36):r<62?t+=(r-26).toString(36).toUpperCase():r>62?t+="-":t+="_",t),"");ye();Ve();var zt="/",Vf=new TextEncoder().encode(zt),Bi=Vf[0],Ee=class{constructor(e,t){if(typeof e=="string")this._buf=Ue(e);else if(e instanceof Uint8Array)this._buf=e;else throw new Error("Invalid key, should be String of Uint8Array");if(t==null&&(t=!0),t&&this.clean(),this._buf.byteLength===0||this._buf[0]!==Bi)throw new Error("Invalid key")}toString(e="utf8"){return re(this._buf,e)}uint8Array(){return this._buf}get[Symbol.toStringTag](){return`Key(${this.toString()})`}static withNamespaces(e){return new Ee(e.join(zt))}static random(){return new Ee(_n().replace(/-/g,""))}static asKey(e){return e instanceof Uint8Array||typeof e=="string"?new Ee(e):typeof e.uint8Array=="function"?new Ee(e.uint8Array()):null}clean(){if((this._buf==null||this._buf.byteLength===0)&&(this._buf=Vf),this._buf[0]!==Bi){let e=new Uint8Array(this._buf.byteLength+1);e.fill(Bi,0,1),e.set(this._buf,1),this._buf=e}for(;this._buf.byteLength>1&&this._buf[this._buf.byteLength-1]===Bi;)this._buf=this._buf.subarray(0,-1)}less(e){let t=this.list(),r=e.list();for(let n=0;n<t.length;n++){if(r.length<n+1)return!1;let o=t[n],u=r[n];if(o<u)return!0;if(o>u)return!1}return t.length<r.length}reverse(){return Ee.withNamespaces(this.list().slice().reverse())}namespaces(){return this.list()}baseNamespace(){let e=this.namespaces();return e[e.length-1]}list(){return this.toString().split(zt).slice(1)}type(){return Tw(this.baseNamespace())}name(){return Iw(this.baseNamespace())}instance(e){return new Ee(this.toString()+":"+e)}path(){let e=this.parent().toString();return e.endsWith(zt)||(e+=zt),e+=this.type(),new Ee(e)}parent(){let e=this.list();return e.length===1?new Ee(zt):new Ee(e.slice(0,-1).join(zt))}child(e){return this.toString()===zt?e:e.toString()===zt?this:new Ee(this.toString()+e.toString(),!1)}isAncestorOf(e){return e.toString()===this.toString()?!1:e.toString().startsWith(this.toString())}isDecendantOf(e){return e.toString()===this.toString()?!1:this.toString().startsWith(e.toString())}isTopLevel(){return this.list().length===1}concat(...e){return Ee.withNamespaces([...this.namespaces(),...Bw(e.map(t=>t.namespaces()))])}};function Tw(e){let t=e.split(":");return t.length<2?"":t.slice(0,-1).join(":")}function Iw(e){let t=e.split(":");return t[t.length-1]}function Bw(e){return[].concat(...e)}var Cw=z(mt(),1),Ow=z(nf(),1);Ge();xr();He();var Lw=(0,Cw.default)("ipfs:repo:migrator:migration-8");function Kf(e){return e.child?Kf(e.child):e}function Fw(e){try{let t=ie.decode(`b${e.toString().toLowerCase().slice(1)}`),r=G.decode(t).multihash.bytes,n=ie.encode(r).slice(1).toUpperCase();return new Ee(`/${n}`,!1)}catch{return e}}function Nw(e){try{let t=ie.decode(`b${e.toString().toLowerCase().slice(1)}`),r=Xe(t),n=ie.encode(G.createV1(Or,r).bytes).slice(1);return new Ee(`/${n.toUpperCase()}`,!1)}catch{return e}}async function Ul(e,t,r){let n=e.blocks;await n.open();let o=Kf(n),u=await(0,Ow.default)(o.queryKeys({filters:[c=>r(c).toString()!==c.toString()]}));try{let c=0;for await(let a of o.query({})){let h=r(a.key);h.toString()!==a.key.toString()&&(c+=1,Lw(`Migrating Block from ${a.key} to ${h}`,await o.has(a.key)),await o.delete(a.key),await o.put(h,a.value),t(c/u*100,`Migrated Block from ${a.key} to ${h}`))}}finally{await n.close()}}var Rw={version:8,description:"Transforms key names into base32 encoding and converts Block store to use bare multihashes encoded as base32",migrate:(e,t=()=>{})=>Ul(e,t,Fw),revert:(e,t=()=>{})=>Ul(e,t,Nw)};v();ce();v();ce();v();var $w=new TextDecoder;function Fa(e,t){let r=0;for(let n=0;;n+=7){if(n>=64)throw new Error("protobuf: varint overflow");if(t>=e.length)throw new Error("protobuf: unexpected end of data");let o=e[t++];if(r+=n<28?(o&127)<<n:(o&127)*2**n,o<128)break}return[r,t]}function io(e,t){let r;[r,t]=Fa(e,t);let n=t+r;if(r<0||n<0)throw new Error("protobuf: invalid length");if(n>e.length)throw new Error("protobuf: unexpected end of data");return[e.subarray(t,n),n]}function Wf(e,t){let r;return[r,t]=Fa(e,t),[r&7,r>>3,t]}function Uw(e){let t={},r=e.length,n=0;for(;n<r;){let o,u;if([o,u,n]=Wf(e,n),u===1){if(t.Hash)throw new Error("protobuf: (PBLink) duplicate Hash section");if(o!==2)throw new Error(`protobuf: (PBLink) wrong wireType (${o}) for Hash`);if(t.Name!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Name before Hash");if(t.Tsize!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Hash");[t.Hash,n]=io(e,n)}else if(u===2){if(t.Name!==void 0)throw new Error("protobuf: (PBLink) duplicate Name section");if(o!==2)throw new Error(`protobuf: (PBLink) wrong wireType (${o}) for Name`);if(t.Tsize!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Name");let c;[c,n]=io(e,n),t.Name=$w.decode(c)}else if(u===3){if(t.Tsize!==void 0)throw new Error("protobuf: (PBLink) duplicate Tsize section");if(o!==0)throw new Error(`protobuf: (PBLink) wrong wireType (${o}) for Tsize`);[t.Tsize,n]=Fa(e,n)}else throw new Error(`protobuf: (PBLink) invalid fieldNumber, expected 1, 2 or 3, got ${u}`)}if(n>r)throw new Error("protobuf: (PBLink) unexpected end of data");return t}function jw(e){let t=e.length,r=0,n,o=!1,u;for(;r<t;){let a,h;if([a,h,r]=Wf(e,r),a!==2)throw new Error(`protobuf: (PBNode) invalid wireType, expected 2, got ${a}`);if(h===1){if(u)throw new Error("protobuf: (PBNode) duplicate Data section");[u,r]=io(e,r),n&&(o=!0)}else if(h===2){if(o)throw new Error("protobuf: (PBNode) duplicate Links section");n||(n=[]);let d;[d,r]=io(e,r),n.push(Uw(d))}else throw new Error(`protobuf: (PBNode) invalid fieldNumber, expected 1 or 2, got ${h}`)}if(r>t)throw new Error("protobuf: (PBNode) unexpected end of data");let c={};return u&&(c.Data=u),c.Links=n||[],c}v();var Hf=new TextEncoder,jl=2**32,Pw=2**31;function Dw(e,t){let r=t.length;if(typeof e.Tsize=="number"){if(e.Tsize<0)throw new Error("Tsize cannot be negative");if(!Number.isSafeInteger(e.Tsize))throw new Error("Tsize too large for encoding");r=Dn(t,r,e.Tsize)-1,t[r]=24}if(typeof e.Name=="string"){let n=Hf.encode(e.Name);r-=n.length,t.set(n,r),r=Dn(t,r,n.length)-1,t[r]=18}return e.Hash&&(r-=e.Hash.length,t.set(e.Hash,r),r=Dn(t,r,e.Hash.length)-1,t[r]=10),t.length-r}function Mw(e){let t=qw(e),r=new Uint8Array(t),n=t;if(e.Data&&(n-=e.Data.length,r.set(e.Data,n),n=Dn(r,n,e.Data.length)-1,r[n]=10),e.Links)for(let o=e.Links.length-1;o>=0;o--){let u=Dw(e.Links[o],r.subarray(0,n));n-=u,n=Dn(r,n,u)-1,r[n]=18}return r}function zw(e){let t=0;if(e.Hash){let r=e.Hash.length;t+=1+r+ln(r)}if(typeof e.Name=="string"){let r=Hf.encode(e.Name).length;t+=1+r+ln(r)}return typeof e.Tsize=="number"&&(t+=1+ln(e.Tsize)),t}function qw(e){let t=0;if(e.Data){let r=e.Data.length;t+=1+r+ln(r)}if(e.Links)for(let r of e.Links){let n=zw(r);t+=1+n+ln(n)}return t}function Dn(e,t,r){t-=ln(r);let n=t;for(;r>=Pw;)e[t++]=r&127|128,r/=128;for(;r>=128;)e[t++]=r&127|128,r>>>=7;return e[t]=r,n}function ln(e){return e%2===0&&e++,Math.floor((Vw(e)+6)/7)}function Vw(e){let t=0;return e>=jl&&(e=Math.floor(e/jl),t=32),e>=1<<16&&(e>>>=16,t+=16),e>=1<<8&&(e>>>=8,t+=8),t+Kw[e]}var Kw=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8];v();ce();var Ww=["Data","Links"],Hw=["Hash","Name","Tsize"],Pl=new TextEncoder;function Gw(e,t){if(e===t)return 0;let r=e.Name?Pl.encode(e.Name):[],n=t.Name?Pl.encode(t.Name):[],o=r.length,u=n.length;for(let c=0,a=Math.min(o,u);c<a;++c)if(r[c]!==n[c]){o=r[c],u=n[c];break}return o<u?-1:u<o?1:0}function Dl(e,t){return!Object.keys(e).some(r=>!t.includes(r))}function Jw(e){if(!e||typeof e!="object"||Array.isArray(e))throw new TypeError("Invalid DAG-PB form");if(!Dl(e,Ww))throw new TypeError("Invalid DAG-PB form (extraneous properties)");if(e.Data!==void 0&&!(e.Data instanceof Uint8Array))throw new TypeError("Invalid DAG-PB form (Data must be a Uint8Array)");if(!Array.isArray(e.Links))throw new TypeError("Invalid DAG-PB form (Links must be an array)");for(let t=0;t<e.Links.length;t++){let r=e.Links[t];if(!r||typeof r!="object"||Array.isArray(r))throw new TypeError("Invalid DAG-PB form (bad link object)");if(!Dl(r,Hw))throw new TypeError("Invalid DAG-PB form (extraneous properties on link object)");if(!r.Hash)throw new TypeError("Invalid DAG-PB form (link must have a Hash)");if(r.Hash.asCID!==r.Hash)throw new TypeError("Invalid DAG-PB form (link Hash must be a CID)");if(r.Name!==void 0&&typeof r.Name!="string")throw new TypeError("Invalid DAG-PB form (link Name must be a string)");if(r.Tsize!==void 0&&(typeof r.Tsize!="number"||r.Tsize%1!==0))throw new TypeError("Invalid DAG-PB form (link Tsize must be an integer)");if(t>0&&Gw(r,e.Links[t-1])===-1)throw new TypeError("Invalid DAG-PB form (links must be sorted by Name bytes)")}}var hr=112;function Na(e){Jw(e);let t={};return e.Links&&(t.Links=e.Links.map(r=>{let n={};return r.Hash&&(n.Hash=r.Hash.bytes),r.Name!==void 0&&(n.Name=r.Name),r.Tsize!==void 0&&(n.Tsize=r.Tsize),n})),e.Data&&(t.Data=e.Data),Mw(t)}function Ra(e){let t=jw(e),r={};return t.Data&&(r.Data=t.Data),t.Links&&(r.Links=t.Links.map(n=>{let o={};try{o.Hash=G.decode(n.Hash)}catch{}if(!o.Hash)throw new Error("Invalid Hash field found in link, expected CID");return n.Name!==void 0&&(o.Name=n.Name),n.Tsize!==void 0&&(o.Tsize=n.Tsize),o})),r}v();ce();v();var fn=z($r(),1),Ml=fn.default.Reader,Yw=fn.default.Writer;fn.default.util;var Ci=fn.default.roots.default||(fn.default.roots.default={}),Qw=Ci.ipfs=(()=>{let e={};return e.pin=function(){let t={};return t.Set=function(){function r(n){if(n)for(var o=Object.keys(n),u=0;u<o.length;++u)n[o[u]]!=null&&(this[o[u]]=n[o[u]])}return r.prototype.version=0,r.prototype.fanout=0,r.prototype.seed=0,r.encode=function(n,o){return o||(o=Yw.create()),n.version!=null&&Object.hasOwnProperty.call(n,"version")&&o.uint32(8).uint32(n.version),n.fanout!=null&&Object.hasOwnProperty.call(n,"fanout")&&o.uint32(16).uint32(n.fanout),n.seed!=null&&Object.hasOwnProperty.call(n,"seed")&&o.uint32(29).fixed32(n.seed),o},r.decode=function(n,o){n instanceof Ml||(n=Ml.create(n));for(var u=o===void 0?n.len:n.pos+o,c=new Ci.ipfs.pin.Set;n.pos<u;){var a=n.uint32();switch(a>>>3){case 1:c.version=n.uint32();break;case 2:c.fanout=n.uint32();break;case 3:c.seed=n.fixed32();break;default:n.skipType(a&7);break}}return c},r.fromObject=function(n){if(n instanceof Ci.ipfs.pin.Set)return n;var o=new Ci.ipfs.pin.Set;return n.version!=null&&(o.version=n.version>>>0),n.fanout!=null&&(o.fanout=n.fanout>>>0),n.seed!=null&&(o.seed=n.seed>>>0),o},r.toObject=function(n,o){o||(o={});var u={};return o.defaults&&(u.version=0,u.fanout=0,u.seed=0),n.version!=null&&n.hasOwnProperty("version")&&(u.version=n.version),n.fanout!=null&&n.hasOwnProperty("fanout")&&(u.fanout=n.fanout),n.seed!=null&&n.hasOwnProperty("seed")&&(u.seed=n.seed),u},r.prototype.toJSON=function(){return this.constructor.toObject(this,fn.default.util.toJSONOptions)},r}(),t}(),e})(),Zw=z(Vy(),1),zs=z(nt(),1);v();Ge();ce();var Hi=new Ee("/local/pins"),ps=256,Xw=8192,Gf=G.parse("QmdfTbBqBPQ7VNxZEYEj14VmRuZBkqFbiwReogJgS1zR1n"),an={direct:"direct",recursive:"recursive"};function zl(e){return new Ee(`/${ie.encode(e.multihash.bytes).toUpperCase().substring(1)}`)}Ur();v();function eb(e,t){for(let r=0;r<e.byteLength;r++){if(e[r]<t[r])return-1;if(e[r]>t[r])return 1}return e.byteLength>t.byteLength?1:e.byteLength<t.byteLength?-1:0}ye();Ve();ui();var qs=Qw.pin.Set;function tb(e){let t=e.Data;if(!t)throw new Error("No data present");let r=zs.default.decode(t),n=zs.default.decode.bytes;if(n<=0)throw new Error("Invalid Set header length");if(n+r>t.length)throw new Error("Impossibly large set header length");let o=t.slice(n,r+n),u=qs.toObject(qs.decode(o),{defaults:!1,arrays:!0,longs:Number,objects:!1});if(u.version!==1)throw new Error(`Unsupported Set version: ${u.version}`);if(u.fanout>e.Links.length)throw new Error("Impossibly large fanout");return{header:u,data:t.slice(r+n)}}function rb(e,t){let r=new Uint8Array(4);new DataView(r.buffer).setUint32(0,e,!0);let n=Ue(t.toString()),o=$e([r,n],r.byteLength+n.byteLength);return(0,Zw.default)(re(o))}async function*Jf(e,t){let r=tb(t),n=0;for(let o of t.Links){if(n<r.header.fanout){let u=o.Hash;if(!Gf.equals(u)){let c=await e.get(u),a=Ra(c);yield*Jf(e,a)}}else yield o.Hash;n++}}async function*Oi(e,t,r){let n=t.Links.find(c=>c.Name===r);if(!n)throw new Error("No link found with name "+r);let o=await e.get(n.Hash),u=Ra(o);yield*Jf(e,u)}function nb(e,t){return r(t,0);async function r(n,o){let u=qs.encode({version:1,fanout:ps,seed:o}).finish(),c=zs.default.encode(u.length),a=$e([c,u]),h=[];for(let m=0;m<ps;m++)h.push({Name:"",Tsize:1,Hash:Gf});if(n.length<=Xw){let m=n.map(p=>({link:{Name:"",Tsize:1,Hash:p.key},data:p.data||new Uint8Array})).sort((p,f)=>eb(p.link.Hash.bytes,f.link.Hash.bytes)),w=h.concat(m.map(p=>p.link));return{Data:$e([a,...m.map(p=>p.data)]),Links:w}}else{let m=n.reduce((p,f)=>{let y=rb(o,f.key)%ps;return p[y]=y in p?p[y].concat([f]):[f],p},[]),w=0;for(let p of m){let f=await r(p,o+1);await d(f,w),w++}return{Data:a,Links:h}}async function d(m,w){let p=Na(m),f=await mr.digest(p),y=G.createV0(f);await e.put(y,p);let b=m.Links.reduce((g,A)=>g+(A.Tsize||0),0)+p.length;h[w]={Name:"",Tsize:b,Hash:y}}}}async function ql(e,t,r){let n=await nb(e,r.map(h=>({key:h}))),o=Na(n),u=await mr.digest(o),c=G.createV0(u);await e.put(c,o);let a=n.Links.reduce((h,d)=>h+d.Tsize,0)+o.length;return{Name:t,Tsize:a,Hash:c}}var Vs=z(nf(),1);ui();He();Ge();async function ib(e,t,r,n){if(!await t.has(Hi))return;let o=await t.get(Hi),u=G.decode(o),c=await e.get(u),a=Ra(c),h=0,d=await(0,Vs.default)(Oi(e,a,an.recursive))+await(0,Vs.default)(Oi(e,a,an.direct));for await(let m of Oi(e,a,an.recursive)){h++;let w={depth:1/0};m.version!==0&&(w.version=m.version),m.code!==hr&&(w.codec=m.code),await r.put(zl(m),Qn(w)),n(h/d*100,`Migrated recursive pin ${m}`)}for await(let m of Oi(e,a,an.direct)){h++;let w={depth:0};m.version!==0&&(w.version=m.version),m.code!==hr&&(w.codec=m.code),await r.put(zl(m),Qn(w)),n(h/d*100,`Migrated direct pin ${m}`)}await e.delete(u),await t.delete(Hi)}async function ob(e,t,r,n){let o=[],u=[],c=0,a=await(0,Vs.default)(r.queryKeys({}));for await(let{key:p,value:f}of r.query({})){c++;let y=sr(f),b=G.create(y.version||0,y.codec||hr,Xe(ie.decode("b"+p.toString().toLowerCase().split("/").pop())));y.depth===0?(n(c/a*100,`Reverted direct pin ${b}`),u.push(b)):(n(c/a*100,`Reverted recursive pin ${b}`),o.push(b))}n(100,"Updating pin root");let h={Links:[await ql(e,an.direct,u),await ql(e,an.recursive,o)]},d=Na(h),m=await mr.digest(d),w=G.createV0(m);await e.put(w,d),await t.put(Hi,w.bytes)}async function Vl(e,t,r){let n=e.blocks,o=e.datastore,u=e.pins;await n.open(),await o.open(),await u.open();try{await r(n,o,u,t)}finally{await u.close(),await o.close(),await n.close()}}var sb={version:9,description:"Migrates pins to datastore",migrate:(e,t=()=>{})=>Vl(e,t,ib),revert:(e,t=()=>{})=>Vl(e,t,ob)};v();v();var on={};pe(on,{abortedError:()=>cb,dbDeleteFailedError:()=>ub,dbOpenFailedError:()=>ab,dbWriteFailedError:()=>lb,notFoundError:()=>ei});v();var pi=z(Je(),1);function ab(e){return e=e||new Error("Cannot open database"),(0,pi.default)(e,"ERR_DB_OPEN_FAILED")}function ub(e){return e=e||new Error("Delete failed"),(0,pi.default)(e,"ERR_DB_DELETE_FAILED")}function lb(e){return e=e||new Error("Write failed"),(0,pi.default)(e,"ERR_DB_WRITE_FAILED")}function ei(e){return e=e||new Error("Not Found"),(0,pi.default)(e,"ERR_NOT_FOUND")}function cb(e){return e=e||new Error("Aborted"),(0,pi.default)(e,"ERR_ABORTED")}new Ee("/config");new Ee("/version");function Oo(e){let t=e;for(;t.db||t.child;)if(t=t.db||t.child,t.type==="level-js"||t.constructor.name==="Level")return t}Ve();ye();async function pb(e,t,r=()=>{}){let n=Oo(t);if(!n){r(`${e} did not need an upgrade`);return}r(`Upgrading ${e}`),await Zf(n,(o,u)=>[{type:"del",key:o},{type:"put",key:Ue(o),value:u}])}async function yb(e,t,r=()=>{}){let n=Oo(t);if(!n){r(`${e} did not need a downgrade`);return}r(`Downgrading ${e}`),await Zf(n,(o,u)=>[{type:"del",key:o},{type:"put",key:re(o),value:u}])}function Qf(e){return e.child?Qf(e.child):e}async function Kl(e,t,r){let n=Object.entries(e).map(([c,a])=>({key:c,backend:Qf(a)})).filter(({key:c,backend:a})=>a.constructor.name==="LevelDatastore").map(({key:c,backend:a})=>({name:c,store:a}));t(0,`Migrating ${n.length} dbs`);let o=0,u=c=>{t(Math.round(o/n.length*100),c)};for(let{name:c,store:a}of n){await a.open();try{await r(c,a,u)}finally{o++,await a.close()}}t(100,`Migrated ${n.length} dbs`)}var gb={version:10,description:"Migrates datastore-level keys to binary",migrate:(e,t=()=>{})=>Kl(e,t,pb),revert:(e,t=()=>{})=>Kl(e,t,yb)};function Zf(e,t){function r(n,o){let u=e.store("readwrite"),c=u.transaction,a=0,h;c.onabort=()=>o(h||c.error||new Error("aborted by user")),c.oncomplete=()=>o();function d(){let m=n[a++],w=m.key,p;try{p=m.type==="del"?u.delete(w):u.put(m.value,w)}catch(f){h=f,c.abort();return}a<n.length&&(p.onsuccess=d)}d()}return new Promise((n,o)=>{let u=e.iterator(),c=h=>h;u._deserializeKey=u._deserializeValue=c,a();function a(){let h=(d,m,w)=>{if(d||m===void 0){let p=f=>{if(f){o(f);return}n()};u.end(p);return}r(t(m,w),a)};u.next(h)}})}v();var fr=new Ee("/local/filesroot");async function wb(e,t=()=>{}){if(t(100,"Migrating MFS root to repo datastore"),await e.root.open(),await e.datastore.open(),await e.root.has(fr)){let r=await e.root.get(fr);await e.datastore.put(fr,r),await e.root.delete(fr)}await e.datastore.close(),await e.root.close(),t(100,"Stored MFS root in repo datastore")}async function bb(e,t=()=>{}){if(t(100,"Migrating MFS root to repo root datastore"),await e.root.open(),await e.datastore.open(),await e.datastore.has(fr)){let r=await e.datastore.get(fr);await e.root.put(fr,r),await e.datastore.delete(fr)}await e.datastore.close(),await e.root.close(),t(100,"Stored MFS root in repo root datastore")}var mb={version:11,description:"Store mfs root in the datastore",migrate:wb,revert:bb};v();var Xf=z($r(),1);v();var dn=z($r(),1),Wl=dn.default.Reader,vb=dn.default.Writer,Eb=dn.default.util,Fi=dn.default.roots.default||(dn.default.roots.default={}),ed=Fi.Protocols=(()=>{function e(t){if(this.protocols=[],t)for(var r=Object.keys(t),n=0;n<r.length;++n)t[r[n]]!=null&&(this[r[n]]=t[r[n]])}return e.prototype.protocols=Eb.emptyArray,e.encode=function(t,r){if(r||(r=vb.create()),t.protocols!=null&&t.protocols.length)for(var n=0;n<t.protocols.length;++n)r.uint32(10).string(t.protocols[n]);return r},e.decode=function(t,r){t instanceof Wl||(t=Wl.create(t));for(var n=r===void 0?t.len:t.pos+r,o=new Fi.Protocols;t.pos<n;){var u=t.uint32();switch(u>>>3){case 1:o.protocols&&o.protocols.length||(o.protocols=[]),o.protocols.push(t.string());break;default:t.skipType(u&7);break}}return o},e.fromObject=function(t){if(t instanceof Fi.Protocols)return t;var r=new Fi.Protocols;if(t.protocols){if(!Array.isArray(t.protocols))throw TypeError(".Protocols.protocols: array expected");r.protocols=[];for(var n=0;n<t.protocols.length;++n)r.protocols[n]=String(t.protocols[n])}return r},e.toObject=function(t,r){r||(r={});var n={};if((r.arrays||r.defaults)&&(n.protocols=[]),t.protocols&&t.protocols.length){n.protocols=[];for(var o=0;o<t.protocols.length;++o)n.protocols[o]=t.protocols[o]}return n},e.prototype.toJSON=function(){return this.constructor.toObject(this,dn.default.util.toJSONOptions)},e})();v();var yr=z($r(),1),Xr=yr.default.Reader,ys=yr.default.Writer,we=yr.default.util,Ne=yr.default.roots.default||(yr.default.roots.default={}),td=Ne.Addresses=(()=>{function e(t){if(this.addrs=[],t)for(var r=Object.keys(t),n=0;n<r.length;++n)t[r[n]]!=null&&(this[r[n]]=t[r[n]])}return e.prototype.addrs=we.emptyArray,e.prototype.certifiedRecord=null,e.encode=function(t,r){if(r||(r=ys.create()),t.addrs!=null&&t.addrs.length)for(var n=0;n<t.addrs.length;++n)Ne.Addresses.Address.encode(t.addrs[n],r.uint32(10).fork()).ldelim();return t.certifiedRecord!=null&&Object.hasOwnProperty.call(t,"certifiedRecord")&&Ne.Addresses.CertifiedRecord.encode(t.certifiedRecord,r.uint32(18).fork()).ldelim(),r},e.decode=function(t,r){t instanceof Xr||(t=Xr.create(t));for(var n=r===void 0?t.len:t.pos+r,o=new Ne.Addresses;t.pos<n;){var u=t.uint32();switch(u>>>3){case 1:o.addrs&&o.addrs.length||(o.addrs=[]),o.addrs.push(Ne.Addresses.Address.decode(t,t.uint32()));break;case 2:o.certifiedRecord=Ne.Addresses.CertifiedRecord.decode(t,t.uint32());break;default:t.skipType(u&7);break}}return o},e.fromObject=function(t){if(t instanceof Ne.Addresses)return t;var r=new Ne.Addresses;if(t.addrs){if(!Array.isArray(t.addrs))throw TypeError(".Addresses.addrs: array expected");r.addrs=[];for(var n=0;n<t.addrs.length;++n){if(typeof t.addrs[n]!="object")throw TypeError(".Addresses.addrs: object expected");r.addrs[n]=Ne.Addresses.Address.fromObject(t.addrs[n])}}if(t.certifiedRecord!=null){if(typeof t.certifiedRecord!="object")throw TypeError(".Addresses.certifiedRecord: object expected");r.certifiedRecord=Ne.Addresses.CertifiedRecord.fromObject(t.certifiedRecord)}return r},e.toObject=function(t,r){r||(r={});var n={};if((r.arrays||r.defaults)&&(n.addrs=[]),r.defaults&&(n.certifiedRecord=null),t.addrs&&t.addrs.length){n.addrs=[];for(var o=0;o<t.addrs.length;++o)n.addrs[o]=Ne.Addresses.Address.toObject(t.addrs[o],r)}return t.certifiedRecord!=null&&t.hasOwnProperty("certifiedRecord")&&(n.certifiedRecord=Ne.Addresses.CertifiedRecord.toObject(t.certifiedRecord,r)),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,yr.default.util.toJSONOptions)},e.Address=function(){function t(n){if(n)for(var o=Object.keys(n),u=0;u<o.length;++u)n[o[u]]!=null&&(this[o[u]]=n[o[u]])}t.prototype.multiaddr=we.newBuffer([]),t.prototype.isCertified=null;let r;return Object.defineProperty(t.prototype,"_isCertified",{get:we.oneOfGetter(r=["isCertified"]),set:we.oneOfSetter(r)}),t.encode=function(n,o){return o||(o=ys.create()),n.multiaddr!=null&&Object.hasOwnProperty.call(n,"multiaddr")&&o.uint32(10).bytes(n.multiaddr),n.isCertified!=null&&Object.hasOwnProperty.call(n,"isCertified")&&o.uint32(16).bool(n.isCertified),o},t.decode=function(n,o){n instanceof Xr||(n=Xr.create(n));for(var u=o===void 0?n.len:n.pos+o,c=new Ne.Addresses.Address;n.pos<u;){var a=n.uint32();switch(a>>>3){case 1:c.multiaddr=n.bytes();break;case 2:c.isCertified=n.bool();break;default:n.skipType(a&7);break}}return c},t.fromObject=function(n){if(n instanceof Ne.Addresses.Address)return n;var o=new Ne.Addresses.Address;return n.multiaddr!=null&&(typeof n.multiaddr=="string"?we.base64.decode(n.multiaddr,o.multiaddr=we.newBuffer(we.base64.length(n.multiaddr)),0):n.multiaddr.length&&(o.multiaddr=n.multiaddr)),n.isCertified!=null&&(o.isCertified=Boolean(n.isCertified)),o},t.toObject=function(n,o){o||(o={});var u={};return o.defaults&&(o.bytes===String?u.multiaddr="":(u.multiaddr=[],o.bytes!==Array&&(u.multiaddr=we.newBuffer(u.multiaddr)))),n.multiaddr!=null&&n.hasOwnProperty("multiaddr")&&(u.multiaddr=o.bytes===String?we.base64.encode(n.multiaddr,0,n.multiaddr.length):o.bytes===Array?Array.prototype.slice.call(n.multiaddr):n.multiaddr),n.isCertified!=null&&n.hasOwnProperty("isCertified")&&(u.isCertified=n.isCertified,o.oneofs&&(u._isCertified="isCertified")),u},t.prototype.toJSON=function(){return this.constructor.toObject(this,yr.default.util.toJSONOptions)},t}(),e.CertifiedRecord=function(){function t(r){if(r)for(var n=Object.keys(r),o=0;o<n.length;++o)r[n[o]]!=null&&(this[n[o]]=r[n[o]])}return t.prototype.seq=we.Long?we.Long.fromBits(0,0,!0):0,t.prototype.raw=we.newBuffer([]),t.encode=function(r,n){return n||(n=ys.create()),r.seq!=null&&Object.hasOwnProperty.call(r,"seq")&&n.uint32(8).uint64(r.seq),r.raw!=null&&Object.hasOwnProperty.call(r,"raw")&&n.uint32(18).bytes(r.raw),n},t.decode=function(r,n){r instanceof Xr||(r=Xr.create(r));for(var o=n===void 0?r.len:r.pos+n,u=new Ne.Addresses.CertifiedRecord;r.pos<o;){var c=r.uint32();switch(c>>>3){case 1:u.seq=r.uint64();break;case 2:u.raw=r.bytes();break;default:r.skipType(c&7);break}}return u},t.fromObject=function(r){if(r instanceof Ne.Addresses.CertifiedRecord)return r;var n=new Ne.Addresses.CertifiedRecord;return r.seq!=null&&(we.Long?(n.seq=we.Long.fromValue(r.seq)).unsigned=!0:typeof r.seq=="string"?n.seq=parseInt(r.seq,10):typeof r.seq=="number"?n.seq=r.seq:typeof r.seq=="object"&&(n.seq=new we.LongBits(r.seq.low>>>0,r.seq.high>>>0).toNumber(!0))),r.raw!=null&&(typeof r.raw=="string"?we.base64.decode(r.raw,n.raw=we.newBuffer(we.base64.length(r.raw)),0):r.raw.length&&(n.raw=r.raw)),n},t.toObject=function(r,n){n||(n={});var o={};if(n.defaults){if(we.Long){var u=new we.Long(0,0,!0);o.seq=n.longs===String?u.toString():n.longs===Number?u.toNumber():u}else o.seq=n.longs===String?"0":0;n.bytes===String?o.raw="":(o.raw=[],n.bytes!==Array&&(o.raw=we.newBuffer(o.raw)))}return r.seq!=null&&r.hasOwnProperty("seq")&&(typeof r.seq=="number"?o.seq=n.longs===String?String(r.seq):r.seq:o.seq=n.longs===String?we.Long.prototype.toString.call(r.seq):n.longs===Number?new we.LongBits(r.seq.low>>>0,r.seq.high>>>0).toNumber(!0):r.seq),r.raw!=null&&r.hasOwnProperty("raw")&&(o.raw=n.bytes===String?we.base64.encode(r.raw,0,r.raw.length):n.bytes===Array?Array.prototype.slice.call(r.raw):r.raw),o},t.prototype.toJSON=function(){return this.constructor.toObject(this,yr.default.util.toJSONOptions)},t}(),e})();v();var Er=z($r(),1),pn=Er.default.Reader,Ua=Er.default.Writer,ue=Er.default.util,Be=Er.default.roots.default||(Er.default.roots.default={}),rd=Be.Peer=(()=>{function e(r){if(this.addresses=[],this.protocols=[],this.metadata=[],r)for(var n=Object.keys(r),o=0;o<n.length;++o)r[n[o]]!=null&&(this[n[o]]=r[n[o]])}e.prototype.addresses=ue.emptyArray,e.prototype.protocols=ue.emptyArray,e.prototype.metadata=ue.emptyArray,e.prototype.pubKey=null,e.prototype.peerRecordEnvelope=null;let t;return Object.defineProperty(e.prototype,"_pubKey",{get:ue.oneOfGetter(t=["pubKey"]),set:ue.oneOfSetter(t)}),Object.defineProperty(e.prototype,"_peerRecordEnvelope",{get:ue.oneOfGetter(t=["peerRecordEnvelope"]),set:ue.oneOfSetter(t)}),e.encode=function(r,n){if(n||(n=Ua.create()),r.addresses!=null&&r.addresses.length)for(var o=0;o<r.addresses.length;++o)Be.Address.encode(r.addresses[o],n.uint32(10).fork()).ldelim();if(r.protocols!=null&&r.protocols.length)for(var o=0;o<r.protocols.length;++o)n.uint32(18).string(r.protocols[o]);if(r.metadata!=null&&r.metadata.length)for(var o=0;o<r.metadata.length;++o)Be.Metadata.encode(r.metadata[o],n.uint32(26).fork()).ldelim();return r.pubKey!=null&&Object.hasOwnProperty.call(r,"pubKey")&&n.uint32(34).bytes(r.pubKey),r.peerRecordEnvelope!=null&&Object.hasOwnProperty.call(r,"peerRecordEnvelope")&&n.uint32(42).bytes(r.peerRecordEnvelope),n},e.decode=function(r,n){r instanceof pn||(r=pn.create(r));for(var o=n===void 0?r.len:r.pos+n,u=new Be.Peer;r.pos<o;){var c=r.uint32();switch(c>>>3){case 1:u.addresses&&u.addresses.length||(u.addresses=[]),u.addresses.push(Be.Address.decode(r,r.uint32()));break;case 2:u.protocols&&u.protocols.length||(u.protocols=[]),u.protocols.push(r.string());break;case 3:u.metadata&&u.metadata.length||(u.metadata=[]),u.metadata.push(Be.Metadata.decode(r,r.uint32()));break;case 4:u.pubKey=r.bytes();break;case 5:u.peerRecordEnvelope=r.bytes();break;default:r.skipType(c&7);break}}return u},e.fromObject=function(r){if(r instanceof Be.Peer)return r;var n=new Be.Peer;if(r.addresses){if(!Array.isArray(r.addresses))throw TypeError(".Peer.addresses: array expected");n.addresses=[];for(var o=0;o<r.addresses.length;++o){if(typeof r.addresses[o]!="object")throw TypeError(".Peer.addresses: object expected");n.addresses[o]=Be.Address.fromObject(r.addresses[o])}}if(r.protocols){if(!Array.isArray(r.protocols))throw TypeError(".Peer.protocols: array expected");n.protocols=[];for(var o=0;o<r.protocols.length;++o)n.protocols[o]=String(r.protocols[o])}if(r.metadata){if(!Array.isArray(r.metadata))throw TypeError(".Peer.metadata: array expected");n.metadata=[];for(var o=0;o<r.metadata.length;++o){if(typeof r.metadata[o]!="object")throw TypeError(".Peer.metadata: object expected");n.metadata[o]=Be.Metadata.fromObject(r.metadata[o])}}return r.pubKey!=null&&(typeof r.pubKey=="string"?ue.base64.decode(r.pubKey,n.pubKey=ue.newBuffer(ue.base64.length(r.pubKey)),0):r.pubKey.length&&(n.pubKey=r.pubKey)),r.peerRecordEnvelope!=null&&(typeof r.peerRecordEnvelope=="string"?ue.base64.decode(r.peerRecordEnvelope,n.peerRecordEnvelope=ue.newBuffer(ue.base64.length(r.peerRecordEnvelope)),0):r.peerRecordEnvelope.length&&(n.peerRecordEnvelope=r.peerRecordEnvelope)),n},e.toObject=function(r,n){n||(n={});var o={};if((n.arrays||n.defaults)&&(o.addresses=[],o.protocols=[],o.metadata=[]),r.addresses&&r.addresses.length){o.addresses=[];for(var u=0;u<r.addresses.length;++u)o.addresses[u]=Be.Address.toObject(r.addresses[u],n)}if(r.protocols&&r.protocols.length){o.protocols=[];for(var u=0;u<r.protocols.length;++u)o.protocols[u]=r.protocols[u]}if(r.metadata&&r.metadata.length){o.metadata=[];for(var u=0;u<r.metadata.length;++u)o.metadata[u]=Be.Metadata.toObject(r.metadata[u],n)}return r.pubKey!=null&&r.hasOwnProperty("pubKey")&&(o.pubKey=n.bytes===String?ue.base64.encode(r.pubKey,0,r.pubKey.length):n.bytes===Array?Array.prototype.slice.call(r.pubKey):r.pubKey,n.oneofs&&(o._pubKey="pubKey")),r.peerRecordEnvelope!=null&&r.hasOwnProperty("peerRecordEnvelope")&&(o.peerRecordEnvelope=n.bytes===String?ue.base64.encode(r.peerRecordEnvelope,0,r.peerRecordEnvelope.length):n.bytes===Array?Array.prototype.slice.call(r.peerRecordEnvelope):r.peerRecordEnvelope,n.oneofs&&(o._peerRecordEnvelope="peerRecordEnvelope")),o},e.prototype.toJSON=function(){return this.constructor.toObject(this,Er.default.util.toJSONOptions)},e})();Be.Address=(()=>{function e(r){if(r)for(var n=Object.keys(r),o=0;o<n.length;++o)r[n[o]]!=null&&(this[n[o]]=r[n[o]])}e.prototype.multiaddr=ue.newBuffer([]),e.prototype.isCertified=null;let t;return Object.defineProperty(e.prototype,"_isCertified",{get:ue.oneOfGetter(t=["isCertified"]),set:ue.oneOfSetter(t)}),e.encode=function(r,n){return n||(n=Ua.create()),r.multiaddr!=null&&Object.hasOwnProperty.call(r,"multiaddr")&&n.uint32(10).bytes(r.multiaddr),r.isCertified!=null&&Object.hasOwnProperty.call(r,"isCertified")&&n.uint32(16).bool(r.isCertified),n},e.decode=function(r,n){r instanceof pn||(r=pn.create(r));for(var o=n===void 0?r.len:r.pos+n,u=new Be.Address;r.pos<o;){var c=r.uint32();switch(c>>>3){case 1:u.multiaddr=r.bytes();break;case 2:u.isCertified=r.bool();break;default:r.skipType(c&7);break}}return u},e.fromObject=function(r){if(r instanceof Be.Address)return r;var n=new Be.Address;return r.multiaddr!=null&&(typeof r.multiaddr=="string"?ue.base64.decode(r.multiaddr,n.multiaddr=ue.newBuffer(ue.base64.length(r.multiaddr)),0):r.multiaddr.length&&(n.multiaddr=r.multiaddr)),r.isCertified!=null&&(n.isCertified=Boolean(r.isCertified)),n},e.toObject=function(r,n){n||(n={});var o={};return n.defaults&&(n.bytes===String?o.multiaddr="":(o.multiaddr=[],n.bytes!==Array&&(o.multiaddr=ue.newBuffer(o.multiaddr)))),r.multiaddr!=null&&r.hasOwnProperty("multiaddr")&&(o.multiaddr=n.bytes===String?ue.base64.encode(r.multiaddr,0,r.multiaddr.length):n.bytes===Array?Array.prototype.slice.call(r.multiaddr):r.multiaddr),r.isCertified!=null&&r.hasOwnProperty("isCertified")&&(o.isCertified=r.isCertified,n.oneofs&&(o._isCertified="isCertified")),o},e.prototype.toJSON=function(){return this.constructor.toObject(this,Er.default.util.toJSONOptions)},e})();Be.Metadata=(()=>{function e(t){if(t)for(var r=Object.keys(t),n=0;n<r.length;++n)t[r[n]]!=null&&(this[r[n]]=t[r[n]])}return e.prototype.key="",e.prototype.value=ue.newBuffer([]),e.encode=function(t,r){return r||(r=Ua.create()),t.key!=null&&Object.hasOwnProperty.call(t,"key")&&r.uint32(10).string(t.key),t.value!=null&&Object.hasOwnProperty.call(t,"value")&&r.uint32(18).bytes(t.value),r},e.decode=function(t,r){t instanceof pn||(t=pn.create(t));for(var n=r===void 0?t.len:t.pos+r,o=new Be.Metadata;t.pos<n;){var u=t.uint32();switch(u>>>3){case 1:o.key=t.string();break;case 2:o.value=t.bytes();break;default:t.skipType(u&7);break}}return o},e.fromObject=function(t){if(t instanceof Be.Metadata)return t;var r=new Be.Metadata;return t.key!=null&&(r.key=String(t.key)),t.value!=null&&(typeof t.value=="string"?ue.base64.decode(t.value,r.value=ue.newBuffer(ue.base64.length(t.value)),0):t.value.length&&(r.value=t.value)),r},e.toObject=function(t,r){r||(r={});var n={};return r.defaults&&(n.key="",r.bytes===String?n.value="":(n.value=[],r.bytes!==Array&&(n.value=ue.newBuffer(n.value)))),t.key!=null&&t.hasOwnProperty("key")&&(n.key=t.key),t.value!=null&&t.hasOwnProperty("value")&&(n.value=r.bytes===String?ue.base64.encode(t.value,0,t.value.length):r.bytes===Array?Array.prototype.slice.call(t.value):t.value),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,Er.default.util.toJSONOptions)},e})();v();var yn=z($r(),1),Hl=yn.default.Reader,xb=yn.default.Writer,be=yn.default.util,Ni=yn.default.roots.default||(yn.default.roots.default={}),_b=Ni.Envelope=(()=>{function e(t){if(t)for(var r=Object.keys(t),n=0;n<r.length;++n)t[r[n]]!=null&&(this[r[n]]=t[r[n]])}return e.prototype.publicKey=be.newBuffer([]),e.prototype.payloadType=be.newBuffer([]),e.prototype.payload=be.newBuffer([]),e.prototype.signature=be.newBuffer([]),e.encode=function(t,r){return r||(r=xb.create()),t.publicKey!=null&&Object.hasOwnProperty.call(t,"publicKey")&&r.uint32(10).bytes(t.publicKey),t.payloadType!=null&&Object.hasOwnProperty.call(t,"payloadType")&&r.uint32(18).bytes(t.payloadType),t.payload!=null&&Object.hasOwnProperty.call(t,"payload")&&r.uint32(26).bytes(t.payload),t.signature!=null&&Object.hasOwnProperty.call(t,"signature")&&r.uint32(42).bytes(t.signature),r},e.decode=function(t,r){t instanceof Hl||(t=Hl.create(t));for(var n=r===void 0?t.len:t.pos+r,o=new Ni.Envelope;t.pos<n;){var u=t.uint32();switch(u>>>3){case 1:o.publicKey=t.bytes();break;case 2:o.payloadType=t.bytes();break;case 3:o.payload=t.bytes();break;case 5:o.signature=t.bytes();break;default:t.skipType(u&7);break}}return o},e.fromObject=function(t){if(t instanceof Ni.Envelope)return t;var r=new Ni.Envelope;return t.publicKey!=null&&(typeof t.publicKey=="string"?be.base64.decode(t.publicKey,r.publicKey=be.newBuffer(be.base64.length(t.publicKey)),0):t.publicKey.length&&(r.publicKey=t.publicKey)),t.payloadType!=null&&(typeof t.payloadType=="string"?be.base64.decode(t.payloadType,r.payloadType=be.newBuffer(be.base64.length(t.payloadType)),0):t.payloadType.length&&(r.payloadType=t.payloadType)),t.payload!=null&&(typeof t.payload=="string"?be.base64.decode(t.payload,r.payload=be.newBuffer(be.base64.length(t.payload)),0):t.payload.length&&(r.payload=t.payload)),t.signature!=null&&(typeof t.signature=="string"?be.base64.decode(t.signature,r.signature=be.newBuffer(be.base64.length(t.signature)),0):t.signature.length&&(r.signature=t.signature)),r},e.toObject=function(t,r){r||(r={});var n={};return r.defaults&&(r.bytes===String?n.publicKey="":(n.publicKey=[],r.bytes!==Array&&(n.publicKey=be.newBuffer(n.publicKey))),r.bytes===String?n.payloadType="":(n.payloadType=[],r.bytes!==Array&&(n.payloadType=be.newBuffer(n.payloadType))),r.bytes===String?n.payload="":(n.payload=[],r.bytes!==Array&&(n.payload=be.newBuffer(n.payload))),r.bytes===String?n.signature="":(n.signature=[],r.bytes!==Array&&(n.signature=be.newBuffer(n.signature)))),t.publicKey!=null&&t.hasOwnProperty("publicKey")&&(n.publicKey=r.bytes===String?be.base64.encode(t.publicKey,0,t.publicKey.length):r.bytes===Array?Array.prototype.slice.call(t.publicKey):t.publicKey),t.payloadType!=null&&t.hasOwnProperty("payloadType")&&(n.payloadType=r.bytes===String?be.base64.encode(t.payloadType,0,t.payloadType.length):r.bytes===Array?Array.prototype.slice.call(t.payloadType):t.payloadType),t.payload!=null&&t.hasOwnProperty("payload")&&(n.payload=r.bytes===String?be.base64.encode(t.payload,0,t.payload.length):r.bytes===Array?Array.prototype.slice.call(t.payload):t.payload),t.signature!=null&&t.hasOwnProperty("signature")&&(n.signature=r.bytes===String?be.base64.encode(t.signature,0,t.signature.length):r.bytes===Array?Array.prototype.slice.call(t.signature):t.signature),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,yn.default.util.toJSONOptions)},e})();v();var Lr=z($r(),1),Ri=Lr.default.Reader,Gl=Lr.default.Writer,_e=Lr.default.util,pt=Lr.default.roots.default||(Lr.default.roots.default={}),Ab=pt.PeerRecord=(()=>{function e(t){if(this.addresses=[],t)for(var r=Object.keys(t),n=0;n<r.length;++n)t[r[n]]!=null&&(this[r[n]]=t[r[n]])}return e.prototype.peerId=_e.newBuffer([]),e.prototype.seq=_e.Long?_e.Long.fromBits(0,0,!0):0,e.prototype.addresses=_e.emptyArray,e.encode=function(t,r){if(r||(r=Gl.create()),t.peerId!=null&&Object.hasOwnProperty.call(t,"peerId")&&r.uint32(10).bytes(t.peerId),t.seq!=null&&Object.hasOwnProperty.call(t,"seq")&&r.uint32(16).uint64(t.seq),t.addresses!=null&&t.addresses.length)for(var n=0;n<t.addresses.length;++n)pt.PeerRecord.AddressInfo.encode(t.addresses[n],r.uint32(26).fork()).ldelim();return r},e.decode=function(t,r){t instanceof Ri||(t=Ri.create(t));for(var n=r===void 0?t.len:t.pos+r,o=new pt.PeerRecord;t.pos<n;){var u=t.uint32();switch(u>>>3){case 1:o.peerId=t.bytes();break;case 2:o.seq=t.uint64();break;case 3:o.addresses&&o.addresses.length||(o.addresses=[]),o.addresses.push(pt.PeerRecord.AddressInfo.decode(t,t.uint32()));break;default:t.skipType(u&7);break}}return o},e.fromObject=function(t){if(t instanceof pt.PeerRecord)return t;var r=new pt.PeerRecord;if(t.peerId!=null&&(typeof t.peerId=="string"?_e.base64.decode(t.peerId,r.peerId=_e.newBuffer(_e.base64.length(t.peerId)),0):t.peerId.length&&(r.peerId=t.peerId)),t.seq!=null&&(_e.Long?(r.seq=_e.Long.fromValue(t.seq)).unsigned=!0:typeof t.seq=="string"?r.seq=parseInt(t.seq,10):typeof t.seq=="number"?r.seq=t.seq:typeof t.seq=="object"&&(r.seq=new _e.LongBits(t.seq.low>>>0,t.seq.high>>>0).toNumber(!0))),t.addresses){if(!Array.isArray(t.addresses))throw TypeError(".PeerRecord.addresses: array expected");r.addresses=[];for(var n=0;n<t.addresses.length;++n){if(typeof t.addresses[n]!="object")throw TypeError(".PeerRecord.addresses: object expected");r.addresses[n]=pt.PeerRecord.AddressInfo.fromObject(t.addresses[n])}}return r},e.toObject=function(t,r){r||(r={});var n={};if((r.arrays||r.defaults)&&(n.addresses=[]),r.defaults)if(r.bytes===String?n.peerId="":(n.peerId=[],r.bytes!==Array&&(n.peerId=_e.newBuffer(n.peerId))),_e.Long){var o=new _e.Long(0,0,!0);n.seq=r.longs===String?o.toString():r.longs===Number?o.toNumber():o}else n.seq=r.longs===String?"0":0;if(t.peerId!=null&&t.hasOwnProperty("peerId")&&(n.peerId=r.bytes===String?_e.base64.encode(t.peerId,0,t.peerId.length):r.bytes===Array?Array.prototype.slice.call(t.peerId):t.peerId),t.seq!=null&&t.hasOwnProperty("seq")&&(typeof t.seq=="number"?n.seq=r.longs===String?String(t.seq):t.seq:n.seq=r.longs===String?_e.Long.prototype.toString.call(t.seq):r.longs===Number?new _e.LongBits(t.seq.low>>>0,t.seq.high>>>0).toNumber(!0):t.seq),t.addresses&&t.addresses.length){n.addresses=[];for(var u=0;u<t.addresses.length;++u)n.addresses[u]=pt.PeerRecord.AddressInfo.toObject(t.addresses[u],r)}return n},e.prototype.toJSON=function(){return this.constructor.toObject(this,Lr.default.util.toJSONOptions)},e.AddressInfo=function(){function t(r){if(r)for(var n=Object.keys(r),o=0;o<n.length;++o)r[n[o]]!=null&&(this[n[o]]=r[n[o]])}return t.prototype.multiaddr=_e.newBuffer([]),t.encode=function(r,n){return n||(n=Gl.create()),r.multiaddr!=null&&Object.hasOwnProperty.call(r,"multiaddr")&&n.uint32(10).bytes(r.multiaddr),n},t.decode=function(r,n){r instanceof Ri||(r=Ri.create(r));for(var o=n===void 0?r.len:r.pos+n,u=new pt.PeerRecord.AddressInfo;r.pos<o;){var c=r.uint32();switch(c>>>3){case 1:u.multiaddr=r.bytes();break;default:r.skipType(c&7);break}}return u},t.fromObject=function(r){if(r instanceof pt.PeerRecord.AddressInfo)return r;var n=new pt.PeerRecord.AddressInfo;return r.multiaddr!=null&&(typeof r.multiaddr=="string"?_e.base64.decode(r.multiaddr,n.multiaddr=_e.newBuffer(_e.base64.length(r.multiaddr)),0):r.multiaddr.length&&(n.multiaddr=r.multiaddr)),n},t.toObject=function(r,n){n||(n={});var o={};return n.defaults&&(n.bytes===String?o.multiaddr="":(o.multiaddr=[],n.bytes!==Array&&(o.multiaddr=_e.newBuffer(o.multiaddr)))),r.multiaddr!=null&&r.hasOwnProperty("multiaddr")&&(o.multiaddr=n.bytes===String?_e.base64.encode(r.multiaddr,0,r.multiaddr.length):n.bytes===Array?Array.prototype.slice.call(r.multiaddr):r.multiaddr),o},t.prototype.toJSON=function(){return this.constructor.toObject(this,Lr.default.util.toJSONOptions)},t}(),e})(),Jl=z(Yy(),1);Xf.default.util.Long=void 0;Xf.default.configure();async function kb(e,t=()=>{}){t(0,"Storing each peerstore key under a single datastore key"),await e.datastore.open();let r={},n=[];for await(let{key:o,value:u}of e.datastore.query({prefix:"/peers"})){n.push(o);let c=o.toString(),[a,h,d,m,w]=c.split("/");if(h==="peers"&&!!["protos","addrs","metadata","keys"].includes(d)&&!!m)if(r[m]=r[m]||{addresses:[],protocols:[],metadata:[]},d==="protos"){let p=ed.decode(u);r[m].protocols=p.protocols.sort()}else if(d==="addrs"){let p=td.decode(u);r[m].addresses=p.addrs.sort((f,y)=>new Jl.Multiaddr(f.multiaddr).toString().localeCompare(new Jl.Multiaddr(y.multiaddr).toString())),p.certifiedRecord&&p.certifiedRecord.raw&&(r[m].peerRecordEnvelope=p.certifiedRecord.raw)}else d==="metadata"?r[m].metadata.push({key:w,value:u}):d==="keys"&&(r[m].pubKey=u)}t(33,"Read peer data from store");for(let o of n)await e.datastore.delete(o);t(66,"Removed existing peer data from store");for(let o of Object.keys(r)){let u=r[o];u.metadata=u.metadata.sort((a,h)=>a.key.localeCompare(h.key));let c=rd.encode(u).finish();await e.datastore.put(new Ee(`/peers/${o}`),c)}await e.datastore.close(),t(100,"Stored each peerstore key under a single datastore key")}async function Sb(e,t=()=>{}){t(0,"Storing each peerstore key under a multiple datastore keys"),await e.datastore.open();let r={},n=[];for await(let{key:o,value:u}of e.datastore.query({prefix:"/peers"})){n.push(o);let c=o.toString(),[a,h,d]=c.split("/");r[d]=rd.decode(u)}t(33,"Read peer data from store");for(let o of n)await e.datastore.delete(o);t(66,"Removed existing peer data from store");for(let[o,u]of Object.entries(r)){if(u.protocols&&u.protocols.length>0&&await e.datastore.put(new Ee(`/peers/protos/${o}`),ed.encode({protocols:u.protocols}).finish()),u.addresses&&u.addresses.length>0){let c=u.peerRecordEnvelope,a;if(c){let h=_b.decode(c),d=Ab.decode(h.payload);a={raw:c,seq:d.seq}}await e.datastore.put(new Ee(`/peers/addrs/${o}`),td.encode({addrs:u.addresses,certifiedRecord:a}).finish())}if(u.metadata&&u.metadata.length>0)for(let{key:c,value:a}of u.metadata)await e.datastore.put(new Ee(`/peers/metadata/${o}/${c}`),a);u.pubKey&&await e.datastore.put(new Ee(`/peers/keys/${o}`),u.pubKey)}await e.datastore.close(),t(100,"Stored each peerstore key under multiple datastore keys")}var Tb={version:12,description:"Store each peerstore peer under a single datastore key",migrate:kb,revert:Sb},Sr={description:"Empty migration.",migrate:()=>{},revert:()=>{},empty:!0};Object.assign({version:1},Sr),Object.assign({version:2},Sr),Object.assign({version:3},Sr),Object.assign({version:4},Sr),Object.assign({version:5},Sr),Object.assign({version:6},Sr),Object.assign({version:7},Sr);v();v();var Ib=z(mt(),1),nd={};pe(nd,{InvalidValueError:()=>Ma,MissingRepoOptionsError:()=>yi,NonReversibleMigrationError:()=>Pa,NotInitializedRepoError:()=>Lo,RequiredParameterError:()=>Da});v();var Pa=class extends Error{constructor(e){super(e),this.name="NonReversibleMigrationError",this.code=Pa.code,this.message=e}};Pa.code="ERR_NON_REVERSIBLE_MIGRATION";var Lo=class extends Error{constructor(e){super(e),this.name="NotInitializedRepoError",this.code=Lo.code,this.message=e}};Lo.code="ERR_NOT_INITIALIZED_REPO";var Da=class extends Error{constructor(e){super(e),this.name="RequiredParameterError",this.code=Da.code,this.message=e}};Da.code="ERR_REQUIRED_PARAMETER";var Ma=class extends Error{constructor(e){super(e),this.name="InvalidValueError",this.code=Ma.code,this.message=e}};Ma.code="ERR_INVALID_VALUE";var yi=class extends Error{constructor(e){super(e),this.name="MissingRepoOptionsError",this.code=yi.code,this.message=e}};yi.code="ERR_MISSING_REPO_OPTIONS";(0,Ib.default)("ipfs:repo:migrator:repo:init");Ve();ye();var Cb=z(mt(),1);(0,Cb.default)("ipfs:repo:migrator");z(Qy(),1);v();var Rb=z(Xy(),1);Rb.default;v();v();v();ye();Ve();var qt="/",sd=new TextEncoder().encode(qt),$i=sd[0],Pe=class{constructor(e,t){if(typeof e=="string")this._buf=Ue(e);else if(e instanceof Uint8Array)this._buf=e;else throw new Error("Invalid key, should be String of Uint8Array");if(t==null&&(t=!0),t&&this.clean(),this._buf.byteLength===0||this._buf[0]!==$i)throw new Error("Invalid key")}toString(e="utf8"){return re(this._buf,e)}uint8Array(){return this._buf}get[Symbol.toStringTag](){return`Key(${this.toString()})`}static withNamespaces(e){return new Pe(e.join(qt))}static random(){return new Pe(_n().replace(/-/g,""))}static asKey(e){return e instanceof Uint8Array||typeof e=="string"?new Pe(e):typeof e.uint8Array=="function"?new Pe(e.uint8Array()):null}clean(){if((this._buf==null||this._buf.byteLength===0)&&(this._buf=sd),this._buf[0]!==$i){let e=new Uint8Array(this._buf.byteLength+1);e.fill($i,0,1),e.set(this._buf,1),this._buf=e}for(;this._buf.byteLength>1&&this._buf[this._buf.byteLength-1]===$i;)this._buf=this._buf.subarray(0,-1)}less(e){let t=this.list(),r=e.list();for(let n=0;n<t.length;n++){if(r.length<n+1)return!1;let o=t[n],u=r[n];if(o<u)return!0;if(o>u)return!1}return t.length<r.length}reverse(){return Pe.withNamespaces(this.list().slice().reverse())}namespaces(){return this.list()}baseNamespace(){let e=this.namespaces();return e[e.length-1]}list(){return this.toString().split(qt).slice(1)}type(){return Ub(this.baseNamespace())}name(){return jb(this.baseNamespace())}instance(e){return new Pe(this.toString()+":"+e)}path(){let e=this.parent().toString();return e.endsWith(qt)||(e+=qt),e+=this.type(),new Pe(e)}parent(){let e=this.list();return e.length===1?new Pe(qt):new Pe(e.slice(0,-1).join(qt))}child(e){return this.toString()===qt?e:e.toString()===qt?this:new Pe(this.toString()+e.toString(),!1)}isAncestorOf(e){return e.toString()===this.toString()?!1:e.toString().startsWith(this.toString())}isDecendantOf(e){return e.toString()===this.toString()?!1:this.toString().startsWith(e.toString())}isTopLevel(){return this.list().length===1}concat(...e){return Pe.withNamespaces([...this.namespaces(),...Pb(e.map(t=>t.namespaces()))])}};function Ub(e){let t=e.split(":");return t.length<2?"":t.slice(0,-1).join(":")}function jb(e){let t=e.split(":");return t[t.length-1]}function Pb(e){return[].concat(...e)}var Db=z(mt(),1);ye();Ve();v();v();var za=class extends Error{constructor(e){super(e),this.name="LockExistsError",this.code=za.code}};za.code="ERR_LOCK_EXISTS";var Fr=class extends Error{constructor(e){super(e),this.name="NotFoundError",this.code=Fr.code}};Fr.code="ERR_NOT_FOUND";var qa=class extends Error{constructor(e){super(e),this.name="InvalidRepoVersionError",this.code=qa.code}};qa.code="ERR_INVALID_REPO_VERSION";(0,Db.default)("ipfs:repo:version");new Pe("version");v();v();var Kb=z(eg(),1);v();var cd=class extends Error{constructor(e){super(e),this.name="TimeoutError"}},Wb=class extends Error{constructor(e){super(),this.name="AbortError",this.message=e}},Yl=e=>globalThis.DOMException===void 0?new Wb(e):new DOMException(e),Ql=e=>{let t=e.reason===void 0?Yl("This operation was aborted."):e.reason;return t instanceof Error?t:Yl(t)};function Hb(e,t,r,n){let o,u=new Promise((c,a)=>{if(typeof t!="number"||Math.sign(t)!==1)throw new TypeError(`Expected \`milliseconds\` to be a positive number, got \`${t}\``);if(t===Number.POSITIVE_INFINITY){c(e);return}if(n={customTimers:{setTimeout,clearTimeout},...n},n.signal){let{signal:h}=n;h.aborted&&a(Ql(h)),h.addEventListener("abort",()=>{a(Ql(h))})}o=n.customTimers.setTimeout.call(void 0,()=>{if(typeof r=="function"){try{c(r())}catch(m){a(m)}return}let h=typeof r=="string"?r:`Promise timed out after ${t} milliseconds`,d=r instanceof Error?r:new cd(h);typeof e.cancel=="function"&&e.cancel(),a(d)},t),(async()=>{try{c(await e)}catch(h){a(h)}finally{n.customTimers.clearTimeout.call(void 0,o)}})()});return u.clear=()=>{clearTimeout(o),o=void 0},u}v();v();function Gb(e,t,r){let n=0,o=e.length;for(;o>0;){let u=Math.trunc(o/2),c=n+u;r(e[c],t)<=0?(n=++c,o-=u+1):o=u}return n}var Tr=function(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)},Vt,Jb=class{constructor(){Vt.set(this,[])}enqueue(e,t){t={priority:0,...t};let r={priority:t.priority,run:e};if(this.size&&Tr(this,Vt,"f")[this.size-1].priority>=t.priority){Tr(this,Vt,"f").push(r);return}let n=Gb(Tr(this,Vt,"f"),r,(o,u)=>u.priority-o.priority);Tr(this,Vt,"f").splice(n,0,r)}dequeue(){var e;return(e=Tr(this,Vt,"f").shift())==null?void 0:e.run}filter(e){return Tr(this,Vt,"f").filter(t=>t.priority===e.priority).map(t=>t.run)}get size(){return Tr(this,Vt,"f").length}};Vt=new WeakMap;var ve=function(e,t,r,n,o){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?o.call(e,r):o?o.value=r:t.set(e,r),r},H=function(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)},Se,Mn,zn,ur,so,qn,Gi,yt,$n,tt,Ji,rt,Vn,ar,Yi,Zl,Xl,hd,ec,tc,rc,Qi,bs,ms,ao,Zi,Yb=new cd,Qb=class extends Error{},Kn=class extends Kb.default{constructor(e){var t,r,n,o;if(super(),Se.add(this),Mn.set(this,void 0),zn.set(this,void 0),ur.set(this,0),so.set(this,void 0),qn.set(this,void 0),Gi.set(this,0),yt.set(this,void 0),$n.set(this,void 0),tt.set(this,void 0),Ji.set(this,void 0),rt.set(this,0),Vn.set(this,void 0),ar.set(this,void 0),Yi.set(this,void 0),Object.defineProperty(this,"timeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),e={carryoverConcurrencyCount:!1,intervalCap:Number.POSITIVE_INFINITY,interval:0,concurrency:Number.POSITIVE_INFINITY,autoStart:!0,queueClass:Jb,...e},!(typeof e.intervalCap=="number"&&e.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${(r=(t=e.intervalCap)===null||t===void 0?void 0:t.toString())!==null&&r!==void 0?r:""}\` (${typeof e.intervalCap})`);if(e.interval===void 0||!(Number.isFinite(e.interval)&&e.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${(o=(n=e.interval)===null||n===void 0?void 0:n.toString())!==null&&o!==void 0?o:""}\` (${typeof e.interval})`);ve(this,Mn,e.carryoverConcurrencyCount,"f"),ve(this,zn,e.intervalCap===Number.POSITIVE_INFINITY||e.interval===0,"f"),ve(this,so,e.intervalCap,"f"),ve(this,qn,e.interval,"f"),ve(this,tt,new e.queueClass,"f"),ve(this,Ji,e.queueClass,"f"),this.concurrency=e.concurrency,this.timeout=e.timeout,ve(this,Yi,e.throwOnTimeout===!0,"f"),ve(this,ar,e.autoStart===!1,"f")}get concurrency(){return H(this,Vn,"f")}set concurrency(e){if(!(typeof e=="number"&&e>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${e}\` (${typeof e})`);ve(this,Vn,e,"f"),H(this,Se,"m",ao).call(this)}async add(e,t={}){return new Promise((r,n)=>{let o=async()=>{var u,c,a;ve(this,rt,(c=H(this,rt,"f"),c++,c),"f"),ve(this,ur,(a=H(this,ur,"f"),a++,a),"f");try{if(!((u=t.signal)===null||u===void 0)&&u.aborted){n(new Qb("The task was aborted."));return}let h=await(this.timeout===void 0&&t.timeout===void 0?e({signal:t.signal}):Hb(Promise.resolve(e({signal:t.signal})),t.timeout===void 0?this.timeout:t.timeout,()=>{(t.throwOnTimeout===void 0?H(this,Yi,"f"):t.throwOnTimeout)&&n(Yb)}));r(h),this.emit("completed",h)}catch(h){n(h),this.emit("error",h)}H(this,Se,"m",hd).call(this)};H(this,tt,"f").enqueue(o,t),H(this,Se,"m",Qi).call(this),this.emit("add")})}async addAll(e,t){return Promise.all(e.map(async r=>this.add(r,t)))}start(){return H(this,ar,"f")?(ve(this,ar,!1,"f"),H(this,Se,"m",ao).call(this),this):this}pause(){ve(this,ar,!0,"f")}clear(){ve(this,tt,new(H(this,Ji,"f")),"f")}async onEmpty(){H(this,tt,"f").size!==0&&await H(this,Se,"m",Zi).call(this,"empty")}async onSizeLessThan(e){H(this,tt,"f").size<e||await H(this,Se,"m",Zi).call(this,"next",()=>H(this,tt,"f").size<e)}async onIdle(){H(this,rt,"f")===0&&H(this,tt,"f").size===0||await H(this,Se,"m",Zi).call(this,"idle")}get size(){return H(this,tt,"f").size}sizeBy(e){return H(this,tt,"f").filter(e).length}get pending(){return H(this,rt,"f")}get isPaused(){return H(this,ar,"f")}};Mn=new WeakMap,zn=new WeakMap,ur=new WeakMap,so=new WeakMap,qn=new WeakMap,Gi=new WeakMap,yt=new WeakMap,$n=new WeakMap,tt=new WeakMap,Ji=new WeakMap,rt=new WeakMap,Vn=new WeakMap,ar=new WeakMap,Yi=new WeakMap,Se=new WeakSet,Zl=function(){return H(this,zn,"f")||H(this,ur,"f")<H(this,so,"f")},Xl=function(){return H(this,rt,"f")<H(this,Vn,"f")},hd=function(){var e;ve(this,rt,(e=H(this,rt,"f"),e--,e),"f"),H(this,Se,"m",Qi).call(this),this.emit("next")},ec=function(){this.emit("empty"),H(this,rt,"f")===0&&this.emit("idle")},tc=function(){H(this,Se,"m",ms).call(this),H(this,Se,"m",bs).call(this),ve(this,$n,void 0,"f")},rc=function(){let e=Date.now();if(H(this,yt,"f")===void 0){let t=H(this,Gi,"f")-e;if(t<0)ve(this,ur,H(this,Mn,"f")?H(this,rt,"f"):0,"f");else return H(this,$n,"f")===void 0&&ve(this,$n,setTimeout(()=>{H(this,Se,"m",tc).call(this)},t),"f"),!0}return!1},Qi=function(){if(H(this,tt,"f").size===0)return H(this,yt,"f")&&clearInterval(H(this,yt,"f")),ve(this,yt,void 0,"f"),H(this,Se,"m",ec).call(this),!1;if(!H(this,ar,"f")){let e=!H(this,Se,"a",rc);if(H(this,Se,"a",Zl)&&H(this,Se,"a",Xl)){let t=H(this,tt,"f").dequeue();return t?(this.emit("active"),t(),e&&H(this,Se,"m",bs).call(this),!0):!1}}return!1},bs=function(){H(this,zn,"f")||H(this,yt,"f")!==void 0||(ve(this,yt,setInterval(()=>{H(this,Se,"m",ms).call(this)},H(this,qn,"f")),"f"),ve(this,Gi,Date.now()+H(this,qn,"f"),"f"))},ms=function(){H(this,ur,"f")===0&&H(this,rt,"f")===0&&H(this,yt,"f")&&(clearInterval(H(this,yt,"f")),ve(this,yt,void 0,"f")),ve(this,ur,H(this,Mn,"f")?H(this,rt,"f"):0,"f"),H(this,Se,"m",ao).call(this)},ao=function(){for(;H(this,Se,"m",Qi).call(this););},Zi=async function(e,t){return new Promise(r=>{let n=()=>{t&&!t()||(this.off(e,n),r())};this.on(e,n)})};v();z(Je(),1);ye();Ve();Kn.default&&Kn.default;new Pe("config");v();v();v();v();ye();Ve();new Pe("datastore_spec");v();Ve();new Pe("api");v();z(wn(),1);v();v();z(bn(),1);ce();z(Je(),1);ua();v();v();var hm=z(mt(),1);(0,hm.default)("ipfs:repo:lock:memory");v();v();ce();z(Je(),1);z(mt(),1);z(uf(),1);v();ai();xr();z(Je(),1);Ge();He();v();var bm=z(mt(),1);(0,bm.default)("ipfs:repo:utils:walk-dag");v();v();v();z(ci(),1);z(Je(),1);v();v();v();v();v();v();v();ce();var $m=z(mt(),1);z(rg(),1);v();v();v();z(ya(),1);z(ya(),1);z(ci(),1);z(wn(),1);Ge();(0,$m.default)("ipfs:repo:gc");ei().code;new Pe("/local/filesroot");(0,Sw.default)("ipfs:repo");v();v();v();ye();Ve();var Kt="/",bd=new TextEncoder().encode(Kt);bd[0];v();v();v();ye();Ve();var Wt="/",md=new TextEncoder().encode(Wt),Di=md[0],We=class{constructor(e,t){if(typeof e=="string")this._buf=Ue(e);else if(e instanceof Uint8Array)this._buf=e;else throw new Error("Invalid key, should be String of Uint8Array");if(t==null&&(t=!0),t&&this.clean(),this._buf.byteLength===0||this._buf[0]!==Di)throw new Error("Invalid key")}toString(e="utf8"){return re(this._buf,e)}uint8Array(){return this._buf}get[Symbol.toStringTag](){return`Key(${this.toString()})`}static withNamespaces(e){return new We(e.join(Wt))}static random(){return new We(_n().replace(/-/g,""))}static asKey(e){return e instanceof Uint8Array||typeof e=="string"?new We(e):typeof e.uint8Array=="function"?new We(e.uint8Array()):null}clean(){if((this._buf==null||this._buf.byteLength===0)&&(this._buf=md),this._buf[0]!==Di){let e=new Uint8Array(this._buf.byteLength+1);e.fill(Di,0,1),e.set(this._buf,1),this._buf=e}for(;this._buf.byteLength>1&&this._buf[this._buf.byteLength-1]===Di;)this._buf=this._buf.subarray(0,-1)}less(e){let t=this.list(),r=e.list();for(let n=0;n<t.length;n++){if(r.length<n+1)return!1;let o=t[n],u=r[n];if(o<u)return!0;if(o>u)return!1}return t.length<r.length}reverse(){return We.withNamespaces(this.list().slice().reverse())}namespaces(){return this.list()}baseNamespace(){let e=this.namespaces();return e[e.length-1]}list(){return this.toString().split(Wt).slice(1)}type(){return o1(this.baseNamespace())}name(){return s1(this.baseNamespace())}instance(e){return new We(this.toString()+":"+e)}path(){let e=this.parent().toString();return e.endsWith(Wt)||(e+=Wt),e+=this.type(),new We(e)}parent(){let e=this.list();return e.length===1?new We(Wt):new We(e.slice(0,-1).join(Wt))}child(e){return this.toString()===Wt?e:e.toString()===Wt?this:new We(this.toString()+e.toString(),!1)}isAncestorOf(e){return e.toString()===this.toString()?!1:e.toString().startsWith(this.toString())}isDecendantOf(e){return e.toString()===this.toString()?!1:this.toString().startsWith(e.toString())}isTopLevel(){return this.list().length===1}concat(...e){return We.withNamespaces([...this.namespaces(),...a1(e.map(t=>t.namespaces()))])}};function o1(e){let t=e.split(":");return t.length<2?"":t.slice(0,-1).join(":")}function s1(e){let t=e.split(":");return t[t.length-1]}function a1(e){return[].concat(...e)}v();var u1="SHARDING",l1="_README";v();v();z(vo(),1);z(bn(),1);z(wn(),1);z(Eo(),1);v();v();z(ci(),1);v();v();new We(u1);new We(l1);v();z(wn(),1);z(Eo(),1);z(ya(),1);v();v();var Yt=z(mt(),1);it();Ge();bo();Yt.default.formatters.b=e=>e==null?"undefined":Oe.baseEncode(e);Yt.default.formatters.t=e=>e==null?"undefined":ie.baseEncode(e);Yt.default.formatters.m=e=>e==null?"undefined":go.baseEncode(e);Yt.default.formatters.p=e=>e==null?"undefined":e.toString();Yt.default.formatters.c=e=>e==null?"undefined":e.toString();Yt.default.formatters.k=e=>e==null?"undefined":e.toString();function h1(e){return Object.assign((0,Yt.default)(e),{error:(0,Yt.default)(`${e}:error`),trace:(0,Yt.default)(`${e}:trace`)})}v();v();z(bn(),1);h1("datastore:core:tiered");v();z(wn(),1);z(ci(),1);z(Eo(),1);z(sg(),1);z(_g(),1);v();z(bn(),1);v();v();v();ye();Ve();var Ht="/",Ed=new TextEncoder().encode(Ht);Ed[0];ce();xr();He();Ge();it();z(Je(),1);v();z(bn(),1);z(wn(),1);z(Eo(),1);z(vo(),1);v();v();ce();v();z(Sg(),1);z(Tg(),1);v();v();var Wn=class extends Error{constructor(e="request timed out"){super(e),this.name="TimeoutError",this.code=Wn.code}};Wn.code="ERR_TIMEOUT";v();var Qt=z(mt(),1);it();Ge();bo();Qt.default.formatters.b=e=>e==null?"undefined":Oe.baseEncode(e);Qt.default.formatters.t=e=>e==null?"undefined":ie.baseEncode(e);Qt.default.formatters.m=e=>e==null?"undefined":go.baseEncode(e);Qt.default.formatters.p=e=>e==null?"undefined":e.toString();Qt.default.formatters.c=e=>e==null?"undefined":e.toString();Qt.default.formatters.k=e=>e==null?"undefined":e.toString();function _d(e){return Object.assign((0,Qt.default)(e),{error:(0,Qt.default)(`${e}:error`),trace:(0,Qt.default)(`${e}:trace`)})}xr();Yh();v();it();_d("ipfs:components:dag:import");v();z(uf(),1);z(Ig(),1);v();v();it();Ge();He();v();v();v();v();v();v();v();v();v();v();v();ye();v();var lo={},Ws={},W1=[[4,32,"ip4"],[6,16,"tcp"],[33,16,"dccp"],[41,128,"ip6"],[42,-1,"ip6zone"],[53,-1,"dns",!0],[54,-1,"dns4",!0],[55,-1,"dns6",!0],[56,-1,"dnsaddr",!0],[132,16,"sctp"],[273,16,"udp"],[275,0,"p2p-webrtc-star"],[276,0,"p2p-webrtc-direct"],[277,0,"p2p-stardust"],[280,0,"webrtc"],[290,0,"p2p-circuit"],[301,0,"udt"],[302,0,"utp"],[400,-1,"unix",!1,!0],[421,-1,"ipfs"],[421,-1,"p2p"],[443,0,"https"],[444,96,"onion"],[445,296,"onion3"],[446,-1,"garlic64"],[460,0,"quic"],[465,0,"webtransport"],[466,-1,"certhash"],[477,0,"ws"],[478,0,"wss"],[479,0,"p2p-websocket-star"],[480,0,"http"],[777,-1,"memory"]];W1.forEach(e=>{let t=H1(...e);Ws[t.code]=t,lo[t.name]=t});function H1(e,t,r,n,o){return{code:e,size:t,name:r,resolvable:Boolean(n),path:Boolean(o)}}function De(e){if(typeof e=="number"){if(Ws[e]!=null)return Ws[e];throw new Error(`no protocol with code: ${e}`)}else if(typeof e=="string"){if(lo[e]!=null)return lo[e];throw new Error(`no protocol with name: ${e}`)}throw new Error(`invalid protocol id type: ${typeof e}`)}ce();Ge();it();mo();He();z(nt(),1);ye();Ve();Ur();var Cs=Object.values(Yn).map(e=>e.decoder);(function(){let e=Cs[0].or(Cs[1]);return Cs.slice(2).forEach(t=>e=e.or(t)),e})();z(nt(),1);Ur();ye();z(nt(),1);ce();it();z(Je(),1);ye();pa();De("dns").code,De("dns4").code,De("dns6").code,De("dnsaddr").code;De("p2p").code,De("ipfs").code;v();v();v();v();v();ye();v();var co={},Gs={},mv=[[4,32,"ip4"],[6,16,"tcp"],[33,16,"dccp"],[41,128,"ip6"],[42,-1,"ip6zone"],[53,-1,"dns",!0],[54,-1,"dns4",!0],[55,-1,"dns6",!0],[56,-1,"dnsaddr",!0],[132,16,"sctp"],[273,16,"udp"],[275,0,"p2p-webrtc-star"],[276,0,"p2p-webrtc-direct"],[277,0,"p2p-stardust"],[280,0,"webrtc"],[290,0,"p2p-circuit"],[301,0,"udt"],[302,0,"utp"],[400,-1,"unix",!1,!0],[421,-1,"ipfs"],[421,-1,"p2p"],[443,0,"https"],[444,96,"onion"],[445,296,"onion3"],[446,-1,"garlic64"],[460,0,"quic"],[465,0,"webtransport"],[466,-1,"certhash"],[477,0,"ws"],[478,0,"wss"],[479,0,"p2p-websocket-star"],[480,0,"http"],[777,-1,"memory"]];mv.forEach(e=>{let t=vv(...e);Gs[t.code]=t,co[t.name]=t});function vv(e,t,r,n,o){return{code:e,size:t,name:r,resolvable:Boolean(n),path:Boolean(o)}}function Me(e){if(typeof e=="number"){if(Gs[e]!=null)return Gs[e];throw new Error(`no protocol with code: ${e}`)}else if(typeof e=="string"){if(co[e]!=null)return co[e];throw new Error(`no protocol with name: ${e}`)}throw new Error(`invalid protocol id type: ${typeof e}`)}ce();Ge();it();mo();He();z(nt(),1);ye();Ve();Ur();var Os=Object.values(Yn).map(e=>e.decoder);(function(){let e=Os[0].or(Os[1]);return Os.slice(2).forEach(t=>e=e.or(t)),e})();z(nt(),1);Ur();ye();z(nt(),1);ce();it();z(Je(),1);ye();pa();Me("dns").code,Me("dns4").code,Me("dns6").code,Me("dnsaddr").code;Me("p2p").code,Me("ipfs").code;ce();z(Cg(),1);ye();ce();v();ye();Ve();var Gt="/",Jd=new TextEncoder().encode(Gt),Vi=Jd[0],ct=class{constructor(e,t){if(typeof e=="string")this._buf=Ue(e);else if(e instanceof Uint8Array)this._buf=e;else throw new Error("Invalid key, should be String of Uint8Array");if(t==null&&(t=!0),t&&this.clean(),this._buf.byteLength===0||this._buf[0]!==Vi)throw new Error("Invalid key")}toString(e="utf8"){return re(this._buf,e)}uint8Array(){return this._buf}get[Symbol.toStringTag](){return`Key(${this.toString()})`}static withNamespaces(e){return new ct(e.join(Gt))}static random(){return new ct(_n().replace(/-/g,""))}static asKey(e){return e instanceof Uint8Array||typeof e=="string"?new ct(e):typeof e.uint8Array=="function"?new ct(e.uint8Array()):null}clean(){if((this._buf==null||this._buf.byteLength===0)&&(this._buf=Jd),this._buf[0]!==Vi){let e=new Uint8Array(this._buf.byteLength+1);e.fill(Vi,0,1),e.set(this._buf,1),this._buf=e}for(;this._buf.byteLength>1&&this._buf[this._buf.byteLength-1]===Vi;)this._buf=this._buf.subarray(0,-1)}less(e){let t=this.list(),r=e.list();for(let n=0;n<t.length;n++){if(r.length<n+1)return!1;let o=t[n],u=r[n];if(o<u)return!0;if(o>u)return!1}return t.length<r.length}reverse(){return ct.withNamespaces(this.list().slice().reverse())}namespaces(){return this.list()}baseNamespace(){let e=this.namespaces();return e[e.length-1]}list(){return this.toString().split(Gt).slice(1)}type(){return Jv(this.baseNamespace())}name(){return Yv(this.baseNamespace())}instance(e){return new ct(this.toString()+":"+e)}path(){let e=this.parent().toString();return e.endsWith(Gt)||(e+=Gt),e+=this.type(),new ct(e)}parent(){let e=this.list();return e.length===1?new ct(Gt):new ct(e.slice(0,-1).join(Gt))}child(e){return this.toString()===Gt?e:e.toString()===Gt?this:new ct(this.toString()+e.toString(),!1)}isAncestorOf(e){return e.toString()===this.toString()?!1:e.toString().startsWith(this.toString())}isDecendantOf(e){return e.toString()===this.toString()?!1:this.toString().startsWith(e.toString())}isTopLevel(){return this.list().length===1}concat(...e){return ct.withNamespaces([...this.namespaces(),...Qv(e.map(t=>t.namespaces()))])}};function Jv(e){let t=e.split(":");return t.length<2?"":t.slice(0,-1).join(":")}function Yv(e){let t=e.split(":");return t[t.length-1]}function Qv(e){return[].concat(...e)}z(Je(),1);v();ce();z(Je(),1);new ct("/local/filesroot");z(Je(),1);v();z(Og(),1);z(bn(),1);z(ci(),1);_d("ipfs:components:dag:import");v();ce();v();xr();ui();ua();mo();var Zd={};pe(Zd,{code:()=>v2,decode:()=>A2,encode:()=>_2,name:()=>m2,toGeneral:()=>tp});v();v();v();bo();function Jt(e){return wo.encode(e).slice(1)}function It(e){return wo.decode(`u${e}`)}ce();function l2(e){let[t,r,n]=e;return{payload:r,signatures:[{protected:t,signature:n}],link:G.decode(It(r))}}function c2(e){let t={signature:It(e.signature)};return e.header&&(t.header=e.header),e.protected&&(t.protected=It(e.protected)),t}function h2(e){let t=It(e.payload);try{G.decode(t)}catch{throw new Error("Not a valid DagJWS")}return{payload:t,signatures:e.signatures.map(c2)}}function f2(e){let t={signature:Jt(e.signature)};return e.header&&(t.header=e.header),e.protected&&(t.protected=Jt(e.protected)),t}function d2(e){let t={payload:Jt(e.payload),signatures:e.signatures.map(f2)};return t.link=G.decode(new Uint8Array(e.payload)),t}v();function p2(e){let[t,r,n,o,u]=e,c={ciphertext:o,iv:n,protected:t,tag:u};return r&&(c.recipients=[{encrypted_key:r}]),c}function y2(e){let t={};return e.encrypted_key&&(t.encrypted_key=It(e.encrypted_key)),e.header&&(t.header=e.header),t}function g2(e){let t={ciphertext:It(e.ciphertext),protected:It(e.protected),iv:It(e.iv),tag:It(e.tag)};return e.aad&&(t.aad=It(e.aad)),e.recipients&&(t.recipients=e.recipients.map(y2)),e.unprotected&&(t.unprotected=e.unprotected),t}function w2(e){let t={};return e.encrypted_key&&(t.encrypted_key=Jt(e.encrypted_key)),e.header&&(t.header=e.header),t}function b2(e){let t={ciphertext:Jt(e.ciphertext),protected:Jt(e.protected),iv:Jt(e.iv),tag:Jt(e.tag)};return e.aad&&(t.aad=Jt(e.aad)),e.recipients&&(t.recipients=e.recipients.map(w2)),e.unprotected&&(t.unprotected=e.unprotected),t}var m2="dag-jose",v2=133;function Xd(e){return"payload"in e&&typeof e.payload=="string"&&"signatures"in e&&Array.isArray(e.signatures)}function E2(e){return"payload"in e&&e.payload instanceof Uint8Array&&"signatures"in e&&Array.isArray(e.signatures)}function x2(e){return"ciphertext"in e&&e.ciphertext instanceof Uint8Array&&"iv"in e&&e.iv instanceof Uint8Array&&"protected"in e&&e.protected instanceof Uint8Array&&"tag"in e&&e.tag instanceof Uint8Array}function ep(e){return"ciphertext"in e&&typeof e.ciphertext=="string"&&"iv"in e&&typeof e.iv=="string"&&"protected"in e&&typeof e.protected=="string"&&"tag"in e&&typeof e.tag=="string"}function tp(e){if(typeof e=="string"){let t=e.split(".");if(t.length===3)return l2(t);if(t.length===5)return p2(t);throw new Error("Not a valid JOSE string")}if(Xd(e)||ep(e))return e;throw new Error("Not a valid unencoded JOSE object")}function _2(e){typeof e=="string"&&(e=tp(e));let t;if(Xd(e))t=h2(e);else if(ep(e))t=g2(e);else throw new Error("Not a valid JOSE object");return new Uint8Array(Io(t))}function A2(e){let t;try{t=Ta(e)}catch{throw new Error("Not a valid DAG-JOSE object")}if(E2(t))return d2(t);if(x2(t))return b2(t);throw new Error("Not a valid DAG-JOSE object")}v();v();v();async function*B2(e){let t=0;for(;t<e.length;)yield e[t++]}var C2=z(vo(),1);ai();v();Ge();xr();ce();He();v();z(Je(),1);async function tu(e,t){let r=await B2([t]),[{root:n}]=await(0,C2.default)(e.import(r));return n.cid}var uu=du(op(),1),lu=du(up(),1),cu="ArDag";console.log({ArDBMod:uu});var mi=(uu==null?void 0:uu.default)||uu;mi=(mi==null?void 0:mi.default)||mi;async function lp({buffer:e=null,arweave:t=null,wallet:r=null}){if(!e)throw new Error("buffer is required");if(!t){if(!this.arweave)throw new Error("Arweave is required");t=this.arweave}r||this.wallet&&(r=this.wallet);let{root:n}=await un.load(e),{cid:o}=await Oa(e),u=await t.createTransaction({data:e}),c=[{name:"App-Name",value:[cu]},{name:"Root-CID",value:[n.toString()]},{name:"CAR-CID",value:[o.toString()]}];if(c&&c.length)for(let a of c)u.addTag(a.name.toString(),a.value.toString());return await t.transactions.sign(u,r),await this.post(u),n}async function cp({dagOwner:e,dag:t,arweave:r=null}){if(!e)throw new Error("dagOwner is required");if(!t){if(!this.dag)throw new Error("DagRepo is required");t=this.dag}if(!r){if(!this.arweave)throw new Error("Arweave is required");r=this.arweave}let n=[{name:"App-Name",values:[cu]}],o=await new mi(r).search("transactions").tags(n).from(e).findAll(),u,c=async(a,h)=>{try{let d=await r.transactions.getData(h.id),m=new Uint8Array((0,lu.decodeURLSafe)(d)),w=await tu(a,m);u||(u=w),a.hasOwnProperty("rootCID")&&!(a!=null&&a.rootCID)&&(a.rootCID=w)}catch(d){console.log("Import failed",d)}};for(let a of o)await c(t,a);return u}async function D2({dagOwner:e,tag:t=null,arweave:r=null}){if(!e)throw new Error("dagOwner is required");if(!r){if(!this.arweave)throw new Error("Arweave is required");r=this.arweave}let n=[{name:"App-Name",values:[cu]}],o=await new mi(r).search("transactions").tags(n).from(e).findAll();if(!o)return null;let u,c;for(;!u&&o.length;){let a=await r.transactions.getData(o.shift().id);if(!a)continue;let h=new Uint8Array((0,lu.decodeURLSafe)(a));if(!h)continue;let{root:d,get:m}=await un.load(h),w=await m(d);if(!t)return w;w.hasOwnProperty(t)&&!c&&(c=w[t].obj);try{u=await m(c)}catch{}}return u}async function M2(e){return(await this.dag.get(this.rootCID,{path:`/${e}/obj`})).value}async function z2({dag:e,wallet:t=null,dagOwner:r=!1}){if(!e)throw new Error("Supply a DagRepo from https://github.com/DougAnderson444/ipld-car-txs");return r?await this.load({dag:e,dagOwner:r}):r=await this.arweave.wallets.jwkToAddress(t),{arweave:this.arweave,post:this.post,dagOwner:r,wallet:t,dag:e,load:cp,rootCID:this.rootCID||null,latest:M2,persist:lp,async save(n,o){let u=await this.dag.tx.add(n,o);this.rootCID=u;let c=await this.dag.tx.commit();return await this.persist({buffer:c}),u}}}function xx({arweave:e,post:t=null}){if(!e)throw new Error("Arweave instance must be provided");let r=e.transactions.post.bind(e.transactions);return{arweave:e,post:t||r,getInstance:z2,persist:lp,get:D2,load:cp}}/*!
* The buffer module from node.js, for the browser.
*
* @author   Feross Aboukhadijeh <https://feross.org>
* @license  MIT
*//*!
 * bytes
 * Copyright(c) 2012-2014 TJ Holowaychuk
 * Copyright(c) 2015 Jed Watson
 * MIT Licensed
 *//*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *//*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *//*! run-parallel-limit. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */export{D2 as get,z2 as getInstance,xx as initializeArDag,M2 as latest,cp as load,lp as persist};
