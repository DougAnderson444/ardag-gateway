import{A as l,i as u}from"./index-e6c15f70.js";import{g as x,i as z,l as D,p as L}from"./index-e6c15f70.js";let t;async function f(e){let a={address:"",jwk:void 0};return a.jwk=await e.wallets.generate(),a.address=await e.wallets.getAddress(a.jwk),a}async function m(e,a){await e.api.get(`/mint/${a.address}/1000000000000`)}async function c(){await t.api.get("mine")}const A={log:e=>!0};async function j({dev:e=!0,serverUrl:a="http://localhost:1984",logger:g=A}){let r,i,{host:n,port:s,protocol:o}=new URL(a);if(n=n.replace(`:${s}`,"")||"localhost",s=s||443,o=o.replace(":",""),g.log({host:n,port:s,protocol:o,Arweave:l}),e){t=l.init({host:n,port:s,protocol:o,timeout:2e4,logging:!1}),i=await f(t),await m(t,i),await c();const w=t.transactions.post.bind(t.transactions);r=async p=>{const d=await w(p);return await c(),d}}else t=l.init({}),await generateRsaJwk(),r=i.arweaveWalletAPI.dispatch;return{ardag:u({arweave:t,post:r}),wallet:i,arweave:t}}export{x as get,z as initializeArDag,D as load,L as persist,j as setup};
