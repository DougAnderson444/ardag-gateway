import{_ as R}from"../../chunks/preload-helper-aa6bc0ce.js";import{S as K,i as F,s as H,k as y,q as z,a as T,e as V,l as E,m as A,r as C,h as w,c as S,n as b,b as I,F as k,H as X,I as B,f as N,g as U,t as P,d as J,J as ce,K as _e,u as Q,B as ge,C as me,D as pe,E as he,L as $,M as we,N as be,O as ve,P as ke,A as G,G as De,Q as x,R as ye,v as L,w as j,x as M,y as q,o as Ee}from"../../chunks/index-dee658ab.js";import{A as Ae}from"../../chunks/PlugNPlayGateway.svelte_svelte_type_style_lang-40242407.js";import{w as Ie}from"../../chunks/index-9160121a.js";const Ne=l=>({owner:l&2,tag:l&8}),ee=l=>({owner:l[1],tag:l[3]});function te(l,t,a){const e=l.slice();return e[12]=t[a],e}function le(l){let t,a,e,s,o,i=l[2],n=[];for(let r=0;r<i.length;r+=1)n[r]=ae(te(l,i,r));return{c(){t=y("div"),a=z("Please select a tag to display"),s=T();for(let r=0;r<n.length;r+=1)n[r].c();o=V(),this.h()},l(r){t=E(r,"DIV",{class:!0});var c=A(t);a=C(c,"Please select a tag to display"),c.forEach(w),s=S(r);for(let d=0;d<n.length;d+=1)n[d].l(r);o=V(),this.h()},h(){b(t,"class",e=l[3]?"text-green-800":"text-red-600")},m(r,c){I(r,t,c),k(t,a),I(r,s,c);for(let d=0;d<n.length;d+=1)n[d].m(r,c);I(r,o,c)},p(r,c){if(c&8&&e!==(e=r[3]?"text-green-800":"text-red-600")&&b(t,"class",e),c&12){i=r[2];let d;for(d=0;d<i.length;d+=1){const _=te(r,i,d);n[d]?n[d].p(_,c):(n[d]=ae(_),n[d].c(),n[d].m(o.parentNode,o))}for(;d<n.length;d+=1)n[d].d(1);n.length=i.length}},d(r){r&&w(t),r&&w(s),_e(n,r),r&&w(o)}}}function ae(l){let t,a,e,s=l[12]+"",o,i,n,r,c;function d(...f){return l[9](l[12],...f)}function _(...f){return l[10](l[12],...f)}return{c(){t=y("div"),a=y("div"),e=y("h2"),o=z(s),n=T(),this.h()},l(f){t=E(f,"DIV",{class:!0});var u=A(t);a=E(u,"DIV",{class:!0});var p=A(a);e=E(p,"H2",{class:!0});var m=A(e);o=C(m,s),m.forEach(w),p.forEach(w),n=S(u),u.forEach(w),this.h()},h(){b(e,"class",i="text-lg font-semibold cursor-pointer p-2 m-2 border rounded w-fit "+(l[3]==l[12]?"bg-green-200":"bg-slate-100")),b(a,"class","flex-1 flex flex-col"),b(t,"class","flex flex-row")},m(f,u){I(f,t,u),k(t,a),k(a,e),k(e,o),k(t,n),r||(c=[B(e,"click",d),B(e,"keypress",_)],r=!0)},p(f,u){l=f,u&4&&s!==(s=l[12]+"")&&Q(o,s),u&12&&i!==(i="text-lg font-semibold cursor-pointer p-2 m-2 border rounded w-fit "+(l[3]==l[12]?"bg-green-200":"bg-slate-100"))&&b(e,"class",i)},d(f){f&&w(t),r=!1,ce(c)}}}function se(l){let t;const a=l[7].default,e=ge(a,l,l[6],ee);return{c(){e&&e.c()},l(s){e&&e.l(s)},m(s,o){e&&e.m(s,o),t=!0},p(s,o){e&&e.p&&(!t||o&74)&&me(e,a,s,s[6],t?he(a,s[6],o,Ne):pe(s[6]),ee)},i(s){t||(N(e,s),t=!0)},o(s){P(e,s),t=!1},d(s){e&&e.d(s)}}}function Oe(l){let t,a,e,s,o,i,n,r,c,d,_,f,u,p,m,O,v=l[2]&&le(l),g=l[3]&&se(l);return{c(){t=y("div"),a=y("div"),e=z("Lookup ArDag Owner:"),o=T(),i=y("input"),r=y("button"),c=z("Lookup"),_=T(),v&&v.c(),f=T(),g&&g.c(),u=V(),this.h()},l(h){t=E(h,"DIV",{class:!0});var D=A(t);a=E(D,"DIV",{class:!0});var Y=A(a);e=C(Y,"Lookup ArDag Owner:"),Y.forEach(w),o=S(D),i=E(D,"INPUT",{class:!0,type:!0,placeholder:!0}),r=E(D,"BUTTON",{class:!0});var Z=A(r);c=C(Z,"Lookup"),Z.forEach(w),D.forEach(w),_=S(h),v&&v.l(h),f=S(h),g&&g.l(h),u=V(),this.h()},h(){b(a,"class",s=(l[1]?"text-green-800":"text-red-600")+" text-lg font-semibold m-8"),b(i,"class","flex-1 border p-2 rounded-l-lg"),b(i,"type","text"),b(i,"placeholder","ArDag owner (their base64 encoded Publickey)"),i.disabled=n=!l[0],b(r,"class",d="flex-0 w-fit mr-12 p-2 shadow-lg rounded-r-lg text-white font-semibold select-none "+(l[4]?"cursor-not-allowed bg-gray-400":"cursor-pointer bg-blue-500")),b(t,"class","flex flex-row items-center ")},m(h,D){I(h,t,D),k(t,a),k(a,e),k(t,o),k(t,i),X(i,l[1]),k(t,r),k(r,c),I(h,_,D),v&&v.m(h,D),I(h,f,D),g&&g.m(h,D),I(h,u,D),p=!0,m||(O=[B(i,"input",l[8]),B(r,"click",l[5])],m=!0)},p(h,[D]){(!p||D&2&&s!==(s=(h[1]?"text-green-800":"text-red-600")+" text-lg font-semibold m-8"))&&b(a,"class",s),(!p||D&1&&n!==(n=!h[0]))&&(i.disabled=n),D&2&&i.value!==h[1]&&X(i,h[1]),(!p||D&16&&d!==(d="flex-0 w-fit mr-12 p-2 shadow-lg rounded-r-lg text-white font-semibold select-none "+(h[4]?"cursor-not-allowed bg-gray-400":"cursor-pointer bg-blue-500")))&&b(r,"class",d),h[2]?v?v.p(h,D):(v=le(h),v.c(),v.m(f.parentNode,f)):v&&(v.d(1),v=null),h[3]?g?(g.p(h,D),D&8&&N(g,1)):(g=se(h),g.c(),N(g,1),g.m(u.parentNode,u)):g&&(U(),P(g,1,1,()=>{g=null}),J())},i(h){p||(N(g),p=!0)},o(h){P(g),p=!1},d(h){h&&w(t),h&&w(_),v&&v.d(h),h&&w(f),g&&g.d(h),h&&w(u),m=!1,ce(O)}}}function Pe(l,t,a){let{$$slots:e={},$$scope:s}=t,{ardag:o}=t,i,n,r,c;async function d(){const m=await o.get({dagOwner:i});console.log("rootNode",m,{owner:i}),m&&(a(2,n=Object.keys(m)),a(4,c=!1))}function _(m){a(4,c=!0),d()}function f(){i=this.value,a(1,i)}const u=(m,O)=>a(3,r=m),p=(m,O)=>a(3,r=m);return l.$$set=m=>{"ardag"in m&&a(0,o=m.ardag),"$$scope"in m&&a(6,s=m.$$scope)},[o,i,n,r,c,_,s,e,f,u,p]}class Te extends K{constructor(t){super(),F(this,t,Pe,Oe,H,{ardag:0})}}function Se(l){const t=l-1;return t*t*t+1}function oe(l){return Object.prototype.toString.call(l)==="[object Date]"}function W(l,t){if(l===t||l!==l)return()=>l;const a=typeof l;if(a!==typeof t||Array.isArray(l)!==Array.isArray(t))throw new Error("Cannot interpolate values of different type");if(Array.isArray(l)){const e=t.map((s,o)=>W(l[o],s));return s=>e.map(o=>o(s))}if(a==="object"){if(!l||!t)throw new Error("Object cannot be null");if(oe(l)&&oe(t)){l=l.getTime(),t=t.getTime();const o=t-l;return i=>new Date(l+i*o)}const e=Object.keys(t),s={};return e.forEach(o=>{s[o]=W(l[o],t[o])}),o=>{const i={};return e.forEach(n=>{i[n]=s[n](o)}),i}}if(a==="number"){const e=t-l;return s=>l+s*e}throw new Error(`Cannot interpolate ${a} values`)}function ze(l,t={}){const a=Ie(l);let e,s=l;function o(i,n){if(l==null)return a.set(l=i),Promise.resolve();s=i;let r=e,c=!1,{delay:d=0,duration:_=400,easing:f=ve,interpolate:u=W}=$($({},t),n);if(_===0)return r&&(r.abort(),r=null),a.set(l=s),Promise.resolve();const p=we()+d;let m;return e=be(O=>{if(O<p)return!0;c||(m=u(l,i),typeof _=="function"&&(_=_(l,i)),c=!0),r&&(r.abort(),r=null);const v=O-p;return v>_?(a.set(l=i),!1):(a.set(l=m(f(v/_))),!0)}),e.promise}return{set:o,update:(i,n)=>o(i(s,l),n),subscribe:a.subscribe}}function re(l){let t,a,e=l[5]?"d":"",s,o,i,n,r,c,d,_=l[3].tx.pending&&ne(l);return{c(){t=y("button"),a=z("Save"),s=z(e),n=T(),_&&_.c(),r=V(),this.h()},l(f){t=E(f,"BUTTON",{class:!0});var u=A(t);a=C(u,"Save"),s=C(u,e),u.forEach(w),n=S(f),_&&_.l(f),r=V(),this.h()},h(){b(t,"class",o="flex-0 w-fit p-2 shadow-lg rounded-r-lg text-white font-semibold select-none "+(l[5]?"cursor-not-allowed bg-gray-400":"cursor-pointer bg-blue-500")+" svelte-18psq5z"),t.disabled=i=!l[2]||l[5]},m(f,u){I(f,t,u),k(t,a),k(t,s),I(f,n,u),_&&_.m(f,u),I(f,r,u),c||(d=B(t,"click",l[8]),c=!0)},p(f,u){u&32&&e!==(e=f[5]?"d":"")&&Q(s,e),u&32&&o!==(o="flex-0 w-fit p-2 shadow-lg rounded-r-lg text-white font-semibold select-none "+(f[5]?"cursor-not-allowed bg-gray-400":"cursor-pointer bg-blue-500")+" svelte-18psq5z")&&b(t,"class",o),u&36&&i!==(i=!f[2]||f[5])&&(t.disabled=i),f[3].tx.pending?_?_.p(f,u):(_=ne(f),_.c(),_.m(r.parentNode,r)):_&&(_.d(1),_=null)},d(f){f&&w(t),f&&w(n),_&&_.d(f),f&&w(r),c=!1,d()}}}function ne(l){let t,a=!l[5]&&l[6]>1&&ie(l);return{c(){t=y("div"),a&&a.c(),this.h()},l(e){t=E(e,"DIV",{class:!0});var s=A(t);a&&a.l(s),s.forEach(w),this.h()},h(){b(t,"class","flex-1 m-2 svelte-18psq5z")},m(e,s){I(e,t,s),a&&a.m(t,null)},p(e,s){!e[5]&&e[6]>1?a?a.p(e,s):(a=ie(e),a.c(),a.m(t,null)):a&&(a.d(1),a=null)},d(e){e&&w(t),a&&a.d()}}}function ie(l){let t,a=fe(l[6])+"",e,s;return{c(){t=y("div"),e=z(a),this.h()},l(o){t=E(o,"DIV",{class:!0});var i=A(t);e=C(i,a),i.forEach(w),this.h()},h(){b(t,"class",s=x(l[6]>1024*100?"text-red-700 font-bold":"")+" svelte-18psq5z")},m(o,i){I(o,t,i),k(t,e)},p(o,i){i&64&&a!==(a=fe(o[6])+"")&&Q(e,a),i&64&&s!==(s=x(o[6]>1024*100?"text-red-700 font-bold":"")+" svelte-18psq5z")&&b(t,"class",s)},d(o){o&&w(t)}}}function Ce(l){let t,a,e,s,o,i,n=l[3]&&l[4]&&l[0]&&re(l);return{c(){t=y("div"),a=y("div"),e=y("div"),s=T(),n&&n.c(),this.h()},l(r){t=E(r,"DIV",{class:!0});var c=A(t);a=E(c,"DIV",{class:!0});var d=A(a);e=E(d,"DIV",{class:!0,contenteditable:!0}),A(e).forEach(w),s=S(d),n&&n.l(d),d.forEach(w),c.forEach(w),this.h()},h(){b(e,"class","border w-44 p-2 bg-white shadow-lg svelte-18psq5z"),b(e,"contenteditable","true"),l[1]===void 0&&ke(()=>l[10].call(e)),b(a,"class","flex flex-row items-center svelte-18psq5z"),b(t,"class","flex flex-col svelte-18psq5z")},m(r,c){I(r,t,c),k(t,a),k(a,e),l[1]!==void 0&&(e.textContent=l[1]),k(a,s),n&&n.m(a,null),o||(i=B(e,"input",l[10]),o=!0)},p(r,[c]){c&2&&r[1]!==e.textContent&&(e.textContent=r[1]),r[3]&&r[4]&&r[0]?n?n.p(r,c):(n=re(r),n.c(),n.m(a,null)):n&&(n.d(1),n=null)},i:G,o:G,d(r){r&&w(t),n&&n.d(),o=!1,i()}}}function fe(l){if(l==null||l=="")return"0 Bytes";const t=new Array("Bytes","KB","MB","GB","TB","PB","EB","ZB","YB");let a=0,e=parseFloat(l);a=Math.floor(Math.log(e)/Math.log(1024));let s=e/Math.pow(1024,a);return s=s.toFixed(0),s+t[a]}function Ve(l,t,a){let e,{tagNode:s}=t,{data:o}=t,{wallet:i}=t,{dag:n}=t,{ardag:r}=t,{tag:c="Profile"}=t;const d=ze(1,{duration:400,easing:Se});De(l,d,g=>a(6,e=g));async function _(){ye(d,e=await n.tx.checkSize(o),e)}let f=!1,u,p=[];async function m(){if(!o||!s)return;const g=await n.tx.pending.add({value:o});a(0,s.data=g,s),console.log("saving tagNode",s),await n.tx.add(c,s);const h=await n.tx.commit();u=await r.persist({buffer:h,wallet:i}),console.log("persist root",u.toString()),O(),a(5,f=!0)}async function O(){p=Object.keys((await n.get(n.rootCID)).value);for(let g of p)console.log("tag",g),(await n.get(n.rootCID)).value,(await n.get(n.rootCID,{path:`${g}/obj/`})).value}function v(){c=this.textContent,a(1,c)}return l.$$set=g=>{"tagNode"in g&&a(0,s=g.tagNode),"data"in g&&a(2,o=g.data),"wallet"in g&&a(9,i=g.wallet),"dag"in g&&a(3,n=g.dag),"ardag"in g&&a(4,r=g.ardag),"tag"in g&&a(1,c=g.tag)},l.$$.update=()=>{l.$$.dirty&4&&o&&_(),l.$$.dirty&8&&n&&n.rootCID&&O(),l.$$.dirty&36&&o&&f&&a(5,f=!1)},[s,c,o,n,r,f,e,d,m,i,v]}class Be extends K{constructor(t){super(),F(this,t,Ve,Ce,H,{tagNode:0,data:2,wallet:9,dag:3,ardag:4,tag:1})}}function ue(l){let t,a;return t=new l[3]({}),t.$on("walletReady",l[4]),{c(){L(t.$$.fragment)},l(e){j(t.$$.fragment,e)},m(e,s){M(t,e,s),a=!0},p:G,i(e){a||(N(t.$$.fragment,e),a=!0)},o(e){P(t.$$.fragment,e),a=!1},d(e){q(t,e)}}}function de(l){let t,a;return t=new Ae({props:{ardag:l[1],dag:l[2],owner:l[8],tag:l[9],$$slots:{default:[Le,({tagNode:e,data:s})=>({10:e,11:s}),({tagNode:e,data:s})=>(e?1024:0)|(s?2048:0)]},$$scope:{ctx:l}}}),t.$on("change",l[5]),{c(){L(t.$$.fragment)},l(e){j(t.$$.fragment,e)},m(e,s){M(t,e,s),a=!0},p(e,s){const o={};s&2&&(o.ardag=e[1]),s&4&&(o.dag=e[2]),s&256&&(o.owner=e[8]),s&512&&(o.tag=e[9]),s&7687&&(o.$$scope={dirty:s,ctx:e}),t.$set(o)},i(e){a||(N(t.$$.fragment,e),a=!0)},o(e){P(t.$$.fragment,e),a=!1},d(e){q(t,e)}}}function Le(l){let t,a;return t=new Be({props:{wallet:l[0].jwk,tag:l[9],ardag:l[1],dag:l[2],tagNode:l[10],data:l[11]}}),{c(){L(t.$$.fragment)},l(e){j(t.$$.fragment,e)},m(e,s){M(t,e,s),a=!0},p(e,s){const o={};s&1&&(o.wallet=e[0].jwk),s&512&&(o.tag=e[9]),s&2&&(o.ardag=e[1]),s&4&&(o.dag=e[2]),s&1024&&(o.tagNode=e[10]),s&2048&&(o.data=e[11]),t.$set(o)},i(e){a||(N(t.$$.fragment,e),a=!0)},o(e){P(t.$$.fragment,e),a=!1},d(e){q(t,e)}}}function je(l){let t,a,e=l[8]&&l[9]&&de(l);return{c(){e&&e.c(),t=V()},l(s){e&&e.l(s),t=V()},m(s,o){e&&e.m(s,o),I(s,t,o),a=!0},p(s,o){s[8]&&s[9]?e?(e.p(s,o),o&768&&N(e,1)):(e=de(s),e.c(),N(e,1),e.m(t.parentNode,t)):e&&(U(),P(e,1,1,()=>{e=null}),J())},i(s){a||(N(e),a=!0)},o(s){P(e),a=!1},d(s){e&&e.d(s),s&&w(t)}}}function Me(l){let t,a,e,s,o,i,n,r,c,d,_,f=l[3]&&ue(l);return d=new Te({props:{ardag:l[1],$$slots:{default:[je,({owner:u,tag:p})=>({8:u,9:p}),({owner:u,tag:p})=>(u?256:0)|(p?512:0)]},$$scope:{ctx:l}}}),{c(){f&&f.c(),t=T(),a=y("main"),e=y("div"),s=y("h1"),o=z("Welcome to the ArDag Gateway"),i=T(),n=y("p"),r=z(`Loads Arweave RSA Public Key owner's es modules from ArDag, mounts them to the DOM. Saves any
			data back to wallet owner's ArDag.`),c=T(),L(d.$$.fragment),this.h()},l(u){f&&f.l(u),t=S(u),a=E(u,"MAIN",{class:!0});var p=A(a);e=E(p,"DIV",{class:!0});var m=A(e);s=E(m,"H1",{class:!0});var O=A(s);o=C(O,"Welcome to the ArDag Gateway"),O.forEach(w),i=S(m),n=E(m,"P",{});var v=A(n);r=C(v,`Loads Arweave RSA Public Key owner's es modules from ArDag, mounts them to the DOM. Saves any
			data back to wallet owner's ArDag.`),v.forEach(w),c=S(m),j(d.$$.fragment,m),m.forEach(w),p.forEach(w),this.h()},h(){b(s,"class","text-xl font-semibold"),b(e,"class","flex flex-col p-2 h-full"),b(a,"class","flex flex-col w-full h-screen my-0 mx-auto box-border justify-start")},m(u,p){f&&f.m(u,p),I(u,t,p),I(u,a,p),k(a,e),k(e,s),k(s,o),k(e,i),k(e,n),k(n,r),k(e,c),M(d,e,null),_=!0},p(u,[p]){u[3]?f?(f.p(u,p),p&8&&N(f,1)):(f=ue(u),f.c(),N(f,1),f.m(t.parentNode,t)):f&&(U(),P(f,1,1,()=>{f=null}),J());const m={};p&2&&(m.ardag=u[1]),p&4871&&(m.$$scope={dirty:p,ctx:u}),d.$set(m)},i(u){_||(N(f),N(d.$$.fragment,u),_=!0)},o(u){P(f),P(d.$$.fragment,u),_=!1},d(u){f&&f.d(u),u&&w(t),u&&w(a),q(d)}}}function qe(l,t,a){let e,s,o,i;Ee(async()=>{if(a(3,{Web3WalletMenu:i}=await R(()=>import("../../chunks/index-0f9a6713.js"),["..\\..\\chunks\\index-0f9a6713.js","..\\..\\assets\\index-7dd875d5.css","..\\..\\chunks\\index-dee658ab.js","..\\..\\chunks\\preload-helper-aa6bc0ce.js"],import.meta.url),i),!o&&!globalThis.dag){const{createDagRepo:d}=await R(()=>import("../../chunks/index-4fc52c31.js"),[],import.meta.url);a(2,o=await d({persist:!0})),globalThis.dag=o}else a(2,o=globalThis.dag)});async function n(){const{setupDev:d}=await R(()=>import("../../chunks/utils-6d023b2a.js"),["..\\..\\chunks\\utils-6d023b2a.js","..\\..\\chunks\\preload-helper-aa6bc0ce.js","..\\..\\chunks\\ardag-6cdad32f.js"],import.meta.url);a(1,{ardag:e}=await d({wallet:s.arweaveWalletAPI}),e)}const r=d=>a(0,s=d.detail.wallet),c=d=>console.log(d.detail);return l.$$.update=()=>{l.$$.dirty&1&&s&&n()},[s,e,o,i,r,c]}class Fe extends K{constructor(t){super(),F(this,t,qe,Me,H,{})}}export{Fe as default};
